System.register(["./dfe87471.js"],(function(){"use strict";var e,t,n,o,i,l,r,a,c,d,s,u,v,m;return{setters:[function(p){e=p._,t=p.a,n=p.f,o=p.g,i=p.b4,l=p.b5,r=p.i,a=p.b,c=p.x,d=p.b6,s=p.s,u=p.c,v=p.d,m=p.F}],execute:function(){var p,g,h,y,f=function(d){function s(){var e;if(u(this,s),(e=v(this,s)).associatedNodes=new Object,e.videoPlayer=e.querySelector("video-player").outerHTML,e.videoInterval=null,e.activeIndex=null,console.log(globalThis.location.hash),globalThis.location.hash){var t=globalThis.location.hash.split("--")[0],n=globalThis.location.hash.split("--")[1]||e.associatedNodes["slide-1"];console.log(t,n),setTimeout((function(){e.showModal(),console.log("show modal");var t=null,o=Object.values(e.associatedNodes);console.log(o.length);for(var i=0;i<o.length;i++){var l=o[i];console.log(l);var r=i<=o.length-1?o[i+1]:1/0;if(n>=l&&n<r){console.log("found current slide"+l+" "+r+" "+n),t=Object.keys(e.associatedNodes)[i],console.log(t),setTimeout((function(){e.activeIndex=t}),3e3);break}if(i==o.length-1&&null===e.activeIndex){console.log("last slide"),e.activeIndex=Object.keys(e.associatedNodes)[0];break}}}),2e3)}return globalThis.addEventListener("hashChange",(function(){var t=globalThis.location.hash.split("--"),n=m(t,2),o=n[0],i=n[1];"#lecture-player-video"!==o||i||(console.log("no timestamp"),e.showModal(),setTimeout((function(){e.activeIndex="slide-1"}),1e3))})),e}return e(s,d),t(s,[{key:"firstUpdated",value:function(){var e=this,t=this.querySelectorAll("[data-lecture-slide]");console.log(t);var n=Array.from(t);n.sort((function(e,t){return parseInt(e.getAttribute("data-value"),10)-parseInt(t.getAttribute("data-value"),10)})),n.forEach((function(t,n){t.id="slide-".concat(n+1),e.associatedNodes[t.id]=t.getAttribute("data-value"),console.log(t.id,t.getAttribute("data-value")),t.addEventListener("click",(function(){e.activeIndex=t.id}))})),this.setJumbotronAttributes()}},{key:"updated",value:function(e){var t=this;n(o(s.prototype),"updated",this).call(this,e),e.forEach((function(e,n){if("activeIndex"===n&&e!==t.activeIndex&&t.activeIndex){if(t.linked)return void(t.linked=!1);document.querySelector("video-player").playing||t.play,console.log("activeIndex changed to:",t.activeIndex),console.log(document.querySelector("#"+t.activeIndex)),t.seek(t.associatedNodes[t.activeIndex]),t.updateJumbotron(),t.updatePlaylist(),t.checkDisabledButtons()}}))}},{key:"setJumbotronAttributes",value:function(){var e=this;console.log("setJumbotronAttributes"),this.querySelectorAll("[data-lecture-slide]").forEach((function(t){var n=e.querySelector("#".concat(t.getAttribute("data-associatedID")));console.log(n),t.setAttribute("data-lecture-heading",n.textContent),t.setAttribute("data-lecture-content",e.getNextSiblingHTML(n));var o=document.createElement("div");o.innerHTML=t.getAttribute("data-lecture-content"),o.querySelectorAll("[data-lecture-slide]").forEach((function(e){e.removeAttribute("id"),e.classList.add("no-pointer-events")})),t.setAttribute("data-lecture-content",o.innerHTML)}))}},{key:"getNextSiblingHTML",value:function(e){var t=this;console.log(e);var n="",o=e.nextSibling;console.log(o.nextSibling);var i=[];for(Object.keys(this.associatedNodes).forEach((function(e){console.log(e),i.push(e),i.push(t.querySelector("#".concat(e)).getAttribute("data-associatedID"))})),i=i.filter((function(t){return t!==e.id&&t!==document.querySelector('[data-associatedID="'.concat(e.id,'"]')).id})),console.log(i);o;){if(o&&o.nodeType===Node.ELEMENT_NODE&&o.id&&i.includes(o.id)){console.log("broke chain at "+o.id);break}console.log(o),n+=o.outerHTML||"",o=o.nextSibling}return n}},{key:"addPrevNextListeners",value:function(){var e=this;console.log("addPrevNextListeners");var t=document.querySelector("#prevSlideBtn"),n=document.querySelector("#nextSlideBtn");t.addEventListener("click",(function(){var t=e.activeIndex.split("-")[1]>1?e.activeIndex.split("-")[1]-1:null;t&&(e.activeIndex="slide-"+t)})),n.addEventListener("click",(function(){var t=document.querySelectorAll("[data-lecture-slide][id]").length;console.log(t),console.log(e.activeIndex.split("-")[1]),console.log(parseInt(e.activeIndex.split("-")[1])+1),console.log(parseInt(e.activeIndex.split("-")[1])+1<t);var n=e.activeIndex.split("-")[1]<t?parseInt(e.activeIndex.split("-")[1])+1:null;n?e.activeIndex="slide-"+n:e.endVideo()}))}},{key:"updateJumbotron",value:function(){console.log("updateJumbotron");var e=document.querySelector(".jumbotron");console.log(e),e&&(e.innerHTML=""),console.log(this.activeIndex);var t=document.querySelector("#".concat(this.activeIndex));if(console.log(t),t){var n=document.createElement("h2");n.id="jumbotron-heading",n.innerText=t.getAttribute("data-lecture-heading"),e.appendChild(n);var o=document.createElement("div");o.id="jumbotron-desc",o.innerHTML=t.getAttribute("data-lecture-content"),e.appendChild(o)}}},{key:"updatePlaylist",value:function(){var e=this;console.log("updatePlaylist");var t=document.querySelector(".valueList");if(t){t.innerHTML="",Object.keys(this.associatedNodes).forEach((function(n){console.log(n,e.associatedNodes[n]),e.associatedNodes[n];var o=document.querySelector("#".concat(n)),i=document.createElement("button");i.classList.add("valueBtn"),i.textContent=o?o.getAttribute("data-lecture-heading"):"Missing Title",i.addEventListener("click",(function(){e.activeIndex=n})),n===e.activeIndex&&i.classList.add("active"),t.appendChild(i)}));var n=t.querySelector(".active");n&&t.scrollTo({left:n.offsetLeft-125,behavior:"smooth"})}else console.error("ValueList element not found")}},{key:"seek",value:function(e){console.log("seek to timestamp: ",e),this.open?setTimeout((function(){document.querySelector("#lecture-player-video").seek(e),document.querySelector("#lecture-player-video").play(),console.log(e)}),3e3):(console.log("seeking to video player"),this.querySelector("video-player").play(),this.querySelector("video-player").seek(e))}},{key:"play",value:function(){document.querySelector("video-player"),document.querySelector("video-player")?document.querySelector("video-player").play():this.querySelector("video-player").play()}},{key:"checkDisabledButtons",value:function(){console.log("checkDisabledButtons");var e=document.querySelector("#prevSlideBtn"),t=parseInt(this.activeIndex.split("-")[1]);1===t?e.setAttribute("disabled","true"):e.removeAttribute("disabled"),t!==document.querySelectorAll("[data-lecture-slide]").length&&document.querySelector("#nextSlideBtn").removeAttribute("disabled")}},{key:"endVideo",value:function(){var e=this;console.log("endVideo"),document.querySelector("#lecture-player-video").pause(),document.querySelector("#nextSlideBtn").setAttribute("disabled","true");var t=document.createElement("div");t.setAttribute("data-primary","11"),t.innerHTML='<simple-cta class="endBtn" data-pulse data-primary="11">Close Lecture Player</simple-cta>',t.classList.add("endBtnContainer"),document.querySelector(".jumbotron").appendChild(t),document.querySelector(".endBtn").addEventListener("click",(function(){document.querySelector("simple-modal").close(),e.open=!1}));var n=document.querySelector(".jumbotron");n.scrollTop=n.scrollHeight+500}},{key:"showModal",value:function(){var e=this;console.log("showModal");var t=document.createElement("div");t.classList.add("modal-content"),t.innerHTML='\n    <style>\n      simple-modal{\n        --simple-modal-width: 95%;\n        --simple-modal-height: 95%;\n        font-family: var(--ddd-font-primary, sans-serif);\n      }\n\n      .modal-content{\n        display: grid;\n        grid-template-rows: 1.5fr auto;\n        height: fit-content;\n        gap: var(--ddd-spacing-6);\n        padding: var(--ddd-spacing-4);\n      }\n\n      video-player{\n        max-width: 100%;\n        max-height: 100%;\n      }\n\n      .videoSection{\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        max-width: 100%;\n        height: 100%;\n        gap: var(--ddd-spacing-4);\n        height: 68vh;\n      }\n\n      .videoSection.small{\n        grid-template-columns: .7fr 1.3fr;\n      }\n\n      .videoSection.large{\n        grid-template-columns: 1.3fr .7fr;\n        height: 100%;\n        max-height: none;\n      }\n\n      .playlist{\n        display: grid;\n        grid-template-columns: .5fr 5fr .5fr;\n        gap: var(--ddd-spacing-2);\n        max-width: 100%;\n        height: fit-content;\n      }\n\n      .overflow-ellipsis{\n        max-width: 200px;\n        display: inline-block;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        word-wrap: break-word;\n        word-break: break-word;\n      }\n\n      .valueList {\n        display: flex; /* Use flexbox to layout items in a row */\n        flex-wrap: nowrap; /* Prevent wrapping of items */\n        border: var(--ddd-border-xs);\n        border-color: var(--ddd-theme-default-coalyGray, black);\n        background: #bab8b8;\n        overflow-x: auto; /* Enable horizontal scrolling */\n        overflow-y: hidden; /* Hide vertical overflow */\n      }\n      \n      .valueBtn {\n        flex-shrink: 0; /* Prevent buttons from shrinking */\n        background: white;\n        border: none;\n        border-right: 1px solid black; /* Keep the border-right */\n        cursor: pointer;\n        font-size: 24px;\n        padding: 16px; /* Add padding to space out the buttons */\n        height: 75px;\n        width: 200px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        font-family: var(--ddd-font-primary, sans-serif);\n      }\n\n      .valueBtn:not(:last-child){\n        border-right: 1px solid black;\n      }\n\n      .jumbotron{\n        display: flex;\n        flex-direction: column;\n        justify-content: start;\n        align-items: start;\n        height: 100%;\n        overflow-y: auto;\n        overflow-x: show;\n      }\n\n      #jumbotron-heading{\n        padding: 8px;\n        width: calc(100% - 16px);\n        margin: 8px 0;\n      }\n\n      #jumbotron-desc{\n        padding: 8px;\n        width: calc(100% - 32px);\n      }\n\n      .value-navigation-button{\n        background: white;\n        cursor: pointer;\n        padding: 4px;\n        height: fit-content;\n        margin: auto;\n      }\n      \n      .valueBtn.active{\n        background: #dfedf5;\n      }\n\n      .endBtnContainer{\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        height: 100%;\n        margin: 64px auto;\n      }\n\n      .lecture-control.active, .lecture-control:focus, .lecture-control:hover, .lecture-control:active{\n        color: var(--ddd-theme-default-beaverBlue, black);\n      }\n\n      .no-pointer-events{\n        pointer-events: none;\n      }\n      .lecture-mode-controls {\n        position: absolute;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        gap: var(--ddd-spacing-3);\n        padding: var(--ddd-spacing-2);\n        top: var(--ddd-spacing-2);\n        right: var(--ddd-spacing-20);\n      }\n      .lecture-mode-controls simple-icon-button-lite {\n        cursor: pointer;\n        --simple-icon-height: var(--ddd-icon-xs);\n        --simple-icon-width: var(--ddd-icon-xs);\n      }\n      @media (max-width: 1200px) {\n        .videoSection {\n          display: flex;\n          flex-direction: column;\n        }\n      }\n    </style>\n      <div class="videoSection normal">\n          '.concat(this.videoPlayer,'\n        <div class="jumbotron"></div>\n        <div class="lecture-mode-controls">\n        <simple-icon-button-lite class="lecture-control" id="lecture-size-small" icon="image:photo-size-select-large"></simple-icon-button-lite>\n        <simple-icon-button-lite class="lecture-control" id="lecture-size-normal" icon="image:switch-video"></simple-icon-button-lite>\n        <simple-icon-button-lite class="lecture-control" id="lecture-size-large" icon="image:photo-size-select-actual"></simple-icon-button-lite>\n      </div>\n      </div>\n      <div class="playlist">\n        <button class="value-navigation-button" id="prevSlideBtn"><simple-icon-lite icon="lrn:arrow-left"></simple-icon-lite></button>\n        <div class="valueList">\n        </div>\n        <button class="value-navigation-button" id="nextSlideBtn"><simple-icon-lite icon="lrn:arrow-right"></simple-icon-lite></button>\n      </div>\n    '),this.querySelector("video-player").setAttribute("hidden",!0);var n=new CustomEvent("simple-modal-show",{bubbles:!0,cancelable:!0,detail:{elements:{content:t}}});this.open=!0,dispatchEvent(n),setTimeout((function(){document.querySelector("#lecture-size-large").addEventListener("click",(function(e){document.querySelectorAll(".lecture-control").forEach((function(e){e.classList.remove("active")})),e.target.classList.toggle("active"),document.querySelector(".videoSection").classList.add("large"),document.querySelector(".videoSection").classList.remove("small"),document.querySelector(".videoSection").classList.remove("normal")})),document.querySelector("#lecture-size-normal").addEventListener("click",(function(e){document.querySelectorAll(".lecture-control").forEach((function(e){e.classList.remove("active")})),e.target.classList.toggle("active"),document.querySelector(".videoSection").classList.add("normal"),document.querySelector(".videoSection").classList.remove("small"),document.querySelector(".videoSection").classList.remove("large")})),document.querySelector("#lecture-size-small").addEventListener("click",(function(e){document.querySelectorAll(".lecture-control").forEach((function(e){e.classList.remove("active")})),e.target.classList.toggle("active"),document.querySelector(".videoSection").classList.add("small"),document.querySelector(".videoSection").classList.remove("normal"),document.querySelector(".videoSection").classList.remove("large")})),document.querySelector("simple-modal .modal-content .videoSection video-player").setAttribute("id","lecture-player-video"),window.addEventListener("simple-modal-closed",(function(){e.querySelector("video-player").removeAttribute("hidden"),e.open=!1}))}),3e3)}},{key:"render",value:function(){return c(p||(p=a(['\n      <simple-cta id="lectureActivation">Open Lecture Player</simple-cta>\n      ',"\n    "])),this.open?c(h||(h=a([""]))):c(g||(g=a(["<slot></slot>"]))))}}],[{key:"styles",get:function(){return[n(o(s),"styles",this),i,l,r(y||(y=a(["\n        :host {\n          font-family: var(--ddd-font-primary, sans-serif);\n        }\n\n        @media (max-width: 1200px) {\n          .videoSection {\n            grid-template-columns: 1fr;\n          }\n        }\n        lecture-player {\n          width: 100%;\n          height: 100%;\n        }\n      "])))]}},{key:"properties",get:function(){return{activeIndex:{type:String,reflect:!0},source:{type:String,reflect:!0},associatedNodes:{type:Object,reflect:!0},open:{type:Boolean,reflect:!0}}}}])}(d(s));window.customElements.define("lecture-player",f)}}}));
