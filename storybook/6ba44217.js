System.register(["./dfe87471.js"],(function(t,e){"use strict";var n,i,o,a,r,s,d,l;return{setters:[function(t){n=t._,i=t.a,o=t.m,a=t.c,r=t.d,s=t.j,d=t.k,l=t.e}],execute:function(){var c={url:new URL("./elements/dynamic-import-registry/dynamic-import-registry.js",document.baseURI).href};window.DynamicImportRegistry=window.DynamicImportRegistry||{},window.DynamicImportRegistry.requestAvailability=function(){return window.DynamicImportRegistry.instance||(window.DynamicImportRegistry.instance=document.createElement("dynamic-import-registry"),document.body.appendChild(window.DynamicImportRegistry.instance)),window.DynamicImportRegistry.instance};var u=function(t){function o(){var t;return a(this,o),(t=r(this,o)).windowControllers=new AbortController,t.list={},t.__loaded={},t.basePath=new URL("./dynamic-import-registry.js",c.url).href+"/../../../",window.WCAutoloadBasePath?t.basePath=window.WCAutoloadBasePath:window.WCGlobalBasePath&&(t.basePath=window.WCGlobalBasePath),t}return n(o,t),i(o,[{key:"connectedCallback",value:function(){window.addEventListener("dynamic-import-registry--register",this.registerDefinitionEvent.bind(this),{signal:this.windowControllers.signal})}},{key:"disconnectedCallback",value:function(){this.windowControllers.abort()}},{key:"register",value:function(t){t.tag&&t.path?this.list[t.tag]||(this.list[t.tag]=t.path):console.warn("DynamicImportRegistry: registration requires tag and path be set")}},{key:"registerDefinitionEvent",value:function(t){t.detail.tag&&t.detail.path&&this.register(t.detail)}},{key:"getPathToTag",value:function(t){return!!(this.list&&t&&this.list[t])&&"".concat(this.basePath).concat(this.list[t])}},{key:"loadDefinition",value:(l=s(d().mark((function t(n){var i=this;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=n.toLowerCase(),window.customElements.get(n)||!this.list[n]||this.__loaded[n]){t.next=15;break}return this.__loaded[n]=!0,t.prev=3,t.next=6,e.import("".concat(this.basePath).concat(this.list[n])).then((function(t){i.dispatchEvent(new CustomEvent("dynamic-import-registry-loaded",{detail:{tag:n,path:i.list[n],module:t}}))}));case 6:return t.abrupt("return",t.sent);case 9:return t.prev=9,t.t0=t.catch(3),console.warn("".concat(this.basePath).concat(this.list[n])),console.warn(t.t0),this.dispatchEvent(new CustomEvent("dynamic-import-registry-failure",{detail:{tag:n,path:this.list[n],module:null}})),t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t,this,[[3,9]])}))),function(t){return l.apply(this,arguments)})}],[{key:"tag",get:function(){return"dynamic-import-registry"}}]);var l}(o(HTMLElement));customElements.define(u.tag,u),window.WCAutoload=window.WCAutoload||{},window.WCAutoloadRegistry=window.WCAutoloadRegistry||{},window.WCAutoload.requestAvailability=function(){return window.WCAutoload.instance||(window.WCAutoload.instance=document.createElement("wc-autoload"),document.body.appendChild(window.WCAutoload.instance)),window.WCAutoload.instance};var w=function(){var t=s(d().mark((function t(e,n,i){var o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=0;case 1:if(!(o<i)){t.next=16;break}return t.prev=2,t.next=5,fetch(e,n);case 5:return t.abrupt("return",t.sent);case 8:if(t.prev=8,t.t0=t.catch(2),!(o+1===i)){t.next=13;break}throw t.t0;case 13:o++,t.next=1;break;case 16:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e,n,i){return t.apply(this,arguments)}}();window.WCAutoload.process=function(t){return new Promise((function(t,e){var n=window.WCAutoload.requestAvailability();n.loaded=!0;var i={};if(window.WCAutoloadRegistryFileProcessed){var o=document;n.target&&(o=n.target,n.processNewElement(o)),o.querySelectorAll("*").forEach((function(t){t.tagName&&!i[t.tagName]&&(n.processNewElement(t),i[t.tagName]=t.tagName)})),t("autoloader already processed")}else setTimeout(s(d().mark((function e(){var o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.WCAutoloadBasePath?n.registry.basePath=window.WCAutoloadBasePath:window.WCGlobalBasePath&&(n.registry.basePath=window.WCGlobalBasePath),!window.WCAutoloadRegistryFile||window.WCAutoloadRegistryFileProcessed){e.next=10;break}"string"==typeof window.WCAutoloadRegistryFile&&(window.WCAutoloadRegistryFile=[window.WCAutoloadRegistryFile]),o=0;case 4:if(!(o<window.WCAutoloadRegistryFile.length)){e.next=10;break}return e.next=7,w(window.WCAutoloadRegistryFile[o],{},3).then((function(t){return t.json()})).then((function(t){window.WCAutoloadRegistryFileProcessed=!0,window.WCAutoloadRegistry=l(l({},window.WCAutoloadRegistry),t)}));case 7:o++,e.next=4;break;case 10:if(window.WCAutoloadRegistry)for(o in window.WCAutoloadRegistry)n.registry.register({tag:o,path:window.WCAutoloadRegistry[o]});a=document,n.target&&(a=n.target,n.processNewElement(a)),a.querySelectorAll("*").forEach((function(t){t.tagName&&!i[t.tagName]&&(n.processNewElement(t),i[t.tagName]=t.tagName)})),t("autoloader processed on the fly");case 15:case"end":return e.stop()}}),e)}))),0)}))},window.addEventListener("load",window.WCAutoload.process),window.WCAutoload.postLoaded=function(t){setTimeout((function(){var e=window.WCAutoload.requestAvailability();e.loaded&&document.querySelectorAll(t.detail.tag).length>0&&e.registry.loadDefinition(t.detail.tag)}),0)},window.addEventListener("dynamic-import-registry--new-registration",window.WCAutoload.postLoaded);var g=function(t){function e(){var t;return a(this,e),(t=r(this,e)).loader=window.WCAutoload.requestAvailability(),t}return n(e,t),i(e,[{key:"connectedCallback",value:function(){var t=this;setTimeout((function(){if(t.children.length>0&&"TEMPLATE"==t.children[0].tagName)try{var e=JSON.parse(t.children[0].content.textContent);for(var n in e)t.loader.registry.register({tag:n,path:e[n]})}catch(t){console.warn(t)}}),0)}}],[{key:"tag",get:function(){return"wc-registry"}}])}(o(HTMLElement));customElements.define(g.tag,g);var m=t("WcAutoload",function(t){function e(){var t;return a(this,e),(t=r(this,e)).loaded=!1,t.registry=window.DynamicImportRegistry.requestAvailability(),t.options={childList:!0,subtree:!0},t}return n(e,t),i(e,[{key:"connectedCallback",value:function(){var t=this;this._mutationObserver=new MutationObserver((function(e){e.forEach((function(e){e.addedNodes.forEach((function(e){t.processNewElement(e)}))}))})),window.WCAutoloadOptions&&(this.options=window.WCAutoloadOptions),setTimeout((function(){window.WCAutoloadTarget?t.target=window.WCAutoloadTarget:t.target=document.body,t._mutationObserver.observe(t.target,t.options)}),0)}},{key:"disconnectedCallback",value:function(){this._mutationObserver.disconnect()}},{key:"processNewElement",value:function(t){t.tagName&&t.tagName.includes("-")&&"DYNAMIC-IMPORT-REGISTRY"!=t.tagName&&"WC-REGISTRY"!=t.tagName&&"WC-AUTOLOAD"!=t.tagName&&this.registry.loadDefinition(t.tagName)}}],[{key:"tag",get:function(){return"wc-autoload"}}])}(o(HTMLElement)));customElements.define(m.tag,m)}}}));
