System.register(["./9b1def34.js","./bb87ce08.js","./9875cdf6.js"],(function(t,n){"use strict";var o,i,a,r,s,l,c,d,u,h,m,v,g,f,b,y,x,A,k,w,E,_,S,N,T,C,L,B,M,z,P,O,H,R,D,F,I,U,q,G,j,V,W,X,Y,Q,K,J,Z,$,ee,te,ne,oe,ie,ae,re,se,le,ce,de,ue,he,pe,me,ve,ge,fe,be,ye,xe,Ae,ke,we,Ee,_e,Se,Ne,Te;return{setters:[function(e){o=e._,i=e.a,a=e.x,r=e.b,s=e.e,l=e.f,c=e.g,d=e.c,u=e.d,h=e.s,m=e.p,v=e.R,g=e.i,f=e.P,b=e.o,y=e.t,x=e.Q,A=e.U,k=e.V,w=e.j,E=e.k,_=e.X,S=e.Y,N=e.Z,T=e.$,C=e.a0,L=e.a1,B=e.r,M=e.a2,z=e.a3,P=e.a4,O=e.a5,H=e.a6,R=e.v,D=e.a7,F=e.a8,I=e.S,U=e.a9,q=e.aa,G=e.K,j=e.ab,V=e.ac,W=e.ad,X=e.ae,Y=e.m,Q=e.af,K=e.ag,J=e.ah,Z=e.ai,$=e.aj,ee=e.ak,te=e.al,ne=e.am,oe=e.an,ie=e.ao,ae=e.ap,re=e.aq,se=e.ar,le=e.as,ce=e.at,de=e.M,ue=e.au,he=e.av,pe=e.aw,me=e.q,ve=e.ax,ge=e.l,fe=e.J,be=e.ay},function(e){ye=e.H,xe=e.a,Ae=e.b,ke=e.c,we=e.d},function(e){Ee=e.H,_e=e.a,Se=e.b,Ne=e.c,Te=e.d}],execute:function(){var Ce,Le=function(e){return function(e){function t(){var e;return d(this,t),(e=u(this,t)).__StackDebounce,e.undoStackLimit=20,e.undoStackTimer=300,e.undoStackIgnore=!1,e.undoStackObserver=null,e.undoStackObserverProps={attributes:!0,attributeOldValue:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},e.undoStackInitialValue=e.innerHTML,e.undoStackPrevValue=e.undoStackInitialValue,e}return o(t,e),i(t,[{key:"connectedCallback",value:function(){var e=this;this.undoStackObserver=new MutationObserver((function(t){clearTimeout(e.__StackDebounce),e.__StackDebounce=setTimeout((function(){e.undoStackIgnore?e.undoStackIgnore=!1:e.undoManagerStackLogic(t)}),e.undoStackTimer)})),this.undoStackObserver.observe(this,this.undoStackObserverProps),this.undoManagerStackLogic({}),l(c(t.prototype),"connectedCallback",this).call(this)}},{key:"undoManagerStackLogic",value:function(e){var t=this.innerHTML;this.undoStack&&""!=t&&t!=this.undoStackPrevValue&&this.undoStackInitialValue!=t&&(this.undoStack.execute(new Oe(this,this.undoStackPrevValue,t)),this.undoStackPrevValue=t,this.dispatchEvent(new CustomEvent("stack-changed",{detail:{value:this.undoStack},bubbles:!0,composed:!0})))}},{key:"disconnectedCallback",value:function(){this.undoStackObserver&&this.undoStackObserver.disconnect(),l(c(t.prototype),"disconnectedCallback",this).call(this)}},{key:"firstUpdated",value:function(e){var n=this;l(c(t.prototype),"firstUpdated",this)&&l(c(t.prototype),"firstUpdated",this).call(this,e),this.undoStack=new Pe,this.undoStack.undoStackLimit=this.undoStackLimit,this.undoStack.undoStackPosition=-1,this.undoStack.commands=[],this.undoStack.changed=function(e){n.canRedo=n.undoStack.canRedo(),n.canUndo=n.undoStack.canUndo()},this.undoStack.changed()}},{key:"updated",value:function(e){var n=this;l(c(t.prototype),"updated",this)&&l(c(t.prototype),"updated",this).call(this,e),e.forEach((function(e,t){"canUndo"==t&&n.dispatchEvent(new CustomEvent("can-undo-changed",{detail:{value:n[t]},bubbles:!0,composed:!0})),"canRedo"==t&&n.dispatchEvent(new CustomEvent("can-redo-changed",{detail:{value:n[t]},bubbles:!0,composed:!0}))}))}},{key:"undo",value:function(){return this.undoStack.undo()}},{key:"redo",value:function(){return this.undoStack.redo()}},{key:"commands",value:function(){return this.undoStack.commands}}],[{key:"properties",get:function(){return s(s({},l(c(t),"properties",this)),{},{canUndo:{type:Boolean,attribute:"can-undo"},canRedo:{type:Boolean,attribute:"can-redo"},undoStackObserverProps:{type:Object},target:{type:Object},stack:{type:Object}})}}])}(e)},Be=function(e){function t(){return d(this,t),u(this,t,arguments)}return o(t,e),i(t,[{key:"render",value:function(){return a(Ce||(Ce=r(["<slot></slot>"])))}}],[{key:"tag",get:function(){return"undo-manager"}}])}(Le(h));customElements.define("undo-manager",Be);var Me,ze,Pe=function(){return i((function e(){d(this,e),this.commands=[],this.undoStackPosition=-1,this.undoStackLimit=20}),[{key:"execute",value:function(e){this._clearRedo(),e.execute(),this.undoStackLimit==this.commands.length?this.commands.splice(Math.round(this.commands.length/3),1):this.undoStackPosition++,this.commands.push(e),this.changed()}},{key:"undo",value:function(){this.commands[this.undoStackPosition]&&(this.commands[this.undoStackPosition].undo(),this.undoStackPosition--,this.changed())}},{key:"canUndo",value:function(){return this.undoStackPosition>=0}},{key:"redo",value:function(){this.commands[this.undoStackPosition+1]&&(this.undoStackPosition++,this.commands[this.undoStackPosition].redo(),this.changed())}},{key:"canRedo",value:function(){return this.undoStackPosition<this.commands.length-1}},{key:"_clearRedo",value:function(){this.commands=this.commands.slice(0,this.undoStackPosition+1)}},{key:"changed",value:function(){}}])}(),Oe=function(){return i((function e(t,n,o){d(this,e),this.el=t,this.oldValue=n,this.newValue=o}),[{key:"execute",value:function(){}},{key:"undo",value:function(){this.el.undoStackIgnore=!0,this.el.undoStack.commands&&this.el.undoStack.commands[this.el.undoStack.undoStackPosition-1]?this.el.innerHTML=this.el.undoStack.commands[this.el.undoStack.undoStackPosition-1].newValue:this.el.undoStack.commands&&0===this.el.undoStack.undoStackPosition?this.el.innerHTML=this.el.undoStackInitialValue:this.el.innerHTML=this.oldValue}},{key:"redo",value:function(){this.el.undoStackIgnore=!0,this.el.innerHTML=this.newValue}}])}(),He=function(e){function t(){var e;return d(this,t),(e=u(this,t)).tag=t.tag,e.toggles=!0,e.command="insertHTML",e}return o(t,e),i(t,[{key:"targetedNode",get:function(){var e=this.__highlight.querySelectorAll(this.tagsList);return 1===e.length?e[0]:this.__highlight}},{key:"firstUpdated",value:function(e){this.updateElement(),l(c(t.prototype),"firstUpdated",this)&&l(c(t.prototype),"firstUpdated",this).call(this,e)}},{key:"updated",value:function(e){var n=this;l(c(t.prototype),"updated",this).call(this,e),e.forEach((function(e,t){"element"===t&&n.element&&n.updateElement()}))}},{key:"updateElement",value:function(){this.dispatchEvent(new CustomEvent("deregister-button",{bubbles:!0,cancelable:!0,composed:!0,detail:this}));var e=this.element||{},t=e.settings||{},n=e.gizmo||{};this.fields=m((t.inline||t.configure||[]).map((function(e){return""===e.slot&&(e.property="innerHTML"),e}))),this.tagsList=n.tag||"span",this.icon=n.icon||"add",this.label=n.title||n.tag,this.value=this.getValue(void 0),this.dispatchEvent(new CustomEvent("register-button",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}},{key:"getValue",value:function(){var e=this,n=l(c(t.prototype),"getValue",this).call(this);return this.fields.forEach((function(t){t.property&&"innerHTML"!==t.property&&(n[t.property]=e.targetedNode&&e.targetedNode.getAttribute?e.targetedNode.getAttribute(t.property):void 0),t.slot&&""!==t.slot&&e.targetedNode&&e.targetedNode.querySelector&&e.targetedNode.querySelector("[slot=".concat(t.slot,"]"))&&e.targetedNode.querySelector("[slot=".concat(t.slot,"]")).innerHTML,t.slot&&""===t.slot&&e.targetedNode&&m(e.targetedNode.children||[]).filter(":not([slot])")&&m(e.targetedNode.children||[]).filter(":not([slot])").length>0&&"".concat(m(e.targetedNode.children||[]).filter(":not([slot])").join("\n"))})),n}},{key:"setToggled",value:function(){this.toggled=!!this.value}},{key:"tagClickCallback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.detail&&this.open(e.detail);var t=this.__highlight.innerHTML;this.__highlight.innerHTML="",this.__highlight.innerHTML=t}},{key:"updateSelection",value:function(){var e=this,t=globalThis.document.createElement(this.tagsList),n="";this.fields.forEach((function(o){o.property&&"innerHTML"!==o.property&&"innerText"!==o.property&&(t[o.property]=e.value[o.property]),o.slot&&e.value[o.slot]&&(n+="<".concat(e.getSlotWrapper(o)).concat(Object.keys(o.slotAttributes||{}).map((function(e){return" ".concat(e,'="').concat(o.slotAttributes[e],'"')})),">\n            ").concat(e.value[slot],"\n          </").concat(e.getSlotWrapper(o),">"))})),n+=this.value.innerHTML||"",this.__highlight.innerHTML="",this.__highlight.parentNode.insertBefore(t,this.__highlight),this.__highlight.unwrap(),t.innerHTML=n}},{key:"getSlotWrapper",value:function(e){var t=e.slotWrapper,n=e.allowedSlotWrappers,o=e.excludedSlotWrappers||[],i=["span","div","p"].filter((function(e){return!o.includes(e)}));return t||(n&&n[0]?n[0]:i)}}],[{key:"tag",get:function(){return"hax-text-editor-button"}},{key:"properties",get:function(){return s(s({},l(c(t),"properties",this)),{},{element:{type:Object}})}}])}(v(h));customElements.define(He.tag,He);var Re,De,Fe=function(e){return function(e){function t(){var e;return d(this,t),(e=u(this,t)).viewSource=!1,b((function(){e.hasSelectedText=y(ye.haxSelectedText).length>0})),b((function(){y(ye.editMode);var t=y(ye.activeNode);if(e.sourceView=!1,t&&t.tagName){var n=ye.haxSchemaFromTag(t.tagName);e.parentSchema=t&&t.parentNode?ye.haxSchemaFromTag(t.parentNode.tagName):void 0,e.sourceView=n.canEditSource}})),e}return o(t,e),i(t,[{key:"render",value:function(){return a(Me||(Me=r(["<slot></slot> "])))}},{key:"slotSchema",get:function(){var e={};if(this.activeNode&&this.parentSchema){var t=this.activeNode.slot||"";this.activeNode&&this.activeNode.parentNode||(e=ye.schemaBySlotId(this.activeNode.parentNode,t))}return e}},{key:"layoutElement",get:function(){return this.activeNode&&ye.isLayoutElement(this.activeNode)?this.activeNode:this.activeNode&&this.activeNode.parentNode&&ye.isLayoutElement(this.activeNode.parentNode)?this.activeNode.parentNode:void 0}},{key:"layoutParent",get:function(){return this.layoutElement&&this.layoutElement.parentNode&&ye.isLayoutElement(this.layoutElement.parentNode)&&this.layoutElement.parentNode.tagName&&"HAX-BODY"!==this.layoutElement.parentNode.tagName?this.layoutElement.parentNode:void 0}},{key:"slottedItems",get:function(){if(!this.activeNode)return[];var e=ye.slottedContentByNode(this.layoutElement)||{};return Object.keys(e).map((function(t){return e[t]}))}},{key:"elementIcon",value:function(e){var t=e&&this.elementGizmo(e)?this.elementGizmo(e):void 0;return t?t.icon:void 0}},{key:"elementLabel",value:function(e){var t=e&&this.elementGizmo(e)?this.elementGizmo(e):void 0;return t?t.title||t.tag:e&&e.tagName?e.tagName.toLowerCase():""}},{key:"elementGizmo",value:function(e){var t=e&&e.tagName?ye.haxSchemaFromTag(e.tagName):void 0;return t&&t.gizmo?t.gizmo:void 0}},{key:"getFilteredBlocks",value:function(){var e=this;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){if(t.tag){var n=t.tag||"",o=e.slotSchema&&e.slotSchema.slotWrapper&&e.slotSchema.slotWrapper?e.slotSchema.slotWrapper:void 0,i=e.slotSchema&&e.slotSchema.slotWrapper&&e.slotSchema.allowedSlotWrappers?e.slotSchema.allowedSlotWrappers:void 0,a=e.slotSchema&&e.slotSchema.slotWrapper&&e.slotSchema.excludedSlotWrappers?e.slotSchema.excludedSlotWrappers:void 0,r=!e.slotSchema||!i,s=!!o&&o===n||!!i&&i.includes(n);return!(!!a&&a.includes(n))&&(r||s)}}))}},{key:"updated",value:function(e){var n=this;l(c(t.prototype),"updated",this)&&l(c(t.prototype),"updated",this).call(this,e),e.forEach((function(e,t){"activeNode"===t&&n.activeNode!==e&&n.setTarget(n.activeNode)}))}},{key:"setTarget",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.activeNode;l(c(t.prototype),"setTarget",this)&&l(c(t.prototype),"setTarget",this).call(this,e),this.parentSchema=e&&e.parentNode?ye.haxSchemaFromTag(e.parentNode.tagName):void 0}}],[{key:"styles",get:function(){return[g(ze||(ze=r(["\n          :host {\n            display: block;\n            --hax-ui-spacing-sm: 1px;\n            max-width: 100%;\n          }\n          :host [hidden] {\n            display: none;\n          }\n          .selected-buttons {\n            transition: 0.1s all ease-in-out;\n            width: 0;\n          }\n          :host([has-selected-text]) .selected-buttons {\n            width: 100%;\n          }\n          :host(.hax-context-pin-top) #toolbar {\n            position: fixed;\n            top: 0px;\n          }\n          :host(:hover),\n          :host(:focus-within) {\n            z-index: var(--hax-ui-focus-z-index) !important;\n          }\n          .group {\n            padding: 0;\n            background-color: var(--hax-ui-background-color);\n          }\n          hax-toolbar {\n            flex: 0 1 auto;\n          }\n          hax-toolbar::part(morebutton) {\n            border: 1px solid\n              var(\n                --simple-toolbar-group-border-width,\n                var(--simple-toolbar-border-width, 1px)\n              ) !important;\n          }\n          hax-toolbar[collapse-disabled]::part(morebutton) {\n            display: none !important;\n          }\n          hax-toolbar *[hidden] {\n            display: none !important;\n          }\n          hax-toolbar[collapse-disabled]::part(morebutton) {\n            display: none !important;\n          }\n        "])))]}},{key:"tag",get:function(){return"hax-context-behaviors"}},{key:"properties",get:function(){return s(s({},l(c(t),"properties",this)),{},{activeNode:{type:Object},parentSchema:{type:Object},realSelectedValue:{type:String},sourceView:{type:Boolean},viewSource:{type:Boolean}})}}])}(f(e))},Ie=function(e){function t(){var e;return d(this,t),(e=u(this,t)).command="paste",e.icon="content-paste",e.label="Paste Clipboard",e}return o(t,e),i(t,[{key:"render",value:function(){return l(c(t.prototype),"render",this).call(this)}},{key:"sendCommand",value:function(e){navigator&&navigator.clipboard&&ye._onPaste(s(s({},e),{},{clipboardData:navigator.clipboard}))}}],[{key:"tag",get:function(){return"hax-text-editor-paste-button"}},{key:"properties",get:function(){return s({},l(c(t),"properties",this))}}])}(x(h));customElements.define(Ie.tag,Ie);var Ue,qe,Ge,je,Ve=function(e){function t(){var e;return d(this,t),(e=u(this,t)).tag=t.tag,e.t={undoButton:"Undo",redoButton:"Redo",formatButton:"Format",blockP:"Paragraph",blockH1:"Heading 1",blockH2:"Heading 2",blockH3:"Heading 3",blockH4:"Heading 4",blockH5:"Heading 5",blockH6:"Heading 6",blockPre:"Preformatted",italicButton:"Italic",boldButton:"Bold",underlineButton:"Underline",strikethroughButton:"Cross out",codeButton:"Code",markButton:"Highlight",abbrButton:"Abbreviation",removeFormatButton:"Remove format",linkButton:"Link",unlinkButton:"Remove Link",cutButton:"Cut",copyButton:"Copy",pasteButton:"Paste Clipboard",subscriptButton:"Subscript",superscriptButton:"Superscript",symbolButton:"Insert Symbol",emojiButton:"Insert Emoticon",imageButton:"Insert Image",orderedListButton:"Numbered list",unorderedListButton:"Bulleted list",blockquoteButton:"Blockquote",indentButton:"Indent",outdentButton:"Outdent",textEditorToolbarTour:"Change how the text is structured and visualized in the page."},e.registerLocalization({context:e,namespace:"hax"}),e.sourceView=!1,e.haxUIElement=!0,e.tourName="hax",globalThis.HaxTextEditorToolbarConfig=globalThis.HaxTextEditorToolbarConfig||{},globalThis.HaxTextEditorToolbarConfig.inlineGizmos=globalThis.HaxTextEditorToolbarConfig.inlineGizmos||{},globalThis.HaxTextEditorToolbarConfig.default=window.HaxTextEditorToolbarConfig.default||m(e.defaultConfig),e.config=globalThis.HaxTextEditorToolbarConfig.default,e.sticky=!1,e.__updated=!1,e.setTarget(void 0),globalThis.addEventListener("hax-store-ready",e._handleHaxStoreReady.bind(e)),globalThis.addEventListener("hax-register-properties",e._handleElementRegister.bind(e)),e}return o(t,e),i(t,[{key:"tourTemplate",get:function(){return a(Re||(Re=r([' <div slot="tour" data-stop-content>\n      ',"\n    </div>"])),this.t.textEditorToolbarTour)}},{key:"render",value:function(){return l(c(t.prototype),"toolbarTemplate",this)}},{key:"undoButton",get:function(){return s(s({},l(c(t.prototype),"undoButton",this)),{},{label:this.t.undoButton})}},{key:"redoButton",get:function(){return s(s({},l(c(t.prototype),"redoButton",this)),{},{label:this.t.redoButton})}},{key:"formatButton",get:function(){return s(s({},l(c(t.prototype),"formatButton",this)),{},{label:this.t.formatButton,blocks:this.formatBlocks})}},{key:"formatBlocks",get:function(){return[{label:this.t.blockP,tag:"p"},{label:this.t.blockquoteButton,tag:"blockquote"},{label:this.t.blockH2,tag:"h2"},{label:this.t.blockH3,tag:"h3"},{label:this.t.blockH4,tag:"h4"},{label:this.t.blockH5,tag:"h5"},{label:this.t.blockH6,tag:"h6"},{label:this.t.blockPre,tag:"pre"}]}},{key:"boldButton",get:function(){return s(s({},l(c(t.prototype),"boldButton",this)),{},{label:this.t.boldButton})}},{key:"italicButton",get:function(){return s(s({},l(c(t.prototype),"italicButton",this)),{},{label:this.t.italicButton})}},{key:"underlineButton",get:function(){return s(s({},l(c(t.prototype),"underlineButton",this)),{},{label:this.t.underlineButton})}},{key:"strikethroughButton",get:function(){return s(s({},l(c(t.prototype),"strikethroughButton",this)),{},{label:this.t.strikethroughButton})}},{key:"codeButton",get:function(){return s(s({},l(c(t.prototype),"codeButton",this)),{},{icon:"hax:html-code",label:this.t.codeButton})}},{key:"markButton",get:function(){return s(s({},l(c(t.prototype),"markButton",this)),{},{icon:"editor:highlight",label:this.t.markButton})}},{key:"abbrButton",get:function(){return s(s({},l(c(t.prototype),"abbrButton",this)),{},{icon:"hax:abbr",label:this.t.abbrButton})}},{key:"removeFormatButton",get:function(){return s(s({},l(c(t.prototype),"removeFormatButton",this)),{},{label:this.t.removeFormatButton})}},{key:"advancedInlineButtonGroup",get:function(){return{type:"button-group",subtype:"advanced-inline-button-group",buttons:[this.strikethroughButton,this.markButton,this.abbrButton,this.codeButton,this.underlineButton]}}},{key:"linkButton",get:function(){return s(s({},l(c(t.prototype),"linkButton",this)),{},{label:this.t.linkButton,allowTarget:!0})}},{key:"unlinkButton",get:function(){return s(s({},l(c(t.prototype),"unlinkButton",this)),{},{label:this.t.unlinkButton})}},{key:"cutButton",get:function(){return s(s({},l(c(t.prototype),"cutButton",this)),{},{label:this.t.cutButton})}},{key:"copyButton",get:function(){return s(s({},l(c(t.prototype),"copyButton",this)),{},{label:this.t.copyButton})}},{key:"pasteButton",get:function(){return s(s({},l(c(t.prototype),"pasteButton",this)),{},{label:this.t.pasteButton,shortcutKeys:void 0,type:"hax-text-editor-paste-button"})}},{key:"subscriptButton",get:function(){return s(s({},l(c(t.prototype),"subscriptButton",this)),{},{label:this.t.subscriptButton})}},{key:"superscriptButton",get:function(){return s(s({},l(c(t.prototype),"superscriptButton",this)),{},{label:this.t.superscriptButton})}},{key:"symbolButton",get:function(){return s(s({},l(c(t.prototype),"symbolButton",this)),{},{label:this.t.symbolButton})}},{key:"emojiButton",get:function(){return s(s({},l(c(t.prototype),"emojiButton",this)),{},{label:this.t.emojiButton})}},{key:"imageButton",get:function(){return s(s({},l(c(t.prototype),"imageButton",this)),{},{label:this.t.imageButton})}},{key:"orderedListButton",get:function(){return s(s({},l(c(t.prototype),"orderedListButton",this)),{},{label:this.t.orderedListButton})}},{key:"unorderedListButton",get:function(){return s(s({},l(c(t.prototype),"unorderedListButton",this)),{},{label:this.t.unorderedListButton})}},{key:"blockquoteButton",get:function(){return{}}},{key:"indentButton",get:function(){return s(s({},l(c(t.prototype),"indentButton",this)),{},{label:this.t.indentButton})}},{key:"outdentButton",get:function(){return s(s({},l(c(t.prototype),"outdentButton",this)),{},{label:this.t.outdentButton})}},{key:"sourceButton",get:function(){return s({},l(c(t.prototype),"sourceButton",this))}},{key:"haxSymbolInsertButtonGroup",get:function(){return{type:"button-group",subtype:"hax-symbol-insert-button-group",buttons:[this.symbolButton,this.emojiButton]}}},{key:"iconButton",get:function(){return{}}},{key:"defaultConfig",get:function(){return[this.basicInlineButtonGroup,this.linkButtonGroup,this.listIndentButtonGroup,this.scriptButtonGroup,this.haxSymbolInsertButtonGroup,this.advancedInlineButtonGroup]}},{key:"filteredBlocks",get:function(){return this.getFilteredBlocks(this.formatBlocks)}},{key:"formatButtonElement",get:function(){return this.formatButton.type?this.querySelector(this.formatButton.type):void 0}},{key:"isRangeInScope",get:function(){return this.range&&this.target&&this.rangeNodeOrParentNode(this.range)&&(this.range.commonAncestorContainer===this.target||this.target.contains(this.range.commonAncestorContainer))}},{key:"targetHandlers",value:function(e){var n=l(c(t.prototype),"targetHandlers",this).call(this,e);return delete n.paste,n}},{key:"updated",value:function(e){var n=this;l(c(t.prototype),"updated",this)&&l(c(t.prototype),"updated",this).call(this,e),this.__ready&&e.forEach((function(e,t){"parentSchema"!==t&&"target"!==t||n.updateBlocks(),"activeNode"===t&&n.activeNode!==e&&n.setTarget(n.activeNode),"t"===t&&n.t!==e&&n.updateToolbarElements()}))}},{key:"firstUpdated",value:function(e){l(c(t.prototype),"firstUpdated",this)&&l(c(t.prototype),"firstUpdated",this).call(this,e),this.config=this.updateToolbarElements(),this.__prompt.haxUIElement=!0,this.__prompt.classList.add("ignore-activation"),this.addEventListener("keypress",this.trapKeys.bind(this)),this.__prompt.addEventListener("keypress",this.trapKeys.bind(this)),this.__prompt.addEventListener("paste",this._handlePaste.bind(this))}},{key:"_handlePaste",value:function(e){e.stopPropagation()}},{key:"trapKeys",value:function(e){e.stopPropagation()}},{key:"updateBlocks",value:function(){var e=this.filteredBlocks;this.formatButtonElement&&this.formatButtonElement.blocks!==e&&(this.formatButtonElement.blocks=e,e.length<2?this.formatButtonElement.setAttribute("disabled","disabled"):this.formatButtonElement.removeAttribute("disabled"))}},{key:"getRange",value:function(){var e=ye.getRange();return!e||e.rangeCount<1?void 0:ye.getRange()}},{key:"getSelection",value:function(){return ye.getSelection()}},{key:"positionByTarget",value:function(e){}},{key:"_handleElementRegister",value:function(e){var t=e.detail||{},n=t.tag||{},o=t.properties||{};this._setInlineElement(n,o)}},{key:"_handleHaxStoreReady",value:function(e){var t=this;this.__ready=!0;var n=ye.elementList||{};Object.keys(n).forEach((function(e){return t._setInlineElement(e,elemets[e])}))}},{key:"_setInlineElement",value:(n=w(E().mark((function e(t,n){var o,i,a,r,l,c,d,u,h,p=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n&&!globalThis.HaxTextEditorToolbarConfig.inlineGizmos[t]&&!(t.indexOf("-")<0)){e.next=2;break}return e.abrupt("return");case 2:o=s({},n),i=n.gizmo||{},a=t.replace(/-./g,(function(e){return e.toUpperCase()[1]})),r=t.split("-").length>1,l=i.meta||{},c=l.inlineOnly,d=i.handles||[],u=d.filter((function(e){return"inline"===e.type})).length>1,h=r&&(c||u),o.gizmo.title||(o.gizmo.title=a),h&&(globalThis.HaxTextEditorToolbarConfig.inlineGizmos[t]={element:o,type:"hax-text-editor-button"},this.__updated=!1,setTimeout((function(e){return p.config=p.updateToolbarElements()}),500));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"updateToolbarElements",value:function(){if(!this.__updated){this.__updated=!0;var e=Object.keys(globalThis.HaxTextEditorToolbarConfig.inlineGizmos||{}).map((function(e){return globalThis.HaxTextEditorToolbarConfig.inlineGizmos[e]}));return 0===e.length?m(this.defaultConfig||[]):[].concat(m(this.defaultConfig||[]),[{type:"button-group",subtype:"hax-insert-button-group",buttons:e}])}}}],[{key:"styles",get:function(){return[].concat(m(l(c(t),"baseStyles",this)),m(l(c(t),"stickyStyles",this)),[g(De||(De=r(["\n        :host {\n          --rich-text-editor-button-color: var(--hax-ui-color);\n          --rich-text-editor-button-bg: var(--hax-ui-background-color);\n          --rich-text-editor-button-border-color: transparent;\n          --rich-text-editor-button-hover-color: var(--hax-ui-color);\n          --rich-text-editor-button-hover-bg: var(\n            --hax-ui-background-color-secondary\n          );\n          --rich-text-editor-button-toggled-color: var(--hax-ui-color-accent);\n          --rich-text-editor-button-toggled-bg: var(--hax-ui-background-color);\n          --rich-text-editor-button-toggled-border-color: var(\n            --hax-ui-color-accent\n          );\n          --rich-text-editor-button-disabled-opacity: 1;\n          --rich-text-editor-button-disabled-color: var(\n            --hax-ui-disabled-color\n          );\n          --rich-text-editor-button-disabled-bg: var(--hax-ui-background-color);\n          --rich-text-editor-button-disabled-border-color: transparent;\n        }\n        #morebutton {\n          align-self: flex-end;\n        }\n        ::slotted([icon-position]:hover) {\n          --rich-text-editor-button-toggled-bg: var(\n            --hax-ui-background-color-accent\n          );\n        }\n        ::slotted(.group) {\n          flex: 0 0 auto;\n          justify-content: center;\n          border-width: 1px;\n          margin: -1px;\n          padding: 0px;\n          --simple-toolbar-button-width: 26px;\n          --simple-toolbar-button-height: 26px;\n        }\n        ::slotted(.list-indent-button-group) {\n          line-height: 20px;\n        }\n        ::slotted(.group),\n        ::slotted([icon-position]) {\n          z-index: 1;\n        }\n        ::slotted([icon-position]),\n        :host([collapsed]) ::slotted(.group) {\n          flex: 0 0 auto;\n        }\n        :host ::slotted(*:focus),\n        :host ::slotted(*:focus-within) {\n          z-index: 2 !important;\n        }\n        :host ::slotted(*:hover) {\n          z-index: 3 !important;\n        }\n        div {\n          --simple-toolbar-button-width: 26px;\n          --simple-toolbar-button-height: 26px;\n          line-height: 30px;\n          height: 30px;\n        }\n        rich-text-editor-button {\n          height: 32px;\n          --simple-toolbar-button-width: 26px;\n          --simple-toolbar-button-height: 26px;\n          line-height: 32px;\n        }\n      "])))])}},{key:"properties",get:function(){return{__updated:{type:Boolean}}}},{key:"tag",get:function(){return"hax-text-editor-toolbar"}}]);var n}(A(k(Fe(h))));customElements.define("hax-text-editor-toolbar",Ve);var We=function(e){return function(e){function t(){var e;return d(this,t),(e=u(this,t)).danger=!1,e.feature=!1,e.menu=!1,e}return o(t,e),i(t,[{key:"buttonTemplate",get:function(){return this.radio?a(Ue||(Ue=r([' <button\n              id="button"\n              aria-checked="','"\n              class="simple-toolbar-button"\n              ?disabled="','"\n              ?controls="','"\n              @click="','"\n              @keydown="','"\n              @mousedown="','"\n              role="radio"\n              part="button"\n              tabindex="','"\n            >\n              ',"\n            </button>\n            ",""])),this.isToggled?"true":"false",this.disabled,this.controls,this._handleClick,this._handleKeys,this._handleMousedown,this.isCurrentItem?1:-1,this.buttonInnerTemplate,this.tooltipTemplate):this.toggles?a(qe||(qe=r([' <button\n                id="button"\n                aria-pressed="','"\n                class="simple-toolbar-button"\n                ?disabled="','"\n                ?controls="','"\n                @click="','"\n                @keydown="','"\n                @mousedown="','"\n                part="button"\n                tabindex="','"\n              >\n                ',"\n              </button>\n              ",""])),this.isToggled?"true":"false",this.disabled,this.controls,this._handleClick,this._handleKeys,this._handleMousedown,this.isCurrentItem?1:-1,this.buttonInnerTemplate,this.tooltipTemplate):a(Ge||(Ge=r([' <button\n                id="button"\n                class="simple-toolbar-button"\n                ?disabled="','"\n                ?controls="','"\n                @click="','"\n                @keydown="','"\n                @mousedown="','"\n                tabindex="0"\n                part="button"\n                tabindex="','"\n              >\n                ',"\n              </button>\n              ",""])),this.disabled,this.controls,this._handleClick,this._handleKeys,this._handleMousedown,this.isCurrentItem?1:-1,this.buttonInnerTemplate,this.tooltipTemplate)}},{key:"_handleClick",value:function(e){}},{key:"_handleKeys",value:function(e){}},{key:"_handleMousedown",value:function(e){}}],[{key:"tag",get:function(){return"hax-toolbar-item"}},{key:"properties",get:function(){return s(s({},l(c(t),"properties",this)),{},{danger:{type:Boolean,reflect:!0},eventName:{type:String,reflect:!0,attribute:"event-name"},feature:{type:Boolean,reflect:!0},toggledTooltip:{type:String},tooltip:{type:String}})}},{key:"simpleButtonThemeStyles",get:function(){return Ee}},{key:"simpleButtonCoreStyles",get:function(){return l(c(t),"simpleButtonCoreStyles",this)}},{key:"simpleButtonLayoutStyles",get:function(){return l(c(t),"simpleButtonLayoutStyles",this)}},{key:"styles",get:function(){return[l(c(t),"styles",this),g(je||(je=r(["\n          :host(:hover),\n          :host(:focus-within) {\n            z-index: var(--hax-ui-focus-z-index, 1001) !important;\n          }\n          :host {\n            font-family: var(--ddd-font-navigation);\n            --simple-toolbar-button-width: 26px;\n            --simple-toolbar-button-height: 26px;\n          }\n        "])))]}}])}(_(e))},Xe=function(e){function t(){return d(this,t),u(this,t,arguments)}return o(t,e),i(t)}(We(h));customElements.define(Xe.tag,Xe);var Ye,Qe=function(e){function t(){var e;return d(this,t),(e=u(this,t)).haxUIElement=!0,e.action=!1,e.more=!1,e.eventName="button",e.inputMethod=null,e.propertyToBind=null,e.slotToBind=null,e.value="",e}return o(t,e),i(t,[{key:"_handleMousedown",value:function(e){this.disabled||(ye._tmpSelection=ye.getSelection())}},{key:"_handleClick",value:function(e){this.disabled||this.dispatchEvent(new CustomEvent("hax-context-item-selected",{bubbles:!0,cancelable:!0,composed:!0,detail:{target:this,eventName:this.eventName,value:this.value}}))}}],[{key:"tag",get:function(){return"hax-context-item"}},{key:"properties",get:function(){return s(s({},l(c(t),"properties",this)),{},{more:{type:Boolean},action:{type:Boolean},label:{type:String,reflect:!0},inputMethod:{type:String,reflect:!0,attribute:"input-method"},propertyToBind:{type:String,reflect:!0,attribute:"property-to-bind"},slotToBind:{type:String,reflect:!0,attribute:"slot-to-bind"},description:{type:String,reflect:!0},default:{type:Boolean},value:{type:String}})}}])}(We(h));customElements.define(Qe.tag,Qe);var Ke,Je=function(e){function t(){var e;return d(this,t),(e=u(this,t))._blockEvent=!1,e}return o(t,e),i(t,null,[{key:"styles",get:function(){return m(l(c(t),"styles",this))}},{key:"simpleButtonThemeStyles",get:function(){return Ee}},{key:"simpleButtonCoreStyles",get:function(){return[].concat(m(l(c(t),"simpleButtonCoreStyles",this)),[g(Ye||(Ye=r(['\n        ::slotted([slot="menuitem"]) {\n          --simple-toolbar-button-justify: flex-start;\n          --simple-toolbar-button-label-white-space: nowrap;\n        }\n      '])))])}},{key:"tag",get:function(){return"hax-toolbar-menu"}},{key:"properties",get:function(){return s(s({},l(c(t),"properties",this)),{},{_blockEvent:{type:Boolean},eventName:{type:String,attribute:"event-name"}})}}])}(S(h));customElements.define(Je.tag,Je);var Ze,$e,et,tt,nt,ot,it=function(e){function t(){return d(this,t),u(this,t,arguments)}return o(t,e),i(t)}(function(e){function t(){var e;return d(this,t),(e=u(this,t)).selected=!1,e.inline=!1,e}return o(t,e),i(t,null,[{key:"styles",get:function(){return[l(c(t),"styles",this),g(Ke||(Ke=r(["\n          :host {\n            --hax-ui-border-radius: 0px;\n          }\n          .selected-buttons {\n            transition: 0.1s all ease-in-out;\n            width: 0;\n          }\n          :host([has-selected-text]) .selected-buttons {\n            width: 100%;\n          }\n          ::slotted(*) {\n            pointer-events: all;\n          }\n          ::slotted(.group) {\n            border: none;\n          }\n        "])))]}},{key:"tag",get:function(){return"hax-toolbar"}},{key:"properties",get:function(){return s(s({},l(c(t),"properties",this)),{},{selected:{type:Boolean,reflect:!0},inline:{type:Boolean,reflect:!0}})}}])}(N(h)));customElements.define(it.tag,it);var at,rt,st,lt=function(e){function t(){var e;return d(this,t),(e=u(this,t)).disableOps=!1,e.disableItemOps=!1,e.insertAbove=!0,e.disableDuplicate=!1,e.hasActiveEditingElement=!1,e.haxUIElement=!0,e.t={edit:"Edit",dragHandle:"Drag handle",moveUp:"Move up",moveDown:"Move down",addColumn:"Add column",removeColumn:"Remove column",remove:"Remove",duplicate:"Duplicate",confirmDelete:"Confirm delete",changeTo:"Change to",editElement:"Edit Mode",modifyHTMLSource:"Modify HTML source",clickToChange:"Click to change",regions:"Available regions",insertItemAbove:"Insert item above",insertItemAboveOrBelow:"Insert item above or below",insertItemBelow:"Insert item below",selectLayout:"Select Layout Element"},e.registerLocalization({context:e,namespace:"hax"}),e.ceButtons=[],e.activeTagName="",e.activeTagIcon="hax:paragraph",e.addEventListener("hax-context-item-selected",e.handleCECustomEvent.bind(e)),e}return o(t,e),i(t,[{key:"render",value:function(){var e=this;return a(Ze||(Ze=r(['\n      <hax-toolbar always-expanded>\n        <div class="group">\n          <hax-toolbar-menu\n            ?disabled="','"\n            id="drag"\n            action\n            icon="hax:arrow-all"\n            label="','"\n            draggable="true"\n            reset-on-select\n            data-simple-tour-stop\n            data-stop-title="label"\n            ?hidden="','"\n          >\n            <simple-toolbar-menu-item slot="menuitem">\n              <hax-context-item\n                action\n                align-horizontal="left"\n                ?disabled="','"\n                show-text-label\n                role="menuitem"\n                icon="hax:keyboard-arrow-up"\n                label="','"\n                event-name="hax-plate-up"\n              ></hax-context-item>\n            </simple-toolbar-menu-item>\n            <simple-toolbar-menu-item slot="menuitem">\n              <hax-context-item\n                action\n                align-horizontal="left"\n                ?disabled="','"\n                role="menuitem"\n                show-text-label\n                icon="hax:keyboard-arrow-down"\n                label="','"\n                event-name="hax-plate-down"\n              ></hax-context-item>\n            </simple-toolbar-menu-item>\n            ','\n            <div slot="tour" data-stop-content>\n              Click the drag handle once to show a menu to just move up or down\n              one item in the content OR click and drag to place the item\n              exactly where you want it to go.\n            </div>\n          </hax-toolbar-menu>\n          <hax-toolbar-menu\n            action\n            align-horizontal="left"\n            ?disabled="','"\n            icon="hax:select-element"\n            label="','"\n          >\n            <simple-toolbar-menu-item slot="menuitem">\n              <hax-context-item\n                action\n                align-horizontal="left"\n                ?hidden="','"\n                .icon="','"\n                label="','"\n                event-name="hax-select-grid"\n                .eventData="','"\n                role="menuitem"\n                show-text-label\n              >\n              </hax-context-item>\n              <hax-context-item\n                action\n                align-horizontal="left"\n                ?disabled="','"\n                ?hidden="','"\n                .icon="','"\n                label="','"\n                event-name="hax-select-grid"\n                .eventData="','"\n                role="menuitem"\n                show-text-label\n              >\n              </hax-context-item>\n            </simple-toolbar-menu-item>\n            ','\n            \n          </hax-toolbar-menu>\n          <slot name="primary"></slot>\n          <hax-toolbar-menu\n            icon="add-box"\n            label="','"\n            ?disabled="','"\n            @dblclick="','"\n          >\n            <simple-toolbar-menu-item slot="menuitem">\n              <hax-context-item\n                action\n                align-horizontal="left"\n                show-text-label\n                role="menuitem"\n                ?disabled="','"\n                icon="hardware:keyboard-arrow-up"\n                event-name="insert-above-active"\n                label="','"\n              ></hax-context-item>\n            </simple-toolbar-menu-item>\n            <simple-toolbar-menu-item slot="menuitem">\n              <hax-context-item\n                action\n                align-horizontal="left"\n                show-text-label\n                role="menuitem"\n                icon="hardware:keyboard-arrow-down"\n                event-name="insert-below-active"\n                label="','"\n                ?disabled="','"\n              ></hax-context-item>\n            </simple-toolbar-menu-item>\n            ','\n          </hax-toolbar-menu>\n          <hax-context-item\n            action\n            ?disabled="','"\n            label="','"\n            icon="icons:content-copy"\n            event-name="hax-plate-duplicate"\n            data-simple-tour-stop\n            data-stop-title="label"\n          >\n            <div slot="tour" data-stop-content>\n              Duplicate the active piece of content and place it below the\n              current item.\n            </div>\n          </hax-context-item>\n        </div>\n        <div class="group">\n\n        <hax-context-item\n          action\n          icon="delete"\n          ?disabled="','"\n          icon="delete"\n          label="','"\n          event-name="hax-plate-delete"\n          data-simple-tour-stop\n          data-stop-title="label"\n      >\n          <div slot="tour" data-stop-content>\n            Delete the current item. You can always use the undo arrow to\n            bring this back.\n          </div>\n        </hax-context-item>\n          <hax-context-item\n            action\n            id="right"\n            class="paddle"\n            icon="hax:table-column-remove"\n            label="','"\n            ?disabled="','"\n            event-name="hax-plate-create-right"\n            data-simple-tour-stop\n            data-stop-title="label"\n          >\n            <div slot="tour" data-stop-content>\n              Add a column to split the current column into two pieces. This can\n              be done up to six pieces columns. For differnet layouts see Grid\n              settings panel.\n            </div>\n          </hax-context-item>\n          <hax-context-item\n            action\n            class="paddle"\n            icon="hax:table-column-plus-after"\n            label="','"\n            ?disabled="','"\n            event-name="hax-plate-remove-right"\n            ?hidden="','"\n            id="rightremove"\n            data-simple-tour-stop\n            data-stop-title="label"\n          >\n            <div slot="tour" data-stop-content>\n              Remove a column from the split column layout. If at two columns\n              and removing it will remove the layout split and make it 100%\n              width.\n            </div>\n          </hax-context-item>\n          ','\n          <slot name="secondary"></slot>\n        </div>\n        </div>\n        <div class="group">\n          <hax-context-item\n            action\n            more\n            label="','..."\n            tooltip="',", ",'"\n            ?disabled="','"\n            event-name="hax-transform-node"\n          ></hax-context-item>\n            <hax-context-item\n              action\n              label="','"\n              ?disabled="','"\n              ?hidden="','"\n              event-name="hax-edit-element-toggle"\n              .eventData="','"\n              toggles\n              ?toggled="','"\n            ></hax-context-item>\n          <hax-context-item\n            action\n            icon="icons:code"\n            label="','"\n            ?disabled="','"\n            event-name="hax-source-view-toggle"\n            toggles\n            ?toggled="','"\n          ></hax-context-item>\n          <slot name="more"></slot>\n        </div>\n      </hax-toolbar>\n    '])),this.hasActiveEditingElement||!this.canMoveElement||this.viewSource,this.t.dragHandle,!this.canMoveElement,this.hasActiveEditingElement,this.t.moveUp,this.hasActiveEditingElement,this.t.moveDown,this.activeNode&&this.activeNode.parentNode&&ye.isLayoutElement(this.activeNode.parentNode)?(this.slottedItems||[]).map((function(t,n){return a($e||($e=r(['\n                      <simple-toolbar-menu-item\n                        slot="menuitem"\n                        class="move-to-slot ','"\n                      >\n                        <hax-context-item\n                          action\n                          align-horizontal="left"\n                          ?disabled="','"\n                          label="','"\n                          event-name="move-to-slot"\n                          data-slot="','"\n                          role="menuitem"\n                          show-text-label\n                        >\n                        </hax-context-item>\n                      </simple-toolbar-menu-item>\n                    '])),n<1?"first-slot":"",e.viewSource,t.label,t.slot)})):"",this.viewSource||this.disableOps||(!this.layoutParent||this.activeNode!==this.layoutElement)&&!this.layoutElement,this.t.selectLayout,!this.layoutParent||this.activeNode!==this.layoutElement,this.elementIcon(this.layoutParent),this.elementLabel(this.layoutParent),this.layoutParent,this.activeNode===this.layoutElement,!this.layoutElement,this.elementIcon(this.layoutElement),this.elementLabel(this.layoutElement),this.layoutElement,(this.slottedItems||[]).map((function(t,n){return(t.items||[]).map((function(o,i){return a(et||(et=r(['\n                  <simple-toolbar-menu-item\n                    slot="menuitem"\n                    class="hax-select-grid-item ','"\n                  >\n                    <hax-context-item\n                      action\n                      align-horizontal="left"\n                      ?disabled="','"\n                      label="',"",'"\n                      event-name="hax-select-grid-item"\n                      .eventData="','"\n                      role="menuitem"\n                      show-text-label\n                    >\n                    </hax-context-item>\n                  </simple-toolbar-menu-item>\n                '])),n<1&&i<1?"first-slot":"",e.viewSource||e.activeNode===o,t.title||t.id,t.items.length>1?" (".concat(i+1,")"):"",{target:o,grid:t.grid,slot:t.slot,index:i,editMode:t.editMode})}))})),this.t.insertItemAboveOrBelow,this.viewSource,this.__dblClickFireInsert,!this.insertAbove,this.t.insertItemAbove,this.t.insertItemBelow,this.viewSource,ye.isLayoutElement(this.activeNode)?(this.slottedItems||[]).map((function(t,n){return a(tt||(tt=r(['\n                      <simple-toolbar-menu-item\n                        slot="menuitem"\n                        class="insert-into-active ','"\n                      >\n                        <hax-context-item\n                          action\n                          align-horizontal="left"\n                          ?disabled="','"\n                          label="','"\n                          event-name="insert-into-active"\n                          data-slot="','"\n                          role="menuitem"\n                          show-text-label\n                        >\n                        </hax-context-item>\n                      </simple-toolbar-menu-item>\n                    '])),n<1?"first-slot":"",e.viewSource,t.label,t.slot)})):"",this.hasActiveEditingElement||this.viewSource||this.disableOps||this.disableDuplicate,this.t.duplicate,this.hasActiveEditingElement||this.viewSource||this.disableOps,this.t.remove,this.t.addColumn,this.hasActiveEditingElement||this.viewSource||this.disableOps,this.t.removeColumn,this.hasActiveEditingElement||this.viewSource||this.disableOps,!this.activeNode,this.ceButtons.map((function(t){return a(nt||(nt=r([' <hax-context-item\n              action\n              icon="','"\n              label="','"\n              event-name="hax-ce-custom-button"\n              value="','"\n              ?disabled="','"\n            ></hax-context-item>'])),t.icon,t.label,t.callback,t.disabled||e.disableItemOps)})),this.t.changeTo,this.activeTagName,this.t.clickToChange,this.disableTransform||this.viewSource||this.disableOps,this.t.editElement,this.viewSource||this.disableOps,!this.editElementProperty,{target:this.activeNode,editMode:this.editElementProperty},this.editElementToggled,this.t.modifyHTMLSource,!this.sourceView||this.disableOps||this.editElementToggled,this.viewSource)}},{key:"disableTransform",get:function(){return ye.isTextElement(this.activeNode)}},{key:"filteredBlocks",get:function(){return this.getFilteredBlocks(this.formatBlocks)}},{key:"__updatePlatePosition",value:function(e){var t=this.shadowRoot.querySelector("#right"),n=this.shadowRoot.querySelector("#rightremove");t.disabled=!1,n.disabled=!1,e&&"GRID-PLATE"==e.tagName?"1-1-1-1"==e.layout&&(t.disabled=!0):n.disabled=!0}},{key:"__dblClickFireInsert",value:function(e){this.dispatchEvent(new CustomEvent("hax-context-item-selected",{bubbles:!0,cancelable:!0,composed:!0,detail:{target:e.target,eventName:"insert-below-active"}}))}},{key:"_handleOpen",value:function(e){this.dispatchEvent(new CustomEvent("hax-transform-node",{bubbles:!0,cancelable:!0,composed:!0,detail:ye.elementList[el]}))}},{key:"handleCECustomEvent",value:function(e){var t=e.detail;if("hax-ce-custom-button"===t.eventName)this.activeNode&&"function"==typeof this.activeNode[t.value]&&this.activeNode[t.value](e)&&ye.refreshActiveNodeForm()}},{key:"updated",value:function(e){var n=this;l(c(t.prototype),"updated",this)&&l(c(t.prototype),"updated",this).call(this,e),e.forEach((function(e,t){"onScreen"===t&&n.onScreen&&n._resetCEMenu(),"activeNode"!==t&&"activeEditingElement"!==t||(n.activeSchema=ye.activeSchema(),n.editElementProperty=!(!n.activeSchema||!n.activeSchema.editElement)&&n.activeSchema.editElement,n.editElementToggled=n.activeNode&&n.editElementProperty&&!!n.activeNode[n.editElementProperty])}))}},{key:"firstUpdated",value:function(e){var n=this;l(c(t.prototype),"firstUpdated",this).call(this,e),b((function(){n.activeNode=y(ye.activeNode),n.activeNode&&n.activeNode.classList&&n._resetCEMenu(),n.activeNode&&y(ye.editMode)&&setTimeout((function(){n.__updatePlatePosition(n.activeNode)}),0)})),b((function(){y(ye.activeEditingElement)?n.hasActiveEditingElement=!0:n.hasActiveEditingElement=!1})),this.shadowRoot.querySelector("#drag").addEventListener("dragstart",this._dragStart),this.shadowRoot.querySelector("#drag").addEventListener("dragend",this._dragEnd)}},{key:"_dragEnd",value:function(e){var t=T(e)?T(e)[0]:void 0;t&&t.close(!0),ye._lockContextPosition=!1}},{key:"_dragStart",value:function(e){var t=y(ye.activeNode),n=T(e)?T(e)[0]:void 0;n&&n.close(!0),ye.__dragTarget=t,ye._lockContextPosition=!0,ye.activeHaxBody.__activeHover=null,ye.activeHaxBody._hideContextMenu(ye.activeHaxBody.contextMenus.add),e.dataTransfer&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move",e.dataTransfer.setDragImage(t,-20,-20)),e.stopPropagation(),e.stopImmediatePropagation()}},{key:"_resetCEMenu",value:(n=w(E().mark((function e(){var t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.shadowRoot&&C(this,"*"),this.ceButtons=[],ye.activeHaxBody&&null!=this.activeNode?(t=ye.haxSchemaFromTag(this.activeNode.tagName),this.sourceView=t.canEditSource,ye.activeGizmo&&(this.activeTagName=ye.activeGizmo.title,this.activeTagIcon=ye.activeGizmo.icon)):ye.activeGizmo?(this.activeTagName=ye.activeGizmo.title,this.activeTagIcon=ye.activeGizmo.icon):(this.activeTagName="",this.activeTagIcon=""),e.next=5,ye.runHook(this.activeNode,"inlineContextMenu",[this]);case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})}],[{key:"tag",get:function(){return"hax-plate-context"}},{key:"styles",get:function(){return[l(c(t),"styles",this),g(ot||(ot=r(["\n        :host {\n          width: calc(100% - 2px);\n          min-width: 375px;\n          align-items: stretch;\n        }\n        hax-toolbar::part(morebutton) {\n          --simple-toolbar-button-color: var(--hax-ui-color);\n          --simple-toolbar-button-bg: var(--hax-ui-background-color);\n          --simple-toolbar-button-border-color: var(--hax-ui-border-color);\n          --simple-toolbar-button-border-width: 1px;\n          --simple-toolbar-button-hover-color: var(--hax-ui-color);\n          --simple-toolbar-button-hover-bg: var(\n            --hax-ui-background-color-secondary\n          );\n          --simple-toolbar-button-toggled-color: var(--hax-ui-color-accent);\n          --simple-toolbar-button-toggled-bg: var(--hax-ui-background-color);\n          --simple-toolbar-button-toggled-border-color: var(\n            --hax-ui-color-accent\n          );\n          --simple-toolbar-button-disabled-opacity: 1;\n          --simple-toolbar-button-disabled-color: var(--hax-ui-disabled-color);\n          --simple-toolbar-button-disabled-bg: var(--hax-ui-background-color);\n          --simple-toolbar-button-disabled-border-color: unset;\n          --simple-toolbar-border-radius: 0;\n          align-self: flex-end;\n          justify-self: stretch;\n          margin: 0px -2px 0px 2px;\n        }\n        #remove {\n          max-width: 44px;\n          overflow: visible;\n        }\n        hax-toolbar {\n          max-width: calc(100% - 2px);\n          display: flex;\n          align-items: stretch;\n          justify-content: flex-start;\n        }\n        .group {\n          display: flex;\n          align-items: stretch;\n          flex: 0 0 auto;\n          justify-content: center;\n          border: 1px solid var(--rich-text-editor-border-color, #ddd);\n          padding: 0;\n        }\n        .group,\n        .group > * {\n          z-index: 1;\n        }\n        .group:empty {\n          display: none;\n        }\n        .group > *,\n        :host([collapsed]) .group {\n          flex: 0 0 auto;\n        }\n        .group *:not([toggled])::part(button) {\n          border-color: transparent;\n        }\n        :host .group:focus,\n        :host .group:focus-within,\n        :host .group > *:focus,\n        :host .group > *:focus-within {\n          z-index: 2;\n        }\n        :host .group:hover,\n        :host .group > *:hover {\n          z-index: 3;\n        }\n        .first-slot:not(:first-child) {\n          border-top: 1px solid black;\n        }\n        hax-toolbar-menu,\n        hax-context-item {\n          line-height: 30px;\n        }\n        hax-context-item {\n          --simple-toolbar-button-width: 26px;\n          --simple-toolbar-button-height: 26px;\n        }\n      "])))]}},{key:"properties",get:function(){return s(s({},l(c(t),"properties",this)),{},{activeTagIcon:{type:String},activeSchema:{type:Object},editElementProperty:{type:String},editElementToggled:{type:Boolean},activeTagName:{type:String},disableOps:{type:Boolean},disableItemOps:{type:Boolean},insertAbove:{type:Boolean},disableDuplicate:{type:Boolean},canMoveElement:{type:Boolean},ceButtons:{type:Array},hasActiveEditingElement:{type:Boolean},onScreen:{type:Boolean,attribute:"on-screen",reflect:!0},sourceView:{type:Boolean}})}}]);var n}(k(Fe(h)));customElements.define(lt.tag,lt);var ct={url:new URL("./elements/hax-body/hax-body.js",document.baseURI).href};Element.prototype.replaceWith||(Element.prototype.replaceWith=L),CharacterData.prototype.replaceWith||(CharacterData.prototype.replaceWith=L),DocumentType.prototype.replaceWith||(DocumentType.prototype.replaceWith=L),String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return this.split(e).join(t)});var dt=null,ut=25,ht=200,pt=function(e){function t(){var e;if(d(this,t),(e=u(this,t))._useristyping=!1,e.__ignoreActive=!1,e.__dragMoving=!1,e.___moveLock=!1,e.viewSourceToggle=!1,e.editMode=!1,e.haxMover=!1,e.activeNode=null,e.__lockIconPath=F.getIcon("icons:lock"),e.part="hax-body",e.t={addContent:"Add Content"},e.timesClickedArrowDown=0,e.timesClickedArrowUp=0,e.registerLocalization({context:e,namespace:"hax"}),!window.HaxUiStyles){globalThis.HaxUiStyles=document.createElement("div");var n=document.createElement("style"),o=_e.map((function(e){return e.cssText})).join("");n.setAttribute("data-hax",!0),n.setAttribute("type","text/css"),n.styleSheet?n.styleSheet.cssText=o:n.appendChild(document.createTextNode(o)),globalThis.document.body.appendChild(n)}return e.polyfillSafe=ye.computePolyfillSafe(),e.addEventListener("place-holder-replace",e.replacePlaceholder.bind(e)),e.addEventListener("focusin",e._focusIn.bind(e)),e.addEventListener("mousemove",e._mouseMove.bind(e)),e.addEventListener("mouseleave",e._mouseLeave.bind(e)),e.addEventListener("touchstart",e._mouseMove.bind(e),{passive:!0}),e.addEventListener("mousedown",e._mouseDown.bind(e)),e.addEventListener("mouseup",e._mouseUp.bind(e)),e.addEventListener("dragenter",e.dragEnterBody.bind(e)),e.addEventListener("dragend",e.dragEndBody.bind(e)),e.addEventListener("drop",e.dropEvent.bind(e)),b((function(){e.editMode=y(ye.editMode)})),b((function(){e.elementAlign=y(ye.elementAlign)})),b((function(){e.trayStatus=y(ye.trayStatus),e.trayDetail=y(ye.trayDetail)})),b((function(){e.activeNode=y(ye.activeNode),e.activeNode&&e.activeNode.setAttribute&&e.activeNode.setAttribute("data-hax-active","data-hax-active")})),b((function(){y(ye.activeEditingElement)})),e}return o(t,e),i(t,[{key:"isGridActive",get:function(){return ye.isGridPlateElement(activeNode)}},{key:"dragEndBody",value:function(e){this.__manageFakeEndCap(!1),ye._lockContextPosition=!1,this.querySelectorAll(".hax-hovered").forEach((function(e){e.classList.remove("hax-hovered")}))}},{key:"_mouseLeave",value:function(e){this.editMode&&ye.ready&&(clearTimeout(this.__mouseQuickTimer),clearTimeout(this.__mouseTimer),this.__activeHover=null)}},{key:"_mouseMove",value:function(e){var t=this;if(this.editMode&&ye.ready){var n=T(e);clearTimeout(this.__mouseQuickTimer),this.__mouseQuickTimer=setTimeout((function(){t.__activeHover&&t.__activeHover!=n[0].closest("[data-hax-ray]:not(li)")&&(t.__activeHover=null)}),300),clearTimeout(this.__mouseTimer),this.__mouseTimer=setTimeout((function(){var e=n[0].closest("[data-hax-ray]:not(li)");if(e)t.__activeHover=e;else if(n[0].closest("[data-move-order]")&&n[3]&&n[3].closest("[data-hax-layout]"))if(n[0].closest("[data-move-order]:not(.has-nodes")){if(t.__addAbove=!1,t.__slot=n[0].closest("[data-move-order]").getAttribute("id").replace("col","col-"),0==n[0].closest("[data-move-order]").parentNode.parentNode.host.children.length){var o=document.createElement("p");n[0].closest("[data-move-order]").parentNode.parentNode.host.appendChild(o)}t.__activeHover=n[0].closest("[data-move-order]").parentNode.parentNode.host.children[0]}else t.__activeHover=n[0].closest("[data-move-order]").parentNode.parentNode.host;else n[0].closest("#bodycontainer")&&(t.__activeHover=null)}),400)}}},{key:"_mouseDown",value:function(e){if(this.editMode){this.__mouseDown=!0;var t=e.target;t.closest("[draggable]")?t=t.closest("[draggable]"):t.closest("[slot]")?t=t.closest("[slot]"):t.closest("[data-hax-ray]")?t=t.closest("[data-hax-ray]"):t.closest("[contenteditable]")?t=t.closest("[contenteditable]"):ye.validTagList.includes(t.tagName.toLowerCase())||"HAX-BODY"===t.tagName||t.haxUIElement||console.warn(t),!t.haxUIElement&&this.__focusLogic(t)&&(ye.haxTray.trayDetail="content-edit",e.stopPropagation(),e.stopImmediatePropagation())}}},{key:"_mouseUp",value:function(e){var t=this;setTimeout((function(){t.__mouseDown=!1}),0),this._useristyping=!1,clearTimeout(dt),this.__manageFakeEndCap(!1)}},{key:"scrollerFixclickEvent",value:function(e){this._useristyping=!1,this.positionContextMenus(),clearTimeout(dt)}},{key:"blurEvent",value:function(e){this.editMode&&ye.activeEditingElement}},{key:"__manageFakeEndCap",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(e&&!this.__fakeEndCap){var t=document.createElement("fake-hax-body-end");t.style.width="100%",t.style.height="20px",t.style.zIndex="2",t.style.display="block",this.__fakeEndCap=t,this.haxMover=!0,this.appendChild(this.__fakeEndCap),this.__applyNodeEditableState(this.__fakeEndCap,!0)}else!e&&this.__fakeEndCap&&(this.__fakeEndCap.remove(),this.haxMover=!1,this.__fakeEndCap=null)}},{key:"dragEnterBody",value:function(e){this.hideContextMenus(),this._useristyping=!1,this.__manageFakeEndCap(!0)}},{key:"revealMenuIfHidden",value:function(e){this._useristyping=!1,this.positionContextMenus()}},{key:"render",value:function(){return a(at||(at=r(['\n      <style id="hax-body-style-element"></style>\n      <div\n        id="bodycontainer"\n        class="ignore-activation"\n        element-align="','"\n      >\n        <slot id="body"></slot>\n      </div>\n      <absolute-position-behavior\n        id="topcontext"\n        fit-to-visible-bounds\n        justify\n        position="top"\n        allow-overlap\n        auto\n        sticky\n        data-node-type="','"\n        .target="','"\n        .trayStatus="','"\n        ?hidden="','"\n      >\n        <div id="topcontextmenu" @mouseenter="','">\n          <hax-plate-context\n            always-expanded\n            id="platecontextmenu"\n            class="hax-context-menu ignore-activation"\n            .activeNode="','"\n            .trayDetail="','"\n            .trayStatus="','"\n            ?viewSource="','"\n            ?canMoveElement="','"\n          ></hax-plate-context>\n          <hax-text-editor-toolbar\n            id="textcontextmenu"\n            class="hax-context-menu ignore-activation ','"\n            .activeNode="','"\n            show="always"\n          >\n          </hax-text-editor-toolbar>\n        </div>\n      </absolute-position-behavior>\n    '])),this.elementAlign||"left",this.activeNode?this.viewSourceToggle?this.activeNode.parentNode.tagName:this.activeNode.tagName:"",this.activeNode?this.viewSourceToggle?this.activeNode.parentNode:this.activeNode:document.body,this.trayStatus,!this.activeNode,this.revealMenuIfHidden,this.activeNode,this.trayDetail,this.trayStatus,this.viewSourceToggle,this.canMoveElement,this.calcClasses(this.activeNode),this.activeNode)}},{key:"calcClasses",value:function(e){var t="not-text";return e&&e.getAttribute&&!e.getAttribute("data-hax-lock")&&e.parentNode&&e.parentNode.getAttribute&&!e.parentNode.getAttribute("data-hax-lock")&&ye.isTextElement(e)&&!ye.isSingleSlotElement(e)&&(t="is-text"),t}},{key:"HAXBODYStyleSheetContent",value:function(){var e=[];return e.push(g(rt||(rt=r(['\n      :host([edit-mode]) #bodycontainer ::slotted(*[data-hax-lock])::after {\n        background-image: url("','");\n      }\n    '])),B(this.__lockIconPath))),e}},{key:"firstUpdated",value:function(e){var n=this;M(this.HAXBODYStyleSheetContent(),this.shadowRoot.querySelector("#hax-body-style-element")),this.dispatchEvent(new CustomEvent("hax-register-body",{bubbles:!0,cancelable:!0,composed:!0,detail:this}));try{document.execCommand("enableObjectResizing",!1,!1),document.execCommand("defaultParagraphSeparator",!1,"p")}catch(e){console.warn(e)}this.contextMenus={text:this.shadowRoot.querySelector("#textcontextmenu"),plate:this.shadowRoot.querySelector("#platecontextmenu"),parent:this.shadowRoot.querySelector("#topcontext")},this.shadowRoot.querySelector("slot").addEventListener("mouseup",(function(e){n.editMode&&setTimeout((function(){var e=ye.getSelection();ye._tmpSelection=e,ye.haxSelectedText=e.toString();try{var t=ye.getRange();t.cloneRange&&(ye._tmpRange=t.cloneRange())}catch(e){console.warn(e)}}),10)})),this.editMode=ye.editMode,this.__tabTrap=!1,this.ready=!0,l(c(t.prototype),"firstUpdated",this)&&l(c(t.prototype),"firstUpdated",this).call(this,e)}},{key:"updated",value:(I=w(E().mark((function e(n){var o=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l(c(t.prototype),"updated",this)&&l(c(t.prototype),"updated",this).call(this,n),n.forEach(function(){var e=w(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("editMode"==n&&void 0!==t&&setTimeout(w(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.__ignoreActive=!0,e.next=3,o._editModeChanged(o[n],t);case 3:setTimeout((function(){o.__ignoreActive=!1}),100);case 4:case"end":return e.stop()}}),e)}))),0),"_useristyping"==n&&o[n]&&o.hideContextMenus(),"activeNode"!=n||!o.ready||void 0===t){e.next=5;break}return e.next=5,o._activeNodeChanged(o[n],t);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)}))),function(e){return I.apply(this,arguments)})},{key:"_toggleNodeLocking",value:function(e){e.detail.lock?(this.contextMenus.plate.disableDuplicate=!0,this.contextMenus.plate.disableOps=!0,this.contextMenus.plate.disableItemOps=!0,this.contextMenus.plate.canMoveElement=!1,e.detail.node.removeAttribute("contenteditable"),this.removeAttribute("contenteditable")):(this.contextMenus.plate.disableDuplicate=!1,this.contextMenus.plate.disableOps=!1,this.contextMenus.plate.disableItemOps=!1,this.contextMenus.plate.canMoveElement=this.canMoveElement,e.detail.node.setAttribute("contenteditable",!0),this.setAttribute("contenteditable",!0)),this.requestUpdate()}},{key:"_keepContextVisible",value:function(){var e=this;this.editMode&&(clearTimeout(this.__contextVisibleLock),this.__contextVisibleLock=setTimeout((function(){var t=!1;e.contextMenus.plate.classList.contains("hax-context-visible")&&(t=e.contextMenus.plate),t&&e.positionContextMenus()}),100))}},{key:"_onKeyUp",value:function(e){var t=this;if(["ArrowUp","ArrowDown"].includes(e.key)&&this.activeNode&&ye.isTextElement(this.activeNode)&&!z.opened){var n=e.key;if(this["timesClicked".concat(n)]++,this["timesClicked".concat(n)]>=2&&this.activeNode===this.prevKeyActiveNode)if("ArrowUp"===n){if(this.activeNode.previousElementSibling&&"PAGE-BREAK"===this.activeNode.previousElementSibling.tagName)this.haxInsert("p","",{},this.activeNode.previousElementSibling);else if(this.activeNode.parentNode!==this&&this.activeNode.parentNode.previousElementSibling&&"PAGE-BREAK"===this.activeNode.parentNode.previousElementSibling.tagName)this.haxInsert("p","",{},this.activeNode.parentNode.previousElementSibling);else if(!this.activeNode.previousElementSibling&&this.activeNode.parentNode===this){var o=document.createElement("p");this.insertBefore(o,this.activeNode)}}else this.activeNode.nextElementSibling||this.children[this.children.length-1]!==this.activeNode?this.activeNode.parentNode&&this.activeNode.parentNode!==this&&!this.activeNode.parentNode.nextElementSibling&&this.children[this.children.length-1]===this.activeNode.parentNode&&this.haxInsert("p","",{},this.activeNode.parentNode):this.haxInsert("p","",{}),this["timesClicked".concat(n)]=0,this.prevKeyActiveNode=null;else this.prevKeyActiveNode=this.activeNode;setTimeout((function(){t["timesClicked".concat(n)]=0,t.prevKeyActiveNode=null}),200)}}},{key:"_onKeyDown",value:function(e){var t=this;if(this.editMode&&"HAX-TRAY"!==document.activeElement.tagName&&"BODY"!==document.activeElement.tagName&&"SIMPLE-MODAL"!==document.activeElement.tagName&&(this.getAttribute("contenteditable")&&(this.__dropActiveVisible(),this.__manageFakeEndCap(!1),null!=ye.getSelection().anchorNode)))switch(e.key){case"Z":case"z":e.ctrlKey&&(e.shiftKey?this.redo():this.undo(),e.detail.keyboardEvent&&(e.detail.keyboardEvent.preventDefault(),e.detail.keyboardEvent.stopPropagation(),e.detail.keyboardEvent.stopImmediatePropagation()),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation());break;case"Tab":this._useristyping=!0,ye.isTextElement(this.activeNode)&&(e.detail.keyboardEvent&&(e.detail.keyboardEvent.preventDefault(),e.detail.keyboardEvent.stopPropagation(),e.detail.keyboardEvent.stopImmediatePropagation()),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),e.shiftKey?this._tabBackKeyPressed():this._tabKeyPressed());break;case"Enter":if(this._useristyping=!0,this.activeNode&&(this.__slot=this.activeNode.getAttribute("slot")),this.activeNode&&"P"===this.activeNode.tagName&&["1","#","`",">","-"].includes(this.activeNode.textContent[0])){var n=this.activeNode.textContent.replaceAll(/ /g," ");this.keyboardShortCutProcess(n)}break;case"Backspace":case"Delete":this.activeNode&&""==this.activeNode.textContent&&this.activeNode.previousElementSibling&&this.activeNode.previousElementSibling.tagName&&(["TABLE","EDITABLE-TABLE","IFRAME-LOADER","IFRAME","WEBVIEW"].includes(this.activeNode.previousElementSibling.tagName)||"PAGE-BREAK"===this.activeNode.previousElementSibling.tagName&&2===this.shadowRoot.querySelector("#body").assignedNodes({flatten:!0}).length&&this.shadowRoot.querySelector("#body").assignedNodes({flatten:!0})[1]===this.activeNode)&&e.preventDefault(),this._useristyping=!0,this.__delHit=!0,this.querySelectorAll("[data-hax-active]").forEach((function(e){return e.classList.remove})),setTimeout((function(){var e=ye.getSelection();ye._tmpSelection=e,ye.haxSelectedText=e.toString();var n=ye.getRange();n.commonAncestorContainer&&t.activeNode!==n.commonAncestorContainer&&"function"==typeof n.commonAncestorContainer.focus?"HAX-BODY"!==n.commonAncestorContainer.tagName&&t.__focusLogic(n.commonAncestorContainer,!1):n.commonAncestorContainer&&n.commonAncestorContainer.parentNode&&t.activeNode!==n.commonAncestorContainer.parentNode&&"function"==typeof n.commonAncestorContainer.parentNode.focus&&("HAX-BODY"!==n.commonAncestorContainer.parentNode.tagName?t.__focusLogic(n.commonAncestorContainer.parentNode,!1):t.__focusLogic(n.commonAncestorContainer,!1))}),100);break;case"Escape":this._useristyping=!0;break;case"/":var o=ye.getRange();this.activeNode&&ye.isTextElement(this.activeNode)&&""==o.commonAncestorContainer.textContent.trim()&&(e.preventDefault(),z.mini=!0,z.activeRange=o,z.activeSelection=ye.getSelection(),z.activeNode=o.commonAncestorContainer,z.runProgram(o.commonAncestorContainer.textContent.trim(),"*"),z.open());break;case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":this._useristyping=!0,this.querySelectorAll("[data-hax-active]").forEach((function(e){return e.classList.remove})),setTimeout((function(){var e=ye.getSelection();ye._tmpSelection=e,ye.haxSelectedText=e.toString();var n=ye.getRange();n.commonAncestorContainer&&t.activeNode!==n.commonAncestorContainer&&"function"==typeof n.commonAncestorContainer.focus?"HAX-BODY"!==n.commonAncestorContainer.tagName&&t.__focusLogic(n.commonAncestorContainer,!1):n.commonAncestorContainer&&n.commonAncestorContainer.parentNode&&t.activeNode!==n.commonAncestorContainer.parentNode&&"function"==typeof n.commonAncestorContainer.parentNode.focus&&("HAX-BODY"!==n.commonAncestorContainer.parentNode.tagName?t.__focusLogic(n.commonAncestorContainer.parentNode,!1):t.__focusLogic(n.commonAncestorContainer,!1))}),0);break;default:this._useristyping=!0,setTimeout((function(){if(t.activeNode&&"P"===t.activeNode.tagName&&["1","#","`",">","-"].includes(t.activeNode.textContent[0])){var e=t.activeNode.textContent.replaceAll(/ /g," ");" "===e[e.length-1]&&t.keyboardShortCutProcess(e)}}),0)}}},{key:"keyboardShortCutProcess",value:function(e){if(ye.keyboardShortcuts[e.replace(" ","")]){var t=P(ye.keyboardShortcuts[e.replace(" ","")]);this.haxReplaceNode(this.activeNode,t),this.__focusLogic(t),"HR"===t.tagName&&this.haxInsert("p","",{})}}},{key:"setActiveNode",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&this.editMode&&this.activeNode&&(ye.isTextElement(this.activeNode)||n)&&(ye.activeNode=e,clearTimeout(this.__positionContextTimer),this.__positionContextTimer=setTimeout((function(){t.__addActiveVisible(),t.positionContextMenus()}),2e3))}},{key:"elementMidViewport",value:function(){var e=this.activeNode.getBoundingClientRect().y;return e<0&&e>-1*this.activeNode.offsetHeight+140}},{key:"replacePlaceholder",value:function(e){if("text"===e.detail){var t=document.createElement("p");this.haxReplaceNode(this.activeNode,t),this.__focusLogic(t),this.activeNode.parentNode&&this.activeNode.parentNode.setAttribute("contenteditable",!0)}else this.replaceElementWorkflow()}},{key:"canTansformNode",value:(L=w(E().mark((function e(){var t,n=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:null,e.next=3,this.replaceElementWorkflow(t,!0).length;case 3:if(e.t0=e.sent,!(e.t0>0)){e.next=8;break}e.t1=!0,e.next=9;break;case 8:e.t1=!1;case 9:return e.abrupt("return",e.t1);case 10:case"end":return e.stop()}}),e,this)}))),function(){return L.apply(this,arguments)})},{key:"insertElementWorkflow",value:(N=w(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 2:case"end":return e.stop()}}),e)}))),function(){return N.apply(this,arguments)})},{key:"primitiveTextBlocks",get:function(){return["p","div","pre","h1","h2","h3","h4","h5","h6"]}},{key:"getAllSlotConfig",value:function(e){if(e){var t=this.getParentGrid(e);return t&&t.tag?this.getSlotConfig(ye.elementList[t.tag],slot):void 0}}},{key:"getParentGrid",value:function(e){return((e=e||this.activeNode)?e.slot:void 0)?O(e.parentNode):void 0}},{key:"getSlotConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).settings,n=t?Object.keys(t||{}).map((function(n){return t[n].filter((function(t){return!(!t.slot||e&&t.slot!==e)}))})).flat():void 0;return n&&n.length>0?n[0]:void 0}},{key:"replaceElementWorkflow",value:(S=w(E().mark((function e(){var t,n,o,i,a,r,s,l,c,d,u,h,p,m,v,g,f=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>1&&void 0!==f[1]&&f[1],null==(t=f.length>0&&void 0!==f[0]?f[0]:null)&&(t=this.activeNode),e.next=5,O(t,null);case 5:if(o=e.sent){e.next=8;break}return e.abrupt("return");case 8:if(i=!1,a=(t||{}).slot,r=this.getParentGrid(t),this.primitiveTextBlocks.includes(o.tag)&&(i=!0),s=o.content?{innerHTML:o.content}:{},"undefined"!==R(ye.elementList[o.tag])&&!1!==ye.elementList[o.tag].gizmo&&"undefined"!==R(ye.elementList[o.tag].gizmo.handles)&&ye.elementList[o.tag].gizmo.handles.length>0)for(l=ye.elementList[o.tag].gizmo,c=0;c<l.handles.length;c++)for(d in o.properties.innerHTML&&(s.innerHTML=o.properties.innerHTML),l.handles[c])"type"!==d&&"undefined"!==R(o.properties[l.handles[c][d]])&&(s[d]=o.properties[l.handles[c][d]]);return u=ye.guessGizmo("*",s,i),h=r?this.getSlotConfig(a,ye.elementList[r.tag]):void 0,p=r&&"grid-plate"===r.tag?["grid-plate"]:h?h.excludedSlotWrappers:void 0,m=h?h.allowedSlotWrappers:void 0,(p||m)&&(u=u.filter((function(e){return!p.includes(e.tag)&&(!m||m.includes(e.tag))}))),u.length>0?(v=t.tagName.toLowerCase(),g=v.replace("-"," "),"undefined"!==R(ye.elementList[v])&&!1!==ye.elementList[v].gizmo&&(g=ye.elementList[v].gizmo.title),n||(ye.activePlaceHolder=this.activeNode,ye.haxAppPicker.presentOptions(u,"__convert","Change ".concat(g," to..."),"gizmo"))):n||ye.toast("Sorry, this can not be transformed!",5e3),e.abrupt("return",u);case 22:case"end":return e.stop()}}),e,this)}))),function(){return S.apply(this,arguments)})},{key:"haxClearBody",value:function(){var e=!0;(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(e=prompt("Are you sure you want to delete all content?")),e&&C(this)}},{key:"haxInsert",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.activeNode,a=document.createElement(e);a.innerHTML=t;var r=a.cloneNode(!0);for(var s in o){var l=H(s);""!=l&&o.hasOwnProperty(s)&&(!0===o[s]?r.setAttribute(l,l):!1===o[s]?r.removeAttribute(l):null!=o[s]&&o[s].constructor===Array||null!=o[s]&&o[s].constructor===Object?r.properties&&r.properties[s].readOnly||(r.set?r.set(l,o[s]):r[l]=o[s]):r.setAttribute(l,o[s]))}return null!==ye.activePlaceHolder&&"undefined"!==R(ye.activePlaceHolder.style)?(r.style.width=ye.activePlaceHolder.style.width,r.style.float=ye.activePlaceHolder.style.float,r.style.margin=ye.activePlaceHolder.style.margin,r.style.display=ye.activePlaceHolder.style.display,this.haxReplaceNode(ye.activePlaceHolder,r),ye.activePlaceHolder=null):i&&i.parentNode?this.__isLayout(i.parentNode)?(null!=i.getAttribute("slot")&&r.setAttribute("slot",i.getAttribute("slot")),this.__addAbove?i.parentNode.insertBefore(r,i):i.parentNode.insertBefore(r,i.nextElementSibling)):i.parentNode&&i.parentNode.nextElementSibling?i.parentNode.nextElementSibling.parentNode.insertBefore(r,i.parentNode.nextElementSibling):i.parentNode&&i.nextElementSibling?this.__addAbove?i.parentNode.insertBefore(r,i):i.parentNode.insertBefore(r,i.nextElementSibling):i.parentNode&&i.parentNode.children[i.parentNode.children.length-1]===i?this.__addAbove?i.parentNode.insertBefore(r,i):i.parentNode.appendChild(r):i.parentNode?i.parentNode.insertBefore(r,i):this.appendChild(r):this.appendChild(r),this.contextMenus.text.hasSelectedText=!1,setTimeout((function(){n.__focusLogic(r),n.scrollHere(r)}),0),r}},{key:"haxToContent",value:(_=w(E().mark((function e(){var t,n,o,i,a,r,s,l,c;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.hideContextMenus(),t=this.activeNode,ye.activeNode=null,n="slot"===this.shadowRoot.querySelector("#body").localName?this.shadowRoot.querySelector("#body").assignedNodes({flatten:!0}):[],o="",i=0;case 6:if(!(i<n.length)){e.next=43;break}if(!this._validElementTest(n[i],!0)){e.next=18;break}return this.__applyDragDropState(n[i],!1),n[i].classList.remove("hax-hovered"),n[i].removeAttribute("contenteditable"),e.t0=o,e.next=14,ye.nodeToContent(n[i]);case 14:o=e.t0+=e.sent,this.__isLayout(n[i])&&this._applyContentEditable(this.editMode,n[i]),e.next=40;break;case 18:if(8!==n[i].nodeType){e.next=22;break}o+="\x3c!-- "+n[i].textContent+" --\x3e",e.next=40;break;case 22:if(!(n[i].haxUIElement&&n[i].children&&n[i].children[0])){e.next=39;break}return e.next=25,ye.runHook(n[i],"activeElementChanged",[this.activeNode,!1]);case 25:if(!(a=e.sent)||a===n[i]){e.next=33;break}return e.t1=o,e.next=30,ye.nodeToContent(a);case 30:o=e.t1+=e.sent,e.next=37;break;case 33:return e.t2=o,e.next=36,ye.nodeToContent(n[i].children[0]);case 36:o=e.t2+=e.sent;case 37:e.next=40;break;case 39:1!==n[i].nodeType&&"undefined"!==R(n[i].textContent)&&"undefined"!==n[i].textContent?o+=n[i].textContent:console.warn(n[i]);case 40:i++,e.next=6;break;case 43:if(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=o.replace(/\scontenteditable=\"false\"/g,"")).replace(/\scontenteditable/g,"")).replace(/\sdraggable/g,"")).replace(/\sdata-hax-ray="(\s|.)*?"/gim,"")).replace(/\sdata-hax-grid="(\s|.)*?"/gim,"")).replace(/\sdata-hax-layout="(\s|.)*?"/gim,"")).replace(/\sdata-hax-active="(\s|.)*?"/gim,"")).replace(/ class=""/gim,"")).replace(/ contenteditable="(\s|.)*?"/gim,"")).replace(/&nbsp;/gm," "),this.parentNode.tagName)for(i in r=this.parentNode.tagName.toLowerCase(),s="style-scope "+r+" x-scope",l=new RegExp(s,"g"),o=o.replace(l,""),s="style-scope "+r,l=new RegExp(s,"g"),o=o.replace(l,""),s="x-scope "+r+"-0",l=new RegExp(s,"g"),o=o.replace(l,""),c=ye.validTagList)s="style-scope "+c[i],l=new RegExp(s,"g"),o=o.replace(l,""),s="x-scope "+c[i]+"-0 ",l=new RegExp(s,"g"),o=o.replace(l,""),s="x-scope "+c[i]+"-0",l=new RegExp(s,"g"),o=o.replace(l,"");return o=(o=o.replace(/\sclass=\"\"/g,"")).replace(/\sclass=\"\s\"/g,""),this._applyContentEditable(this.editMode),ye.activeNode=t,o=D(o),e.abrupt("return",o);case 60:case"end":return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)})},{key:"haxDuplicateNode",value:(k=w(E().mark((function e(t){var n,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t,null);case 2:if(n=e.sent,!ye.testHook(t,"preProcessInsertContent")){e.next=7;break}return e.next=6,ye.runHook(t,"preProcessInsertContent",[n,this.activeNode]);case 6:n=e.sent;case 7:return n.content==n.properties.innerHTML&&delete n.properties.innerHTML,"webview"===(o=P({tag:n.tag,content:n.content,properties:n.properties})).tagName.toLowerCase()&&ye._isSandboxed&&"undefined"!==R(o.guestinstance)&&delete o.guestinstance,null!==t?t.parentNode.insertBefore(o,t.nextSibling):t.parentNode.appendChild(o),ye.activeNode=o,e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return k.apply(this,arguments)})},{key:"hideContextMenus",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];clearTimeout(dt),clearTimeout(this.__contextVisibleLock),clearTimeout(this.__positionContextTimer),this._hideContextMenu(this.contextMenus.text),this.__activeHover=null,e&&this._hideContextMenu(this.contextMenus.plate)}},{key:"positionContextMenus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.activeNode;if(t&&t.tagName&&this.ready&&!this._useristyping){var n=t.tagName.toLowerCase();ye.elementList&&ye.elementList[n]&&ye.elementList[n].contentEditable&&null===t.getAttribute("data-hax-lock")&&t.parentNode&&null===t.parentNode.getAttribute("data-hax-lock")?t.setAttribute("contenteditable",!0):t.removeAttribute("contenteditable"),clearTimeout(this.__positionContextTimer),this.__positionContextTimer=setTimeout((function(){if(!ye._lockContextPosition){var n=t.tagName.toLowerCase();ye._isSandboxed&&"webview"===n&&(n="iframe"),t&&"PAGE-BREAK"!==t.tagName?e._showContextMenu(e.contextMenus.plate):e._hideContextMenu(e.contextMenus.plate);var o=ye.elementList[n];"undefined"===R(o)||ye.isTextElement(t)?e._showContextMenu(e.contextMenus.text):(e._hideContextMenu(e.contextMenus.text),o.element=t),(o||{}).gizmo;var i=o&&o.gizmo&&(o.gizmo.handles||[]).filter((function(e){return"inline"===(e||{}).type})).length>0;o&&"core"!=o.editingElement?setTimeout((function(){(t&&t.parentNode||!i)&&(e.canMoveElement=!0)}),250):e.activeNode&&("LI"===e.activeNode.tagName||e._HTMLInlineTextDecorationTest(e.activeNode))?e.canMoveElement=!1:e.canMoveElement=!0}e.contextMenus.parent.setPosition()}),50)}}},{key:"__addActiveVisible",value:function(){for(var e in this.contextMenus)("add"!=e||this.__activeHover)&&this.contextMenus[e].classList.add("hax-context-menu-active")}},{key:"__dropActiveVisible",value:function(){for(var e in this.contextMenus)this.contextMenus[e].classList.remove("hax-context-menu-active");this.__activeHover=null}},{key:"haxMoveGridPlate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.___moveLock=!0;var o=e?e.parentNode:void 0,i=n>0?e.nextElementSibling:e.previousElementSibling,a=this.__layoutSlots(o)||[],r=e.getAttribute("slot"),s=r?a.indexOf(r):-1,l=a[s+n];return i&&(!r||i.getAttribute("slot")),!i||r&&r!==i.getAttribute("slot")?l?e.setAttribute("slot",l):e&&o&&o!==this&&(i=n>0?o.nextElementSibling:o,l=o.getAttribute("slot"),i&&(o.parentNode.insertBefore(e,i),l&&e.setAttribute("slot",l))):o.insertBefore(e,n>0?i.nextElementSibling:i),setTimeout((function(){ye.activeNode=e,t.scrollHere(e),t.__focusLogic(e)}),100),!0}},{key:"haxGridPlateOps",value:(A=w(E().mark((function e(){var t,n,o,i,a,r,s,l,c,d=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(d.length>0&&void 0!==d[0])||d[0],n=d.length>1&&void 0!==d[1]?d[1]:"right","GRID-PLATE"!==(o=d.length>2&&void 0!==d[2]?d[2]:this.activeNode).tagName&&"GRID-PLATE"===o.parentNode.tagName&&(o=o.parentNode),i=!1,"GRID-PLATE"!==o.tagName){e.next=60;break}if(!t){e.next=36;break}e.t0=o.layout,e.next="2-1"===e.t0?10:"1-2"===e.t0?13:"3-1"===e.t0?16:"1-3"===e.t0?19:"2-1-1"===e.t0||"1-2-1"===e.t0||"1-1-2"===e.t0?22:"1"===e.t0?25:"1-1"===e.t0?28:"1-1-1"===e.t0?31:34;break;case 10:return o.layout="2-1-1",i=!0,e.abrupt("break",34);case 13:return o.layout="1-2-1",i=!0,e.abrupt("break",34);case 16:return o.layout="2-1-1",i=!0,e.abrupt("break",34);case 19:return o.layout="1-1-2",i=!0,e.abrupt("break",34);case 22:return o.layout="1-1-1-1",i=!0,e.abrupt("break",34);case 25:return o.layout="1-1",i=!0,e.abrupt("break",34);case 28:return o.layout="1-1-1",i=!0,e.abrupt("break",34);case 31:return o.layout="1-1-1-1",i=!0,e.abrupt("break",34);case 34:e.next=57;break;case 36:e.t1=o.layout,e.next="2-1"===e.t1||"1-2"===e.t1||"1-3"===e.t1||"3-1"===e.t1||"1-1"===e.t1||"1"===e.t1?39:"1-1-1"===e.t1?45:"1-1-1-1"===e.t1?48:"2-1-1"===e.t1?51:"1-2-1"===e.t1||"1-1-2"===e.t1?54:57;break;case 39:return e.next=41,o.childNodes.forEach((function(e){e.tagName&&(a=e.cloneNode(!0),o.getAttribute("slot")?a.setAttribute("slot",o.getAttribute("slot")):a.removeAttribute("slot"),o.parentNode.insertBefore(a,o))}));case 41:return ye.activeNode=a,setTimeout((function(){o.remove()}),0),i=!0,e.abrupt("break",57);case 45:return o.layout="1-1",i=!0,e.abrupt("break",57);case 48:return o.layout="1-1-1",i=!0,e.abrupt("break",57);case 51:return o.layout="2-1",i=!0,e.abrupt("break",57);case 54:return o.layout="1-2",i=!0,e.abrupt("break",57);case 57:i&&(r=this.contextMenus.plate.shadowRoot.querySelector("#right"),s=this.contextMenus.plate.shadowRoot.querySelector("#rightremove"),r.disabled=!1,s.disabled=!1,"1-1-1-1"==o.layout&&(r.disabled=!0),"left"==n&&o.childNodes.forEach((function(e){if(e.tagName){var t=parseInt(e.getAttribute("slot").replace("col-",""),10)+1;e.setAttribute("slot","col-".concat(t))}}))),e.next=69;break;case 60:(l=document.createElement("grid-plate")).layout="1-2-1",l.disableResponsive=!0,o.getAttribute("slot")&&l.setAttribute("slot",o.getAttribute("slot")),(c=o.cloneNode(!0)).setAttribute("slot","col-2"),l.appendChild(c),o.parentNode.insertBefore(l,o),setTimeout((function(){o.remove()}),0);case 69:return e.next=71,ye.refreshActiveNodeForm();case 71:case"end":return e.stop()}}),e,this)}))),function(){return A.apply(this,arguments)})},{key:"haxReplaceNode",value:function(e,t){try{null==e&&(e=this.__oldActiveNode),!e.replaceWith&&ye._tmpRange&&(e=ye._tmpRange,ye._tmpRange=null),e&&e.getAttribute&&null!=e.getAttribute("slot")&&t.setAttribute("slot",e.getAttribute("slot")),e.replaceWith(t)}catch(e){console.warn(e)}return t}},{key:"haxChangeTagName",value:function(e,t){for(var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=document.createElement(t),i=0,a=e.attributes.length;i<a;++i){var r=e.attributes.item(i).nodeName,s=e.attributes.item(i).value;try{o.setAttribute(r,s)}catch(t){console.warn(e.attributes),console.warn(t)}}n&&(o.innerHTML=e.innerHTML.trim()),"ul"==t||"ol"==t?"<br />"==o.innerHTML?o.innerHTML="<li><br /></li>":"ul"!=e.tagName.toLowerCase()&&"ol"!=e.tagName.toLowerCase()&&(o.innerHTML="<li>"+e.innerHTML.trim().replace(/<br\/>/g,"</li>\n<li>").replace(/<br>/g,"</li>\n<li>")+"</li>"):"ul"!=e.tagName.toLowerCase()&&"ol"!=e.tagName.toLowerCase()||(o.innerHTML=o.innerHTML.replace(/<ul>/g,"").replace(/<\/ul>/g,"").replace(/<li><\/li>/g,"").replace(/<li>/g,"").replace(/<\/li>/g,"<br/>"));try{e.replaceWith(o),n&&setTimeout((function(){var e=o.children;e[0]&&e.tagName?e[0].focus():o.focus()}),10)}catch(t){console.warn(t),console.warn(o),console.warn(e)}return o}},{key:"haxDeleteNode",value:function(e){if(e.previousElementSibling)ye.activeNode=e.previousElementSibling;else if(e.nextElementSibling)ye.activeNode=e.nextElementSibling;else{this.haxInsert("p","",{});try{var t=document.createRange(),n=ye.getSelection();t.setStart(this.activeNode,0),t.collapse(!0),n.removeAllRanges(),n.addRange(t),this.activeNode.focus()}catch(e){console.warn(e)}}try{return e.remove()}catch(e){console.warn(e)}}},{key:"importContent",value:function(e){var t=this;(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&C(this,"*"),setTimeout((function(){e=D(e);var n=document.createElement("div");for(n.insertAdjacentHTML("beforeend",e);null!==n.firstChild;)if("undefined"!==R(n.firstChild.tagName))if(ye._isSandboxed&&"iframe"===n.firstChild.tagName.toLowerCase()){for(var o=document.createElement("webview"),i=0,a=n.firstChild.attributes.length;i<a;++i){var r=n.firstChild.attributes.item(i).nodeName,s=n.firstChild.attributes.item(i).value;"height"!==r&&"width"!==r||o.style[r],o.setAttribute(r,s)}t.appendChild(o)}else t.appendChild(n.firstChild);else n.removeChild(n.firstChild)}),0)}},{key:"sortGridSlots",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.activeNode,t=ye.haxSchemaFromTag(e.tagName);if("grid"===t.type){var n="GRID-PLATE"===e.tagName?e.layout.split("-").map((function(e,t){return"col-".concat(t)})):ye.slotsFromSchema(t).map((function(e){return e.slot}));n.reverse().forEach((function(t,n){0==n?e.querySelectorAll("[slot=".concat(t,"]")).forEach((function(t){return e.append(t)})):m(e.querySelectorAll("[slot=".concat(t,"]"))).reverse().forEach((function(t){return e.insertBefore(t,e.firstChild)}))}))}}},{key:"_haxContextOperation",value:(x=w(E().mark((function e(t){var o,i,a,r,s,l,c,d,u,h,v,g,f,b,y,x,A,k,w,_,S,N,C=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=t.detail,i=T(t),a=i&&i[0]?i[0].getAttribute("data-slot"):void 0,e.t0=o.eventName,e.next="insert-above-active"===e.t0?4:"insert-below-active"===e.t0?6:"move-to-slot"===e.t0?8:"insert-into-active"===e.t0?10:"hax-select-grid"===e.t0?12:"hax-select-grid-item"===e.t0?14:"hax-edit-element-toggle"===e.t0?16:"hax-source-view-toggle"===e.t0?18:"hax-full-text-editor-toggle"===e.t0?54:"text-tag"===e.t0?71:"text-tag-ul"===e.t0?74:"text-tag-ol"===e.t0?78:"hax-transform-node"===e.t0?82:"hax-plate-create-right"===e.t0?84:"hax-plate-remove-right"===e.t0?86:"hax-plate-duplicate"===e.t0?88:"hax-plate-delete"===e.t0?90:"hax-plate-up"===e.t0?92:"hax-plate-down"===e.t0?94:"content-edit"===e.t0?96:"super-daemon"===e.t0?99:"hide-context-menus"===e.t0?109:111;break;case 4:return this.activeNode&&this.activeNode.previousElementSibling?this.haxInsert("p","",{},this.activeNode.previousElementSibling):this.activeNode?(r=document.createElement("p"),this.activeNode.getAttribute("slot")&&r.setAttribute("slot",this.activeNode.getAttribute("slot")),this.activeNode.parentNode.insertBefore(r,this.activeNode)):this.appendChild(p),e.abrupt("break",111);case 6:return this.haxInsert("p","",{}),e.abrupt("break",111);case 8:return a&&this.activeNode&&ye.isGridPlateElement(this.activeNode.parentNode)&&(this.activeNode.slot=a,this.sortGridSlots(this.activeNode.parentNode)),e.abrupt("break",111);case 10:return a&&this.activeNode&&ye.isGridPlateElement(this.activeNode)&&((s=document.createElement("p")).slot=a,this.activeNode.append(s),this.haxInsert("p","",{slot:a},s),s.remove(),this.sortGridSlots()),e.abrupt("break",111);case 12:return i[0]&&i[0].eventData&&(l=i[0].eventData,this.setActiveNode(l,!0),this.positionContextMenus(l)),e.abrupt("break",111);case 14:return i[0]&&i[0].eventData&&(c=i[0].eventData,d=c.target,u=c.slot,h=c.index,v=c.grid,g=c.editMode,f=c.invisible,b=f?v:m(v.children).filter((function(e){return u&&""!==u?e.slot===u:!e.slot||""===e.slot}))[h]||d,v&&g?this.setSlotEditMode(v,g,b):(this.setActiveNode(node,!0),this.positionContextMenus(node))),e.abrupt("break",111);case 16:return i[0]&&i[0].eventData&&(y=i[0].eventData)&&y.target&&y.editMode&&this.toggleElementEditMode(y.target,y.editMode),e.abrupt("break",111);case 18:if(this.activeNode.__haxSourceView){e.next=41;break}if(this.activeNode.__haxSourceView=!0,ye.activeEditingElement=document.createElement("code-editor"),ye.activeEditingElement.language="html",ye.activeEditingElement.title="",ye.activeEditingElement.theme="vs",ye.activeEditingElement.fontSize=12,ye.activeEditingElement.wordWrap=!0,this.viewSourceToggle=!0,n.import("./9b1def34.js").then((function(e){return e.b8})),this.activeNode.getAttribute&&null!=this.activeNode.getAttribute("slot")&&ye.activeEditingElement.setAttribute("slot",this.activeNode.getAttribute("slot")),this.__ignoreActive=!0,this.activeNode.removeAttribute("contenteditable"),this.__applyDragDropState(this.activeNode,!1),this.activeNode.removeAttribute("data-hax-active"),!ye.testHook(this.activeNode,"preProcessNodeToContent")){e.next=37;break}return e.next=36,ye.runHook(this.activeNode,"preProcessNodeToContent",[this.activeNode]);case 36:ye.activeNode=e.sent;case 37:q(this.activeNode,ye.activeEditingElement),ye.activeEditingElement.focus(),e.next=53;break;case 41:return this.activeNode.__haxSourceView=!1,e.next=44,ye.runHook(ye.activeEditingElement,"activeElementChanged",[this.activeNode,!1]);case 44:if(x=e.sent,A={},this.activeNode&&this.activeNode.tagName?A=ye.haxSchemaFromTag(this.activeNode.tagName.toLowerCase()):this.activeNode.parentElement&&this.activeNode.parentElement.tagName&&(A=ye.haxSchemaFromTag(this.activeNode.parentElement.tagName.toLowerCase())),this.activeNode&&this.activeNode.getAttribute&&null!=this.activeNode.getAttribute("slot")&&x.setAttribute("slot",this.activeNode.getAttribute("slot")),A.saveOptions&&A.saveOptions.unsetAttributes&&A.saveOptions.unsetAttributes.length)for(k in A.saveOptions.unsetAttributes)x.removeAttribute(A.saveOptions.unsetAttributes[k]);this.__applyNodeEditableState(x,this.editMode),U(ye.activeEditingElement),ye.activeEditingElement=null,this.viewSourceToggle=!1;case 53:return e.abrupt("break",111);case 54:if(this.activeNode.__haxSourceView){e.next=59;break}this.activeNode.__haxSourceView=!0,n.import("./9b1def34.js").then((function(e){return e.b9})).then((function(){ye.activeEditingElement=document.createElement("rich-text-editor"),ye.activeEditingElement.type="rich-text-editor-toolbar-full",C.activeNode.getAttribute&&null!=C.activeNode.getAttribute("slot")&&ye.activeEditingElement.setAttribute("slot",C.activeNode.getAttribute("slot")),C.__ignoreActive=!0,C.activeNode.removeAttribute("contenteditable"),C.__applyDragDropState(C.activeNode,!1),C.activeNode.removeAttribute("data-hax-active"),q(C.activeNode,ye.activeEditingElement),C.viewSourceElement=ye.activeEditingElement})),e.next=70;break;case 59:return this.activeNode.__haxSourceView=!1,e.next=62,ye.runHook(ye.activeEditingElement,"activeElementChanged",[this.activeNode,!1]);case 62:if(w=e.sent,_=ye.haxSchemaFromTag(this.activeNode.tagName.toLowerCase()),this.activeNode&&this.activeNode.getAttribute&&null!=this.activeNode.getAttribute("slot")&&w.setAttribute("slot",this.activeNode.getAttribute("slot")),_.saveOptions&&_.saveOptions.unsetAttributes&&_.saveOptions.unsetAttributes.length)for(k in _.saveOptions.unsetAttributes)w.removeAttribute(_.saveOptions.unsetAttributes[k]);this.__applyNodeEditableState(w,this.editMode),U(ye.activeEditingElement),ye.activeEditingElement=null,this.viewSourceElement=ye.activeEditingElement;case 70:return e.abrupt("break",111);case 71:return ye.activeNode=this.haxChangeTagName(this.activeNode,o.value),this.positionContextMenus(),e.abrupt("break",111);case 74:return this.contextMenus.text.realSelectedValue="ul",ye.activeNode=this.haxChangeTagName(this.activeNode,"ul"),this.positionContextMenus(),e.abrupt("break",111);case 78:return this.contextMenus.text.realSelectedValue="ol",ye.activeNode=this.haxChangeTagName(this.activeNode,"ol"),this.positionContextMenus(),e.abrupt("break",111);case 82:return this.replaceElementWorkflow(),e.abrupt("break",111);case 84:return this.haxGridPlateOps(),e.abrupt("break",111);case 86:return this.haxGridPlateOps(!1),e.abrupt("break",111);case 88:return this.haxDuplicateNode(this.activeNode),e.abrupt("break",111);case 90:return null!=this.activeNode&&this.haxDeleteNode(this.activeNode),e.abrupt("break",111);case 92:return this.activeNode.previousElementSibling&&"PAGE-BREAK"!==this.activeNode.previousElementSibling.tagName&&this.haxMoveGridPlate(this.activeNode,-1),e.abrupt("break",111);case 94:return this.activeNode.nextElementSibling&&this.haxMoveGridPlate(this.activeNode),e.abrupt("break",111);case 96:return"content-edit"===ye.haxTray.trayDetail&&(ye.haxTray.collapsed=!1),ye.haxTray.trayDetail="content-edit",e.abrupt("break",111);case 99:return S=ye.getRange(),z.mini=!0,z.activeRange=S,z.activeSelection=ye.getSelection(),N=this.activeNode,S.commonAncestorContainer.tagName?N=S.commonAncestorContainer:S.commonAncestorContainer.parentNode&&S.commonAncestorContainer.parentNode.tagName&&(N=S.commonAncestorContainer.parentNode),z.activeNode=N,z.runProgram(N.textContent.trim(),"*"),z.open(),e.abrupt("break",111);case 109:return this.hideContextMenus(),e.abrupt("break",111);case 111:case"end":return e.stop()}}),e,this)}))),function(e){return x.apply(this,arguments)})},{key:"_focusIn",value:function(e){this.__mouseDown||this.__focusLogic(e.target)&&(e.stopPropagation(),e.stopImmediatePropagation())}},{key:"__focusLogic",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=!1;if(this.editMode&&!this.__tabTrap){var i=e;("SPAN"===i.tagName&&ye.isTextElement(i.parentNode)&&""==i.parentNode.getAttribute("slot")||"LI"===i.tagName&&ye.isTextElement(i.parentNode)&&["UL","OL"].includes(i.parentNode.tagName))&&(i=e.parentNode);var a=null;if(this._validElementTest(i)&&i.parentNode&&i.parentNode.tagName){if("P"===i.parentNode.tagName&&""==i.parentNode.getAttribute("slot"))a=i,o=!0;else{for(;i.parentNode&&i.parentNode.tagName&&"HAX-BODY"!=i.parentNode.tagName;)null===a&&"B"!==i.tagName&&"I"!==i.tagName&&"STRONG"!==i.tagName&&"EM"!==i.tagName&&(a=i),i=i.parentNode;null===a?a=i:ye.isGridPlateElement(i)}(this.activeNode&&this.activeNode.parentNode!==i&&!i.classList.contains("ignore-activation")||i.haxUIElement||i.classList.contains("ignore-activation"))&&(o=!0),a.haxUIElement||a.classList.contains("ignore-activation")||(ye.activeNode=a,setTimeout((function(){if(n&&!t.__mouseDown&&ye.isTextElement(a))try{var e=document.createRange(),o=ye.getSelection();e.setStart(t.activeNode,0),e.collapse(!0),o.removeAllRanges(),o.addRange(e),t.activeNode.focus()}catch(e){console.warn(e)}t.positionContextMenus(a)}),0),o=!0)}}else this.__tabTrap=!1;return o}},{key:"scrollHere",value:function(e){setTimeout((function(){e.scrollIntoView({behavior:"smooth",inline:"nearest",block:"end"})}),100)}},{key:"undo",value:function(){var e=this;l(c(t.prototype),"undo",this).call(this),setTimeout((function(){var t=e.querySelector("[data-hax-active]");t?(e.__focusLogic(t),e.scrollHere(t)):e.hideContextMenus()}),0)}},{key:"redo",value:function(){var e=this;l(c(t.prototype),"redo",this).call(this),setTimeout((function(){var t=e.querySelector("[data-hax-active]");t?(e.__focusLogic(t),e.scrollHere(t)):e.hideContextMenus()}),0)}},{key:"_editModeChanged",value:(f=w(E().mark((function e(t,n){var o,i,a,r,s,l,c=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==R(n)){if(this._applyContentEditable(t),t){if(this.children&&this.children[0]&&this.children[0].focus&&this.children[0].tagName)"PAGE-BREAK"===this.children[0].tagName&&this.children[1]&&this.children[1].focus?this.__focusLogic(this.children[1]):"PAGE-BREAK"===this.children[0].tagName?this.haxInsert("p","",{}):this.__focusLogic(this.children[0]);else{this.haxInsert("p","",{});try{o=document.createRange(),i=ye.getSelection(),o.setStart(this.activeNode,0),o.collapse(!0),i.removeAllRanges(),i.addRange(o),this.activeNode.focus()}catch(e){console.warn(e)}}this._haxContextOperation({detail:{eventName:"content-edit",value:!0}})}else this.activeNode&&(this.unsetSlotEditMode(this.activeNode),this.unsetElementEditMode(this.activeNode));setTimeout((function(){c.undoStack.undoStackLimit=50,c.undoStack.undoStackPosition=-1,c.undoStack.commands=[],c.undoStack.changed(),c.undoStackInitialValue=c.innerHTML,c.undoStackPrevValue=c.undoStackInitialValue}),0)}if(0==t)for(U(ye.activeEditingElement),ye.activeEditingElement=null,this.removeAttribute("contenteditable"),this.hideContextMenus(),a=this.querySelectorAll("[contenteditable],[data-hax-active]"),r=0;r<a.length;r++)(s=a[r]).removeAttribute("contenteditable"),s.removeAttribute("data-hax-active");0===(l="slot"===this.shadowRoot.querySelector("#body").localName?this.shadowRoot.querySelector("#body").assignedNodes({flatten:!0}):[]).length&&(l=this.shadowRoot.querySelector("#body").children),r=0;case 5:if(!(r<l.length)){e.next=11;break}return e.next=8,ye.runHook(l[r],"editModeChanged",[t]);case 8:r++,e.next=5;break;case 11:t?(this._haxContextOperation=this._haxContextOperation.bind(this),this._toggleNodeLocking=this._toggleNodeLocking.bind(this),this.scrollerFixclickEvent=this.scrollerFixclickEvent.bind(this),this.blurEvent=this.blurEvent.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._keepContextVisible=this._keepContextVisible.bind(this),this.windowControllers=new AbortController,window.addEventListener("hax-context-item-selected",this._haxContextOperation,{signal:this.windowControllers.signal}),window.addEventListener("hax-toggle-active-node-lock",this._toggleNodeLocking,{signal:this.windowControllers.signal}),window.addEventListener("click",this.scrollerFixclickEvent,{signal:this.windowControllers.signal}),window.addEventListener("blur",this.blurEvent,{signal:this.windowControllers.signal}),window.addEventListener("keydown",this._onKeyDown,{signal:this.windowControllers.signal}),window.addEventListener("keyup",this._onKeyUp,{signal:this.windowControllers.signal}),window.addEventListener("resize",this._keepContextVisible,{passive:!0,signal:this.windowControllers.signal}),this._observer=new MutationObserver((function(e){var t=!1;c.__ignoreActive||c.__dragMoving||c.undoStackIgnore||c.__fakeEndCap||!c.ready||!c.editMode||!c.shadowRoot?c.undoStackIgnore&&e.forEach((function(e){e.addedNodes.length>0&&e.addedNodes.forEach((function(e){c._validElementTest(e,!0)&&setTimeout((function(){c.__applyNodeEditableState(e,c.editMode)}),0)}))})):e.forEach((function(e){if(e.removedNodes.length>0){var n,o=G(e.removedNodes);try{for(o.s();!(n=o.n()).done;){var i=n.value;e.previousSibling&&c.activeNode}}catch(e){o.e(e)}finally{o.f()}}if(e.addedNodes.length>0){var a,r=G(e.addedNodes);try{for(r.s();!(a=r.n()).done;)if(i=a.value,c._validElementTest(i)){if(!c.__delHit&&"BR"===i.tagName&&i.parentElement&&ye.__validGridTags().includes(i.parentElement.tagName.toLowerCase())&&i===i.parentElement.childNodes[i.parentElement.childNodes.length-1]){var s=i.parentElement;if(i.remove(),s.childNodes.length>0){var l=s.childNodes[s.childNodes.length-1];l.textContent+="​",ye._positionCursorInNode(l,l.length)}continue}if(c.__delHit=!1,"P"===i.tagName&&i.children.length>0&&"P"===i.children[0].tagName){U(i);continue}if("P"===i.tagName&&i.parentElement&&"P"===i.parentElement.tagName){U(i.parentElement);continue}if(null!=i.getAttribute("slot")&&i.parentElement===c){i.removeAttribute("slot");continue}if("LI"===i.tagName&&i.children.length>0&&"SPAN"===i.children[0].tagName){c.activeNode!==i.children[0]&&c.activeNode!==i||(ye.activeNode=i),U(i.children[0]);continue}if("LI"===i.tagName&&i.parentElement&&!["UL","OL"].includes(i.parentElement.tagName)){U(i);continue}if("P"===i.tagName&&i.children.length>0&&["P","LI"].includes(i.children[0].tagName)){U(i.children[0]);continue}if(c.__slot&&(i.setAttribute("slot",c.__slot),c.__slot=null),c.__indentTrap)if("SPAN"===i.tagName)i.parentNode===c?c.haxChangeTagName(i,"p",!0):"LI"===i.parentNode.tagName&&(i.parentNode.innerHTML=i.textContent);else if("BR"===i.tagName){i.remove();continue}if(!c.editMode||"true"!=i.getAttribute("contenteditable")&&!0!==i.getAttribute("contenteditable")&&"contenteditable"!=i.getAttribute("contenteditable")||c.__applyNodeEditableState(i,!c.editMode),c.__applyNodeEditableState(i,c.editMode),ye.isGridPlateElement(i))for(var d=i.querySelectorAll("*"),u=0;u<d.length;u++)c._validElementTest(d[u],!0)&&c.__applyNodeEditableState(d[u],c.editMode);if(["H1","H2","H3","H4","H5","H6"].includes(i.tagName)&&null==i.getAttribute("id")&&i.setAttribute("id",j("header-")),c.___moveLock||t)c.___moveLock=!1;else{if(t=!0,"LI"===i.tagName&&i.parentNode)ye.activeNode=i.parentNode;else if("BR"===i.tagName){var h=ye.getSelection();ye._tmpSelection=h,ye.haxSelectedText=h.toString();var p=ye.getRange();p.collapsed&&"BR"===c.activeNode.tagName&&c.activeNode.parentNode===p.commonAncestorContainer&&""===c.activeNode.innerText&&(ye.activeNode=c.activeNode.parentNode)}else ye.activeNode=i;ye.activeNode.setAttribute("data-hax-active","data-hax-active")}}}catch(e){r.e(e)}finally{r.f()}c.__indentTrap&&setTimeout((function(){c.__indentTrap=!1}),0)}else c.ready&&c.editMode&&ye.ready&&0===e.addedNodes.length&&e.removedNodes.length>0&&c.shadowRoot&&(1===c.shadowRoot.querySelector("#body").assignedNodes({flatten:!0}).length&&"PAGE-BREAK"===c.shadowRoot.querySelector("#body").assignedNodes({flatten:!0})[0].tagName||0===c.shadowRoot.querySelector("#body").assignedNodes({flatten:!0}).length)&&setTimeout((function(){(1===c.shadowRoot.querySelector("#body").assignedNodes({flatten:!0}).length&&"PAGE-BREAK"===c.shadowRoot.querySelector("#body").assignedNodes({flatten:!0})[0].tagName||0===c.shadowRoot.querySelector("#body").assignedNodes({flatten:!0}).length)&&c.appendChild(document.createElement("p"))}),100)})),c.__ignoreActive&&(c.__ignoreActive=!1),ye.haxTray.updateMap()})),this._observer.observe(this,{childList:!0,subtree:!0})):(this.windowControllers.abort(),this._observer.disconnect());case 12:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})},{key:"_haxResolvePreviousElement",value:function(e){for(e=e.previousElementSibling;null!=e&&"undefined"!==R(e.tagName)&&"HAX-"===e.tagName.substring(0,4);)e=e.previousElementSibling;return e}},{key:"_validElementTest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!(e.haxUIElement||!e.tagName||["TEMPLATE","HAX-BODY","FAKE-HAX-BODY-END"].includes(e.tagName))&&!(!t&&this._HTMLInlineTextDecorationTest(e)&&"HAX-BODY"!=e.parentNode)}},{key:"_HTMLInlineTextDecorationTest",value:function(e){return["span","b","strong","i","em","u","strike"].includes(e.tagName.toLowerCase())}},{key:"_HTMLPrimativeTest",value:function(e){return null!=e&&"undefined"!==R(e.tagName)&&-1==e.tagName.indexOf("-")}},{key:"_applyContentEditable",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.shadowRoot.querySelector("#body"),n="slot"===t.localName?t.assignedNodes({flatten:!0}):[];0===n.length&&(n=t.children);for(var o=0;o<n.length;o++)if(this._validElementTest(n[o],!0)&&(!e||!0!==n[o].getAttribute("contenteditable")&&"true"!=n[o].getAttribute("contenteditable")&&"contenteditable"!=n[o].getAttribute("contenteditable"))&&this.__applyNodeEditableState(n[o],e),ye.isGridPlateElement(n[o]))for(var i=n[o].querySelectorAll("*"),a=0;a<i.length;a++)this._validElementTest(i[a],!0)&&this.__applyNodeEditableState(i[a],e)}},{key:"__layoutDropEvent",value:function(e,t){m(t.querySelectorAll(".active")).forEach((function(e){e.classList.remove("active")})),m(t.shadowRoot.querySelectorAll(".active")).forEach((function(e){e.classList.remove("active")}))}},{key:"__layoutDragEnter",value:function(e){e.target.classList.add("active")}},{key:"__layoutDragLeave",value:function(e){e.target.classList.remove("active")}},{key:"__layoutMonitor",value:function(e){var t=T(e);t[0]&&t[0].assignedNodes&&t[0].assignedNodes().length&&t[0].parentNode&&t[0].parentNode.classList?t[0].parentNode.classList.add("has-nodes"):t[0].parentNode&&t[0].parentNode.classList&&t[0].parentNode.classList.remove("has-nodes")}},{key:"__getLayoutOrder",value:function(e,t){if(!t.shadowRoot)return!1;var n=e.getAttribute("slot"),o=t.shadowRoot.querySelector("[slot=".concat(n,"]"));return m(t.shadowRoot.querySelectorAll("[slot]")).map((function(e){return e.parentNode})).indexOf(o)||-1}},{key:"__layoutCanMove",value:function(e,t,n){if(!t.shadowRoot)return!1;var o=t.shadowRoot.querySelector("[slot=".concat(slot,"]")),i=m(t.shadowRoot.querySelectorAll("[slot]")).map((function(e){return e.parentNode})),a=(i.indexOf(o)||-1)+(n?-1:1);return a>=i[0]&&a<=i[i.length-1]}},{key:"__layoutMove",value:function(e,t,n){if(!t.shadowRoot)return!1;var o=t.shadowRoot.querySelector("[slot=".concat(r,"]")),i=m(t.shadowRoot.querySelectorAll("[slot]")).map((function(e){return e.parentNode})),a=i.indexOf(o)||-1,r=i[a+(n?-1:1)];r&&e.setAttribute("slot",r)}},{key:"__sortLayoutChildren",value:(v=w(E().mark((function e(t){var n,o=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setAttribute("hax-layout-sorting",!0),e.prev=1,n=(n=Array.prototype.reduce.call(t.querySelectorAll("[slot]"),(function(e,t){return e}),[])).sort((function(e,n){return this.__getLayoutOrder(e,t)<this.__getLayoutOrder(n,t)?-1:1})),e.next=6,n.forEach((function(e){e.parentNode===o&&t.appendChild(e)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.warn(e.t0);case 11:t.removeAttribute("hax-layout-sorting");case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),function(e){return v.apply(this,arguments)})},{key:"__layoutSlotValid",value:function(e,t){return this.__layoutSlots(t).includes(e.getAttribute("slot"))}},{key:"__layoutSlots",value:function(e){return e.shadowRoot?m(e.shadowRoot.querySelectorAll("[slot]")).map((function(e){return e.getAttribute("name")})):[]}},{key:"__applyDragDropState",value:function(e,t){var n=this,o={drop:function(t){return n.__layoutDropEvent.bind(n)(t,e)},dragenter:this.__layoutDragEnter.bind(this),dragleave:this.__layoutDragEnter.bind(this),slotchange:this.__layoutMonitor.bind(this)};if(e.setAttribute("data-hax-layout",!0),ye.isGridPlateElement(e)&&e.setAttribute("data-hax-grid",!0),t&&e.setAttribute("data-hax-ray",t),t&&e.shadowRoot){e.addEventListener("drop",o.drop);var i=m(e.shadowRoot.querySelectorAll("drag-enabled")),a=m(e.shadowRoot.querySelectorAll("slot"));i.forEach((function(e){e.addEventListener("dragenter",o.dragenter),e.addEventListener("dragleave",o.dragleave)})),a.forEach((function(e){return e.addEventListener("slotchange",o.slotchange)})),e.haxLayoutObserver=new MutationObserver((function(t){e.getAttribute("hax-layout-sorting")||(t.forEach((function(t){t.addedNodes.forEach((function(t){t.tagName&&t!==n&&t.parentElement&&"HAX-BODY"!==t.parentElement.tagName&&!n.__layoutSlotValid(t,e)&&n.__layoutSlots(e).length>0&&t.setAttribute("slot",n.__layoutSlots(e)[0])}))})),n.__sortLayoutChildren(e))})),e.haxLayoutObserver.observe(this,{childList:!0})}else if(e.shadowRoot){e.haxLayoutObserver&&e.haxLayoutObserver.disconnect(),this.removeEventListener("drop",o.drop);var r=m(e.shadowRoot.querySelectorAll("drag-enabled")),s=m(e.shadowRoot.querySelectorAll("slot"));r.forEach((function(e){e.removeEventListener("dragenter",o.dragenter),e.removeEventListener("dragleave",o.dragleave)})),s.forEach((function(e){return e.removeEventListener("slotchange",o.slotchange)})),e.removeAttribute("data-hax-ray")}}},{key:"__isLayout",value:function(e){return e&&ye.haxSchemaFromTag(e.tagName)&&"grid"===ye.haxSchemaFromTag(e.tagName).type}},{key:"__applyNodeEditableState",value:function(e){var t,n=this,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e.tagName)return!1;var i=e.tagName.replace("-"," ").toLowerCase(),a=y(ye.gizmoList).findIndex((function(t){if(t)return t.tag===e.tagName.toLowerCase()}));if(-1!==a&&(i=y(ye.gizmoList)[a].title),"PAGE-BREAK"!==e.tagName?("IMG"==e.tagName&&e.setAttribute("draggable",!1),o?(this.__applyDragDropState(e,i),t="addEventListener"):(this.__applyDragDropState(e,!1),t="removeEventListener"),e[t]("drop",this.dropEvent.bind(this)),e[t]("dragenter",this.dragEnter.bind(this)),e[t]("dragleave",this.dragLeave.bind(this)),e[t]("dragover",(function(e){n.__dragMoving=!0,e.preventDefault()}))):o?e.setAttribute("data-hax-ray",""):e.removeAttribute("data-hax-ray"),this._HTMLPrimativeTest(e)&&(o?e.setAttribute("contenteditable",o):e.removeAttribute("contenteditable"),e.querySelectorAll("a").length>0))for(var r=e.querySelectorAll("a"),s=0,l=r.length;s<l;s++)o?r[s].setAttribute("contenteditable",o):r[s].removeAttribute("contenteditable"),r[s][t]("click",(function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}))}},{key:"undoManagerStackLogic",value:function(e){this.__dragMoving||(this.querySelectorAll(".hax-hovered").forEach((function(e){e.classList.remove("hax-hovered")})),l(c(t.prototype),"undoManagerStackLogic",this).call(this,e))}},{key:"dropEvent",value:function(e){if(this.editMode){this.__dragMoving=!1,this.undoManagerStackLogic({}),clearTimeout(dt),ye._lockContextPosition=!1,ye.haxTray.activeTab="item-1";var t,n=null,o=T(e);if(null!==(n=e.target.closest("[data-hax-layout]")&&e.target.parentNode!=e.target.closest("[data-hax-layout]")?e.target.closest("[data-hax-layout]"):e.target.closest("[contenteditable],img")?e.target.closest("[contenteditable],img"):e.originalTarget?e.originalTarget:e.target).getAttribute("data-hax-lock"))return!1;o[0].classList.contains("column")?this.__slot=o[0].getAttribute("id").replace("col","col-"):n.getAttribute("slot")&&(this.__slot=n.getAttribute("slot")),this.querySelectorAll(".hax-hovered").forEach((function(e){e.classList.remove("hax-hovered")})),this.querySelectorAll(".active").forEach((function(e){e.classList.remove("active")})),ye.activeNode=n;try{if(null===ye.__dragTarget&&e.dataTransfer&&e.dataTransfer.items&&e.dataTransfer.items.length>0&&"file"===e.dataTransfer.items[0].kind){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();var i=document.createElement("p");e.target.closest("[data-hax-layout]")&&e.target.parentNode!=e.target.closest("[data-hax-layout]")?t=e.target.closest("[data-hax-layout]"):e.target.closest("[contenteditable],img")&&(t=e.target.closest("[contenteditable],img")),t&&(t.tagName&&"HAX-BODY"!==t.tagName||!t.getAttribute("data-hax-layout"))||this.__isLayout(o[0])?(t.getAttribute("slot")?i.setAttribute("slot",t.getAttribute("slot")):o[0].classList.contains("column")?i.setAttribute("slot",o[0].getAttribute("id").replace("col","col-")):i.removeAttribute("slot"),t.parentNode.insertBefore(i,t)):(o[0].classList.contains("column")?i.setAttribute("slot",o[0].getAttribute("id").replace("col","col-")):t&&"HAX-BODY"===t.tagName&&i.getAttribute("slot")&&i.removeAttribute("slot"),t?t.appendChild(i):this.appendChild(i)),e.placeHolderElement=i,this.dispatchEvent(new CustomEvent("place-holder-file-drop",{bubbles:!0,cancelable:!0,composed:!0,detail:e}))}else{if(n=ye.__dragTarget,t=e.target,e.target.closest("[data-hax-layout]")&&e.target.parentNode!=e.target.closest("[data-hax-layout]")?t=e.target.closest("[data-hax-layout]"):e.target.closest("[contenteditable],img")&&(t=e.target.closest("[contenteditable],img")),t&&n&&this._validElementTest(n)&&n!==t){try{"HAX-BODY"!==t.tagName&&!this.__isLayout(t)||this.__isLayout(o[0])?(t.getAttribute("slot")?n.setAttribute("slot",t.getAttribute("slot")):o[0].classList.contains("column")?n.setAttribute("slot",o[0].getAttribute("id").replace("col","col-")):n.removeAttribute("slot"),t.parentNode.insertBefore(n,t)):(o[0].classList.contains("column")?n.setAttribute("slot",o[0].getAttribute("id").replace("col","col-")):"HAX-BODY"===t.tagName&&n.getAttribute("slot")&&n.removeAttribute("slot"),t.appendChild(n))}catch(e){console.warn(e)}e.preventDefault(),e.stopPropagation()}n&&this._validElementTest(n)&&"function"==typeof n.focus&&(ye.activeNode=n,ye.testHook(ye.activeNode,"trayDragNDropToNode")&&ye.runHook(ye.activeNode,"trayDragNDropToNode",[ye.activeNode]),this.dispatchEvent(new CustomEvent("hax-drop-focus-event",{bubbles:!0,cancelable:!0,composed:!0,detail:this.activeNode})),this.scrollHere(this.activeNode),this.positionContextMenus())}}catch(e){console.warn(e)}}ye.__dragTarget=null,this.__manageFakeEndCap(!1)}},{key:"dragEnter",value:function(e){this.editMode&&e.target&&ye.__dragTarget&&(this.__dragMoving=!0,e.preventDefault(),e.target&&e.target.classList&&e.target.classList.add("hax-hovered"),this.handleMousemove(e))}},{key:"handleMousemove",value:function(e){var t=e.clientX,n=e.clientY,o=document.documentElement.clientWidth,i=document.documentElement.clientHeight,a=ht,r=ht,s=i-ht,l=o-ht,c=t<200,d=t>l,u=n<200,h=n>s;if(c||d||u||h){var p=Math.max(document.body.scrollWidth,document.body.offsetWidth,document.body.clientWidth,document.documentElement.scrollWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth),m=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.body.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),v=p-o,g=m-i;!function e(){clearTimeout(dt),function(){var e=window.pageXOffset,o=window.pageYOffset,i=o>0,p=o<g,m=e>0,f=e<v,b=e,y=o;if(c&&m){b-=ut*((r-t)/ht)}else if(d&&f){b+=ut*((t-l)/ht)}if(u&&i){y-=ut*((a-n)/ht)}else if(h&&p){y+=ut*((n-s)/ht)}return b=Math.max(0,Math.min(v,b)),y=Math.max(0,Math.min(g,y)),(b!==e||y!==o)&&(globalThis.scrollTo(b,y),!0)}()&&(dt=setTimeout(e,30))}()}else clearTimeout(dt)}},{key:"dragLeave",value:function(e){this.editMode&&e.target&&e.target.classList&&(this.__dragMoving=!0,e.target.classList.remove("hax-hovered"))}},{key:"toggleElementEditMode",value:function(e,t){e[t]?this.unsetElementEditMode(e,t):this.setElementEditMode(e,t)}},{key:"unsetElementEditMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.activeNode;if(e&&e.getAttribute){var t=e.getAttribute("data-element-edit-mode")||"editMode";e[t]=!1,this.__applyNodeEditableState(e,this.editMode),ye.activeEditingElement=null,this.editElementToggled=!1,this.__ignoreActive=!1}}},{key:"setElementEditMode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"editMode";e.setAttribute("data-element-edit-mode",t),e[t]=!0,ye.activeEditingElement=e,this.editElementToggled=!1,this.__ignoreActive=!0,this.activeNode.removeAttribute("contenteditable"),this.activeNode.removeAttribute("data-hax-active"),this.__applyDragDropState(this.activeNode,!1),ye.activeEditingElement.focus()}},{key:"unsetSlotEditMode",value:function(e){if(e.getAttribute&&e.getAttribute){var t=e.getAttribute("data-grid-saved-settings")?JSON.parse(e.getAttribute("data-grid-saved-settings")):void 0;Object.keys(t||{}).forEach((function(n){return e[n]=t[n]})),e.removeAttribute("data-grid-saved-settings")}}},{key:"setSlotEditMode",value:function(e,t,n){var o=e.getAttribute("data-grid-saved-settings")?JSON.parse(e.getAttribute("data-grid-saved-settings")):{},i=Object.keys(o);Object.keys(t||{}).forEach((function(n){i.includes(n)||(o[n]=e[n]),e[n]=t[n]})),e.setAttribute("data-grid-saved-settings",JSON.stringify(o))}},{key:"_activeNodeChanged",value:(h=w(E().mark((function e(t,o){var i,a,r,s,l,c,d=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.SimplePopoverManager.requestAvailability().opened=!1,this.contextMenus.plate.disableDuplicate=!1,this.contextMenus.plate.disableOps=!1,this.contextMenus.plate.disableItemOps=!1,this.contextMenus.plate.canMoveElement=this.canMoveElement,setTimeout((function(){d.prevKeyActiveNode=null}),5),o&&o.removeAttribute("data-hax-active"),t&&t.setAttribute("data-hax-active","data-hax-active"),t&&o&&ye.isGridPlateElement(t)&&(this.__ignoreActive=!0),this.editMode&&"undefined"!==R(t)&&null!==t&&t.parentNode&&t.tagName?(i=t.tagName.toLowerCase(),(ye.isTextElement(t)||"HR"===t.tagName||ye.isGridPlateElement(t))&&null===t.getAttribute("data-hax-lock")&&null===t.parentNode.getAttribute("data-hax-lock")?(t.setAttribute("contenteditable",!0),this.setAttribute("contenteditable",!0)):(t.removeAttribute("contenteditable"),this.removeAttribute("contenteditable")),this._keepContextVisible(),this.contextMenus.text.realSelectedValue=i):null===t&&(this.hideContextMenus(),this.__oldActiveNode=o),e.t0=this.editMode,!e.t0){e.next=15;break}return e.next=14,ye.runHook(o,"activeElementChanged",[o,!1]);case 14:e.t0=e.sent;case 15:if(!e.t0){e.next=17;break}this.__ignoreActive=!0;case 17:if(e.t1=this.editMode,!e.t1){e.next=22;break}return e.next=21,ye.runHook(t,"activeElementChanged",[t,!0]);case 21:e.t1=e.sent;case 22:if(!e.t1){e.next=24;break}this.__ignoreActive=!0;case 24:if(!(this.editMode&&o&&o.tagName)){e.next=34;break}if(!("core"!=(a=ye.haxSchemaFromTag(o.tagName.toLowerCase())).editingElement||o.parentNode&&o.parentNode.haxUIElement&&o.parentNode===ye.activeEditingElement)){e.next=34;break}return this.__ignoreActive=!0,e.next=30,ye.runHook(o.parentNode,"activeElementChanged",[o,!1]);case 30:if((r=e.sent)&&r!==o){if(o&&o.getAttribute&&null!=o.getAttribute("slot")&&r.setAttribute("slot",o.getAttribute("slot")),a.saveOptions&&a.saveOptions.unsetAttributes&&a.saveOptions.unsetAttributes.length)for(s in a.saveOptions.unsetAttributes)r.removeAttribute(a.saveOptions.unsetAttributes[s]);this.__applyNodeEditableState(r,this.editMode)}U(ye.activeEditingElement),ye.activeEditingElement=null;case 34:if(!this.editMode||!t){e.next=49;break}if(!(l=ye.haxSchemaFromTag(t.tagName))||!l.editingElement||"core"==l.editingElement){e.next=49;break}if(!l.editingElement.import){e.next=42;break}return c=new URL("./hax-body.js",ct.url).href+"/../../../",window.WCGlobalBasePath&&(c=window.WCGlobalBasePath),e.next=42,n.import("".concat(c).concat(l.editingElement.import));case 42:return ye.activeEditingElement=document.createElement(l.editingElement.tag),t.getAttribute&&null!=t.getAttribute("slot")&&ye.activeEditingElement.setAttribute("slot",t.getAttribute("slot")),l.editingElement.callback&&l.editingElement.callback(ye.activeEditingElement),this.__ignoreActive=!0,q(t,ye.activeEditingElement),e.next=49,ye.runHook(ye.activeEditingElement,"activeElementChanged",[t,!0]);case 49:!o||!o.parentNode||t&&t.parentNode&&t.parentNode===o.parentNode||this.unsetSlotEditMode(o.parentNode),this.unsetElementEditMode(o);case 51:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"_getPosition",value:function(e){return{x:e.offsetLeft-e.scrollLeft+e.clientLeft,y:e.offsetTop-e.scrollTop+e.clientTop}}},{key:"_showContextMenu",value:function(e){e.setAttribute("on-screen","on-screen"),e.classList.add("hax-context-visible","hax-context-menu-active")}},{key:"_getContextContainer",value:function(e){var t=e&&e.parentNode?e.parentNode:void 0;return t&&t.nodeType?1==t.nodeType?t:t.host:void 0}},{key:"_hideContextMenu",value:function(e){e&&(e.removeAttribute("on-screen"),e.classList.remove("hax-context-visible"),e.classList.remove("hax-context-menu-active"))}},{key:"_tabKeyPressed",value:function(){if(this.activeNode&&ye.getRange().cloneRange)try{var e=!1,t=this.activeNode.parentNode,n=this.activeNode.parentNode.tagName,o=ye.getRange().cloneRange(),i=o.commonAncestorContainer.tagName;if("undefined"===R(i)&&(i=o.commonAncestorContainer.parentNode.tagName),["UL","OL","LI"].includes(n)||["UL","OL","LI"].includes(i))this.polyfillSafe&&(this.__tabTrap=!0,this.__indentTrap=!0,document.execCommand("indent"));else for(;!e;)null==t.nextSibling?e=!0:"function"===t.nextSibling.focus?(t.nextSibling.focus(),e=!0):t=t.nextSibling}catch(e){console.warn(e)}}},{key:"_tabBackKeyPressed",value:function(){if(this.activeNode&&ye.getRange().cloneRange)try{var e=this.activeNode.parentNode,t=this.activeNode.parentNode.tagName,n=ye.getRange().cloneRange(),o=n.commonAncestorContainer.tagName;if("undefined"===R(o)&&(o=n.commonAncestorContainer.parentNode.tagName),["UL","OL","LI"].includes(t)||["UL","OL","LI"].includes(o))this.polyfillSafe&&(this.__tabTrap=!0,this.__indentTrap=!0,document.execCommand("outdent"));else{if(null!=e)for(;null!=e&&!this._validElementTest(e);)e=e.previousSibling;null!=e&&setTimeout((function(){e.focus()}),50)}}catch(e){console.warn(e)}}}],[{key:"tag",get:function(){return"hax-body"}},{key:"styles",get:function(){return[l(c(t),"styles",this),g(st||(st=r(['\n        :host([edit-mode]),\n        :host([edit-mode]) * ::slotted(*) {\n          caret-color: var(--hax-ui-caret-color, auto);\n        }\n\n        hax-text-editor-toolbar {\n          background-color: var(--hax-ui-background-color);\n          --simple-toolbar-button-bg: var(--hax-ui-background-color);\n          --simple-picker-options-background-color: var(\n            --hax-ui-background-color\n          );\n          --simple-picker-option-active-background-color: var(\n            --hax-ui-color-accent\n          );\n          --simple-picker-option-active-color: var(--hax-tray-text-color);\n          --simple-picker-color-active: var(--hax-tray-text-color);\n          --simple-picker-color: var(--hax-tray-text-color);\n        }\n        :host([edit-mode][tray-status="full-panel"]) {\n          opacity: 0.2;\n          pointer-events: none;\n        }\n        :host {\n          display: block;\n          position: relative;\n          min-height: 32px;\n          min-width: 32px;\n          outline: none;\n          --hax-contextual-action-text-color: var(--hax-ui-background-color);\n          --hax-contextual-action-hover-color: var(--hax-ui-color-accent);\n          --hax-contextual-action-color: var(--hax-ui-color-accent-secondary);\n          --hax-body-editable-outline: 1px solid\n            var(--hax-ui-disabled-color, #ddd);\n          --hax-body-active-outline-hover: 2px solid\n            var(--hax-ui-color-faded, #444);\n          --hax-body-active-outline: 2px solid var(--hax-ui-color-focus, #000);\n          --hax-body-active-drag-outline: 1px solid\n            var(--hax-ui-color-accent, #009dc7);\n          --hax-body-target-background-color: var(\n            --hax-ui-background-color-accent\n          );\n          --hax-body-possible-target-background-color: inherit;\n        }\n        #topcontext {\n          z-index: calc(var(--hax-ui-focus-z-index) - 2);\n          min-width: 280px;\n        }\n        #topcontextmenu {\n          width: auto;\n          max-width: 100%;\n          position: absolute;\n          bottom: 0;\n          margin-bottom: 10px;\n          margin-left: -10px;\n        }\n        .hax-context-menu {\n          visibility: hidden;\n          opacity: 0;\n          z-index: -1;\n          pointer-events: none;\n          transition: 0.3s all ease-in-out;\n        }\n        .hax-context-menu:hover {\n          z-index: calc(var(--hax-ui-focus-z-index) + 1);\n        }\n        .hax-context-visible,\n        .hax-context-menu-active {\n          display: flex;\n          pointer-events: auto;\n          visibility: visible;\n          z-index: 1;\n          opacity: 1;\n        }\n        /* this helps ensure editable-table doesn\'t try internal text editor; all others should */\n        :host([edit-mode])\n          #bodycontainer\n          ::slotted(*[contenteditable][data-hax-ray]:not(editable-table)) {\n          -webkit-appearance: textfield;\n          cursor: text;\n          -moz-user-select: text;\n          -khtml-user-select: text;\n          -webkit-user-select: text;\n          -o-user-select: text;\n        }\n        :host([edit-mode]) #bodycontainer ::slotted(*[data-hax-ray]:hover) {\n          cursor: pointer;\n          outline: 2px solid var(--hax-ui-color-hover, #0001);\n          transition: 0.2s outline-width ease-in-out;\n          outline-offset: 8px;\n        }\n\n        :host([edit-mode])\n          #bodycontainer\n          ::slotted(\n            [contenteditable][data-hax-ray]:empty:not(\n                [data-instructional-action]\n              )\n          )::before {\n          content: attr(data-hax-ray);\n          opacity: 0.2;\n          transition: 0.6s all ease-in-out;\n        }\n\n        :host([edit-mode])\n          #bodycontainer\n          ::slotted(\n            [contenteditable][data-hax-ray][data-hax-active]:empty:not(\n                [data-instructional-action]\n              )\n          )::before {\n          content: "Type \'/\' for Merlin";\n          opacity: 0.4;\n        }\n\n        :host([edit-mode])\n          #bodycontainer\n          ::slotted(\n            [contenteditable][data-hax-ray]:hover:empty:not(\n                [data-instructional-action]\n              )\n          )::before {\n          opacity: 0.4;\n          cursor: text;\n        }\n\n        :host([edit-mode])\n          #bodycontainer\n          ::slotted(\n            [contenteditable][data-hax-ray]:empty:focus:not(\n                [data-instructional-action]\n              )\n          )::before {\n          content: "";\n        }\n\n        :host([edit-mode]) #bodycontainer ::slotted([data-hax-active]),\n        :host([edit-mode]) #bodycontainer ::slotted(*.hax-hovered) {\n          outline-offset: 8px;\n        }\n        :host([edit-mode]) #bodycontainer ::slotted(img[contenteditable]) {\n          max-width: 100%;\n        }\n        :host([edit-mode]) #bodycontainer ::slotted(*[contenteditable]) {\n          caret-color: var(--hax-ui-caret-color, auto);\n        }\n        :host([edit-mode]) #bodycontainer ::slotted(*.blinkfocus) {\n          outline: 2px solid var(--hax-contextual-action-hover-color);\n        }\n        :host([edit-mode]) #bodycontainer ::slotted(*[data-hax-lock]) {\n          opacity: 0.5;\n          transition: 0.3s all ease-in-out;\n        }\n        :host([edit-mode]) #bodycontainer ::slotted(*[data-hax-lock]:hover) {\n          opacity: 0.9;\n        }\n        :host([edit-mode]) #bodycontainer ::slotted(*[data-hax-lock])::after {\n          width: 28px;\n          height: 28px;\n          content: "";\n          display: flex;\n          float: right;\n          z-index: 1;\n          position: relative;\n          background-position: center;\n          background-repeat: no-repeat;\n          background-color: #fffafa;\n        }\n        :host([edit-mode])\n          #bodycontainer\n          ::slotted(*:not([data-hax-layout]):hover) {\n          outline: var(--hax-body-active-outline-hover);\n          caret-color: var(--hax-ui-caret-color, auto);\n        }\n        :host(.hax-add-content-visible[edit-mode])\n          #bodycontainer\n          ::slotted([data-hax-active]) {\n          margin-bottom: 30px;\n        }\n        :host([edit-mode]) #bodycontainer ::slotted([data-hax-active]:hover) {\n          cursor: text !important;\n          caret-color: var(--hax-ui-caret-color, auto);\n          outline: var(--hax-body-active-outline-hover);\n        }\n        :host([edit-mode])\n          #bodycontainer\n          ::slotted(*:not([data-hax-layout]) [data-hax-active]:hover) {\n          cursor: text !important;\n          caret-color: var(--hax-ui-caret-color, auto);\n          outline: var(--hax-body-active-outline-hover);\n        }\n        :host([edit-mode])\n          #bodycontainer\n          ::slotted([data-hax-active][contenteditable]) {\n          outline: var(--hax-body-active-outline) !important;\n          caret-color: var(--hax-ui-caret-color, auto);\n        }\n        :host([edit-mode]) #bodycontainer ::slotted(hr[contenteditable]) {\n          height: 2px;\n          background-color: #eeeeee;\n          padding-top: 4px;\n          padding-bottom: 4px;\n        }\n        /** Fix to support safari as it defaults to none */\n        :host([edit-mode]) #bodycontainer ::slotted(*[contenteditable]) {\n          -webkit-user-select: text;\n          cursor: pointer;\n        }\n\n        :host([edit-mode])\n          #bodycontainer\n          ::slotted(*[contenteditable]::-moz-selection),\n        :host([edit-mode])\n          #bodycontainer\n          ::slotted(*[contenteditable] *::-moz-selection) {\n          background-color: var(--hax-body-highlight, #ffffac);\n          color: black;\n        }\n        :host([edit-mode])\n          #bodycontainer\n          ::slotted(*[contenteditable]::selection),\n        :host([edit-mode])\n          #bodycontainer\n          ::slotted(*[contenteditable] *::selection) {\n          background-color: var(--hax-body-highlight, #ffffac);\n          color: black;\n        }\n        #bodycontainer {\n          -webkit-user-select: text;\n          user-select: text;\n        }\n        absolute-position-behavior:not(:defined),\n        .hax-context-menu:not(:defined) {\n          display: none;\n        }\n        /* drag and drop */\n        :host([edit-mode][hax-mover]) #bodycontainer ::slotted(*)::before {\n          background-color: var(--hax-body-possible-target-background-color);\n          content: " ";\n          width: 100%;\n          display: block;\n          position: relative;\n          margin: -12px 0 0 0;\n          z-index: 2;\n          height: 12px;\n          transition: 0.3s all ease-in-out;\n        }\n        :host([edit-mode][hax-mover]) #bodycontainer ::slotted(img) {\n          outline: var(--hax-body-editable-outline);\n        }\n        :host([edit-mode]) #bodycontainer ::slotted(img.hax-hovered),\n        :host([edit-mode]) #bodycontainer ::slotted(*.hax-hovered)::before {\n          background-color: var(--hax-body-target-background-color) !important;\n        }\n        :host([edit-mode]) #bodycontainer ::slotted(img.hax-hovered) {\n          border-top: 8px\n            var(--hax-contextual-action-hover-color, var(--hax-ui-color-accent));\n          margin-top: -8px;\n        }\n        [hidden],\n        :host([hidden]),\n        #textcontextmenu.not-text {\n          display: none !important;\n        }\n        /** This is mobile layout for controls */\n        @media screen and (max-width: 800px) {\n          .hax-context-menu {\n            height: 0px;\n          }\n          .hax-context-visible {\n            height: auto;\n          }\n\n          :host([edit-mode]) #bodycontainer,\n          :host([edit-mode]) #bodycontainer[element-align="left"],\n          :host([edit-mode]) #bodycontainer[element-align="right"] {\n            margin: calc(100px + var(--hax-tray-menubar-min-height)) 0 0 0;\n          }\n        }\n\n        @media screen and (min-color-index: 0) and(-webkit-min-device-pixel-ratio:0) {\n          /*\n            Define here the CSS styles applied only to Safari browsers\n            (any version and any device) via https://solvit.io/bcf61b6\n          */\n          :host([edit-mode][hax-mover]) #bodycontainer ::slotted(*) {\n            outline: var(--hax-body-editable-outline);\n            background-color: var(--hax-body-possible-target-background-color);\n          }\n          :host([edit-mode]) #bodycontainer ::slotted(*.hax-hovered) {\n            background-color: var(\n              --hax-body-target-background-color\n            ) !important;\n            outline: var(--hax-body-active-outline);\n          }\n        }\n      '])))]}},{key:"properties",get:function(){return s(s({},l(c(t),"properties",this)),{},{_useristyping:{type:Boolean},haxMover:{type:Boolean,attribute:"hax-mover",reflect:!0},editMode:{type:Boolean,reflect:!0,attribute:"edit-mode"},elementAlign:{type:String,reflect:!0,attribute:"element-align"},trayDetail:{type:String,reflect:!0,attribute:"tray-detail"},trayStatus:{type:String,reflect:!0,attribute:"tray-status"},activeNode:{type:Object},canMoveElement:{type:Boolean},viewSourceToggle:{type:Boolean,reflect:!0}})}}]);var h,v,f,x,A,k,_,S,N,L,I}(k(Le(I)));customElements.define(pt.tag,pt);var mt,vt,gt,ft,bt,yt,xt=function(e){function t(){return d(this,t),u(this,t,arguments)}return o(t,e),i(t,null,[{key:"tag",get:function(){return"simple-fields-tab"}},{key:"styles",get:function(){return m(l(c(t),"styles",this))}},{key:"properties",get:function(){return s(s({},l(c(t),"properties",this)),V.properties)}}])}(W);customElements.define(xt.tag,xt);var At,kt,wt,Et,_t,St,Nt,Tt,Ct=function(e){function t(){var e;return d(this,t),(e=u(this,t)).expanded=!1,e.filter="",e.filteredOptions=[],e.inputFocus=!1,e.inputHover=!1,e.isNone=!0,e.isList=!1,e.isBoth=!1,e.listFocus=!1,e.listHover=!1,e.option=!1,e.autocomplete="none",e}return o(t,e),i(t,[{key:"stateInfo",get:function(){return{activeDescendant:this.activeDescendant,filteredOptions:this.filteredOptions,filter:this.filter,option:this.option,_selectedOption:this._selectedOption,value:this.value,firstOption:this.firstOption,lastOption:this.lastOption,input:!!this.input&&this.input.value}}},{key:"fieldElementTag",get:function(){return"input"}},{key:"firstUpdated",value:function(e){l(c(t.prototype),"firstUpdated",this)&&l(c(t.prototype),"firstUpdated",this).call(this,e),this.filter=this.value?this.value:"",this.filterOptions(this.filter,this.option)}},{key:"updated",value:function(e){var n=this;l(c(t.prototype),"updated",this)&&l(c(t.prototype),"updated",this).call(this,e),e.forEach((function(e,t){"autocomplete"===t&&n.autocompleteChanged(),"value"===t&&n.value!==e&&n.fieldValueChanged(),"itemsList"!==t&&"options"!==t||n.filterOptions(n.filter,n.option)}))}},{key:"fieldValueChanged",value:function(){this.input&&this.input.value!==this.value&&(this.input.value=this.value),this._fireValueChanged()}},{key:"autocompleteChanged",value:function(){if("string"==typeof this.autocomplete){var e=this.autocomplete.toLowerCase();this.isNone="none"===e,this.isList="list"===e,this.isBoth="both"===e}else this.isNone=!0}},{key:"inputTemplate",get:function(){return a(mt||(mt=r(['\n      <input\n        .aria-activedescendant="','"\n        .aria-autocomplete="','"\n        .aria-descrbedby="','"\n        .aria-expanded="','"\n        aria-haspopup="true"\n        .aria-invalid="','"\n        .aria-owns="','-list"\n        ?autofocus="','"\n        @blur="','"\n        @change="','"\n        class="field box-input ','"\n        @click="','"\n        ?disabled="','"\n        @focus="','"\n        @paste="','"\n        id="','"\n        @keydown="','"\n        @keyup="','"\n        name="','"\n        .placeholder="','"\n        part="option-input"\n        ?readonly="','"\n        ?required="','"\n        tabindex="0"\n        type="text"\n        value="','"\n      />\n    '])),this.activeDescendant,this.autocomplete,this.describedBy,this.expanded,this.error?"true":"false",this.id,this.autofocus,this._onInputBlur,this._handleFieldChange,this.inputFocus?"focus":"",this._onInputClick,this.disabled,this._onInputFocus,this._onInputPaste,this.id,this._onInputKeydown,this._onInputKeyup,this.id,this.placeholder||"",this.readonly,this.required,this.value||"")}},{key:"expandButtonTemplate",get:function(){return a(vt||(vt=r(['\n      <simple-icon-button-lite\n        icon="arrow-drop-down"\n        ?hidden="','"\n        label="open"\n        @click="','"\n        part="option-icon"\n        tabindex="-1"\n      >\n      </simple-icon-button-lite>\n    '])),this.sortedOptions.length<1,this._onButtonClick)}},{key:"listboxTemplate",get:function(){return a(gt||(gt=r(['\n      <ul\n        .aria-labelledBy="','-label"\n        class="','"\n        data-items="','"\n        data-options="','"\n        ?hidden="','"\n        id="','-list"\n        @mouseout="','"\n        @mouseover="','"\n        role="listbox"\n        part="listbox"\n      >\n        ',"\n      </ul>\n    "])),this.fieldId,this.listFocus?"focus":"",this.itemsList.join(),this.filteredOptions.map((function(e){return e.value})).join(),this.isListboxHidden,this.id,this._onListboxMouseout,this._onListboxMouseover,this.listboxInnerTemplate)}},{key:"listboxInnerTemplate",get:function(){var e=this;return(this.filteredOptions||[]).map((function(t){return e.getListItem(t)}))}},{key:"isListboxHidden",get:function(){return this.hidden||!this.expanded||this.filteredOptions.length<1}},{key:"getListItem",value:function(e){var t=this;return a(ft||(ft=r(['\n      <li\n        aria-selected="','"\n        id="option','"\n        role="option"\n        part="listbox-li"\n        @click="','"\n        @mouseout="','"\n        @mouseover="','"\n      >\n        ',"\n      </li>\n    "])),this._isSelected(e),e.id,(function(n){return t._onOptionClick(n,e)}),(function(n){return t._onOptionMouseout(n,e)}),(function(n){return t._onOptionMouseover(n,e)}),this.getListItemInner(e))}},{key:"getListItemInner",value:function(e){return e.value}},{key:"fieldMainTemplate",get:function(){return a(bt||(bt=r(['\n      <div class="field-main" part="field-main" ?hidden="','">\n        ','\n        <div id="field-main-inner" part="field-main-inner">\n          ','\n          <span class="input-option" part="option-inner">\n            '," ","\n            ","\n          </span>\n          ","\n        </div>\n      </div>\n    "])),this.hidden,this.labelTemplate,this.prefixTemplate,this.inputTemplate,this.suffixTemplate,this.expandButtonTemplate,this.listboxTemplate)}},{key:"hasOptions",get:function(){return this.filteredOptions.length>0}},{key:"setActiveDescendant",value:function(e){e&&this.listFocus?this.activeDescendant="option".concat(e.id):this.activeDescendant=""}},{key:"setValue",value:function(e){this.filter=e,this.input.setSelectionRange(this.filter.length,this.filter.length),(this.isList||this.isBoth)&&this.filterOptions(this.filter,this.option)}},{key:"setOption",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&(this.option=e,this.setCurrentOptionStyle(this.option),this.setActiveDescendant(this.option),this.isBoth&&(this.value=this.option.value,this.input.value=this.option.value,n?setTimeout((function(){t.input.setSelectionRange(e.value.length,e.value.length)}),0):setTimeout((function(){t.input.setSelectionRange(t.filter.length,e.value.length)}),0)))}},{key:"setVisualFocusTextbox",value:function(){this.listFocus=!1,this.inputFocus=!0,this.setActiveDescendant(!1)}},{key:"setVisualFocusListbox",value:function(){this.inputFocus=!1,this.listFocus=!0,this.setActiveDescendant(this.option)}},{key:"removeVisualFocusAll",value:function(){this.inputFocus=!1,this.listFocus=!0,this.option=!1,this.setActiveDescendant(!1)}},{key:"_onButtonClick",value:function(e){this.expanded?this.close(!0):this.open(),this.input.focus(),this.setVisualFocusTextbox()}},{key:"_onInputClick",value:function(e){this.expanded?this.close(!0):this.open()}},{key:"_onInputBlur",value:function(e){this.hoveredOption||(this.listFocus=!1,this.setCurrentOptionStyle(null),this.removeVisualFocusAll(),setTimeout(this.close(!1),300))}},{key:"_onInputPaste",value:function(e){var t=this;clearTimeout(this.__debounce),this.__debounce=setTimeout((function(){t.value=t.input.value}),0)}},{key:"_onInputFocus",value:function(e){this.setVisualFocusTextbox(),this.option=!1,this.setCurrentOptionStyle(null)}},{key:"_onInputKeydown",value:function(e){var t=this;clearTimeout(this.__debounce),this.__debounce=setTimeout((function(){t.value=t.input.value}),300);var n=!1,o=e.altKey;switch(e.keyCode){case this.keyCode.RETURN:(this.listFocus||this.isBoth)&&this.option&&this.setValue(this.option.value),this.close(!0),n=!0;break;case this.keyCode.DOWN:this.hasOptions&&(this.listFocus||this.isBoth&&this.option?this.setOption(this.nextItem,!0):(this.open(),o||this.setOption(this.firstItem,!0)),this.setVisualFocusListbox()),n=!0;break;case this.keyCode.UP:this.hasOptions&&(this.listFocus||this.isBoth&&this.option?this.setOption(this.previousItem,!0):(this.open(),o||this.setOption(this.lastItem,!0)),this.setVisualFocusListbox()),n=!0;break;case this.keyCode.ESC:this.close(!0),this.setVisualFocusTextbox(),this.setValue(""),this.option=!1,n=!0;break;case this.keyCode.TAB:this.close(!0),this.listFocus&&this.option&&this.setValue(this.option.value)}n&&(e.stopPropagation(),e.preventDefault())}},{key:"_onInputKeyup",value:function(e){this.dispatchEvent(new CustomEvent("combo-input-keyup",{bubbles:!0,cancelable:!0,composed:!0,detail:e}));var t=!1,n=!1,o=e.key||"";function i(e){return 1===e.length&&e.match(/\S/)}if(i(o)&&(this.filter+=o),this.input&&(this.input.value||"").length<this.filter.length&&(this.filter=this.input.value||"",this.option=!1),e.keyCode!==this.keyCode.ESC){switch(e.keyCode){case this.keyCode.BACKSPACE:this.setValue(this.input.value),this.setVisualFocusTextbox(),this.setCurrentOptionStyle(!1),this.option=!1,t=!0;break;case this.keyCode.LEFT:case this.keyCode.RIGHT:case this.keyCode.HOME:case this.keyCode.END:this.isBoth?this.filter=this.input.value:(this.option=!1,this.setCurrentOptionStyle(!1)),this.setVisualFocusTextbox(),t=!0;break;default:i(o)&&(this.setVisualFocusTextbox(),this.setCurrentOptionStyle(!1),t=!0)}e.keyCode!==this.keyCode.RETURN&&(this.isList||this.isBoth?(n=this.filterOptions(this.filter,this.option))?(!this.expanded&&(this.input.value||"").length&&this.open(),0===n.textComparison.indexOf((this.input.value||"").toLowerCase())?(this.option=n,(this.isBoth||this.listFocus)&&(this.setCurrentOptionStyle(n),this.isBoth&&i(o)&&this.setOption(n))):(this.option=!1,this.setCurrentOptionStyle(!1))):(this.close(),this.option=!1,this.setActiveDescendant(!1)):this.input&&(this.input.value||"").length&&this.open()),t&&(e.stopPropagation(),e.preventDefault())}}},{key:"sortedOptions",get:function(){var e=this,t=(this.itemsList||[]).map((function(e,t){return"object"===R(e)?e:{id:t,value:e}}));return Object.keys(this.options||{}).sort((function(e,t){return e>t?1:-1})).forEach((function(n){return t.push({id:t.length,value:e.options[n]})})),t}},{key:"filterOptions",value:function(e,t){var n,o,i,a;for("string"!=typeof e&&(e=""),e=e.toLowerCase(),this.filteredOptions=[],this.firstChars=[],n=0;n<this.sortedOptions.length;n++)(o=this.sortedOptions[n]).id=n,o.textComparison=o.value.toLowerCase(),0!==e.length&&0!==o.textComparison.indexOf(e)||(this.filteredOptions.push(o),i=o.value.trim(),this.firstChars.push(i.substring(0,1).toLowerCase()));if((a=this.filteredOptions.length)>0){this.firstOption=this.filteredOptions[0],this.lastOption=this.filteredOptions[a-1];var r=this.filteredOptions.map((function(e){return e.textComparison}));o=t&&t.textComparison&&r.includes(t.textComparison)?t:this.firstOption}else this.firstOption=!1,o=!1,this.lastOption=!1;return o}},{key:"setCurrentOptionStyle",value:function(e){this._selectedOption=e,this.listbox&&e&&this.shadowRoot&&this.shadowRoot.querySelector("#option".concat(e.id))&&(this.listbox.scrollTop=this.shadowRoot.querySelector("#option".concat(e.id)).offsetTop)}},{key:"_isSelected",value:function(e){return e&&this._selectedOption&&e.textComparison===this._selectedOption.textComparison?"true":"false"}},{key:"_onListboxMouseover",value:function(e){this.listHover=!0}},{key:"_onListboxMouseout",value:function(e){this.listHover=!1,this.hoveredOption=void 0,setTimeout(this.close(!1),300)}},{key:"open",value:function(){this.expanded||(this.expanded=!0)}},{key:"close",value:function(e){"boolean"!=typeof e&&(e=!1),!e&&(this.inputFocus||this.hasHover||this.hasHover)||(this.setCurrentOptionStyle(!1),this.expanded=!1,this.setActiveDescendant(!1))}},{key:"_onOptionClick",value:function(e,t){t&&(this.setOption(t),this.setValue(t.value)),this.close(!0)}},{key:"_onOptionMouseover",value:function(e,t){this.hoveredOption=t,this.listHover=!0,this.open()}},{key:"_onOptionMouseout",value:function(e,t){this.listHover=!1,this.hoveredOption=void 0,setTimeout(this.close(!1),300)}},{key:"previousItem",get:function(){var e,t=this.option?this.option.textComparison:void 0,n=this.firstOption?this.firstOption.textComparison:void 0,o=this.filteredOptions.map((function(e){return e.textComparison}));return t!==n?(e=o.indexOf(t),this.filteredOptions[e-1]):this.lastOption}},{key:"nextItem",get:function(){var e,t=this.option?this.option.textComparison:void 0,n=this.lastOption?this.lastOption.textComparison:void 0,o=this.filteredOptions.map((function(e){return e.textComparison}));return t!==n?(e=o.indexOf(t),this.filteredOptions[e+1]):this.firstOption}},{key:"listbox",get:function(){return this._listbox||(this._listbox=this.shadowRoot&&this.shadowRoot.querySelector("#".concat(this.id,"-list"))?this.shadowRoot.querySelector("#".concat(this.id,"-list")):void 0),this._listbox}},{key:"input",get:function(){return this._input||(this._input=this.field?this.field:this.shadowRoot&&this.shadowRoot.querySelector("#".concat(this.id))?this.shadowRoot.querySelector("#".concat(this.id)):void 0),this._input}},{key:"keyCode",get:function(){return{BACKSPACE:8,TAB:9,RETURN:13,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40}}}],[{key:"tag",get:function(){return"simple-fields-combo"}},{key:"styles",get:function(){return[l(c(t),"styles",this),g(yt||(yt=r(['\n        :host([expanded]) {\n          overflow: visible;\n        }\n        :host(:focus-within),\n        :host(:hover),\n        ul:hover,\n        li:hover {\n          z-index: 2;\n        }\n        .input-option {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          flex: 1 1 100%;\n        }\n        .box-input {\n          flex: 1 1 auto;\n        }\n        ul[role="listbox"] {\n          opacity: 0;\n          position: absolute;\n          list-style: none;\n          max-height: var(--simple-fields-combo-max-height, 12em);\n          max-width: 100%;\n          left: 0;\n        }\n        :host([align-right]) ul[role="listbox"] {\n          right: 0;\n          left: unset;\n        }\n        :host([justify]) ul[role="listbox"] {\n          right: 0;\n          left: 0;\n        }\n        :host([expanded]:hover) ul[role="listbox"],\n        :host([expanded]:focus-within) ul[role="listbox"] {\n          opacity: 1;\n        }\n\n        ul[role="listbox"] li[role="option"] {\n          margin: 0;\n          padding: 0;\n          padding-left: 0.125em;\n          border-top: 1px solid transparent;\n          border-bottom: 1px solid transparent;\n          background-color: var(--simple-fields-background-color, white);\n        }\n\n        [role="listbox"] [role="option"] {\n          display: block;\n          margin: 0.25em;\n          padding: 0;\n          font-size: 100%;\n        }\n\n        [role="listbox"] [role="option"][aria-selected="true"] {\n          background-color: var(--simple-fields-active-color, #eeeeee);\n        }\n\n        [role="listbox"].focus [role="option"][aria-selected="true"] {\n          background-color: var(--simple-fields-accent-color-light, #d9eaff);\n          border-color: var(--simple-fields-accent-color, #3f51b5);\n        }\n\n        [role="listbox"] li[role="option"]:hover {\n          background-color: var(--simple-fields-accent-color-light, #d9eaff);\n        }\n        ::slotted([slot="prefix"]:not(:empty)) {\n          margin-right: 0.25em;\n        }\n        ::slotted([slot="suffix"]:not(:empty)) {\n          margin: 0 0.25em;\n        }\n      '])))]}},{key:"properties",get:function(){return s(s({},l(c(t),"properties",this)),{},{activeDescendant:{type:String},alignRight:{type:Boolean,reflect:!0,attribute:"align-right"},expanded:{type:Boolean,reflect:!0},justify:{type:Boolean,reflect:!0},filter:{type:String},filteredOptions:{type:Array},inputFocus:{type:Boolean},inputHover:{type:Boolean},listFocus:{type:Boolean},listHover:{type:Boolean},hoveredOption:{type:Object}})}}])}(X(h));customElements.define(Ct.tag,Ct);var Lt,Bt,Mt,zt=function(e){function t(){return d(this,t),u(this,t)}return o(t,e),i(t,[{key:"render",value:function(){return a(At||(At=r(["","",""])),this.previewTemplate,this.labelTemplate)}},{key:"iconTypes",get:function(){return{anchor:"hax:anchor",page:"lrn:content",pdf:"hax:file-pdf",doc:"hax:file-doc",docx:"hax:file-docx",ppt:"hax:file-ppt",pptx:"hax:file-ppt",csv:"hax:file-csv",xls:"hax:file-xls",xlsx:"hax:file-xls",url:"icons:language",file:"hax:file-blank",mp4:"av:movie",mov:"av:movie",webm:"av:movie",mp3:"av:volume-up",wav:"av:volume-up",html:"icons:language",tel:"communication:phone",email:"icons:mail"}}},{key:"currentLocation",get:function(){return globalThis.location}},{key:"resourceURL",get:function(){return new URL(this.value||"./",this.currentLocation)}},{key:"isLocal",get:function(){return!!this.resourceURL.hostname&&this.resourceURL.hostname==this.currentLocation.hostname}},{key:"isSamePage",get:function(){return this.isLocal&&"".concat(this.resourceURL.pathname).concat(this.resourceURL.search)==="".concat(this.currentLocation.pathname).concat(this.currentLocation.search)}},{key:"isAnchor",get:function(){return this.isSamePage&&!!this.resourceURL.hash}},{key:"fileExtension",get:function(){var e=(this.resourceURL&&this.resourceURL.pathname?this.resourceURL.pathname:"").match(/\.\w+$/);return((e&&e[0]?e[0].replace(/^\./,""):this.type?this.type:"")||"").toLowerCase()}},{key:"imageTypes",get:function(){return["gif","svg","png","jpg","jpeg"]}},{key:"pageTypes",get:function(){return["html","htm","php",""]}},{key:"isPage",get:function(){return this.pageTypes.includes(this.fileExtension)}},{key:"isEmail",get:function(){return!!this.resourceURL&&"mailto:"===this.resourceURL.protocol}},{key:"isPhone",get:function(){return!!this.resourceURL&&"tel:"===this.resourceURL.protocol}},{key:"isImage",get:function(){return this.imageTypes.includes(this.fileExtension)}},{key:"previewSrc",get:function(){return this.preview&&""!==this.preview.trim()?this.preview:void 0}},{key:"iconName",get:function(){return this.icon&&""!==this.icon.trim()?this.icon:this.isAnchor?this.iconTypes.anchor:this.isLocal&&this.isPage?this.iconTypes.page:this.isPage?this.iconTypes.html:this.isEmail?this.iconTypes.email:this.isPhone?this.iconTypes.tel:this.fileExtension&&""!==this.fileExtension?this.iconTypes[this.fileExtension]:this.iconTypes.file}},{key:"iconTemplate",get:function(){return a(kt||(kt=r(['<simple-icon-lite\n      part="preview"\n      icon="','"\n    ></simple-icon-lite>'])),this.iconName)}},{key:"imageTemplate",get:function(){return a(wt||(wt=r(['<span\n      part="preview"\n      style="background-image: url(',')"\n    ></span>'])),this.previewSrc)}},{key:"previewTemplate",get:function(){return this.preview&&""!==this.preview?this.imageTemplate:this.icon&&""!==this.icon?this.iconTemplate:this.previewSrc&&""!==this.previewSrc?this.imageTemplate:this.iconName&&""!==this.iconName?this.iconTemplate:""}},{key:"labelTemplate",get:function(){return a(Et||(Et=r(['<span part="label">\n      ',"\n      ","\n    </span>"])),this.primaryLabelTemplate,this.name&&""!==this.name.trim()?this.secondaryLabelTemplate:"")}},{key:"primaryLabelTemplate",get:function(){return this.name&&""!==this.name.trim()?a(_t||(_t=r(['<span part="label-primary">',"</span>"])),this.name):this.value&&""!==this.value.trim()?a(St||(St=r(['<span part="label-primary">',"</span>"])),this.value):""}},{key:"secondaryLabelTemplate",get:function(){return this.value&&""!==this.value.trim()?a(Nt||(Nt=r(['<span part="label-secondary">',"</span>"])),this.value):""}},{key:"firstUpdated",value:function(e){}},{key:"updated",value:function(e){e.forEach((function(e,t){}))}}],[{key:"styles",get:function(){return[g(Tt||(Tt=r(['\n        :host {\n          display: flex;\n          align-items: center;\n          padding: var(--simple-fields-button-padding, 2px);\n          font-size: var(--simple-fields-detail-font-size, 12px);\n        }\n\n        :host([hidden]) {\n          display: none;\n        }\n        *[part="preview"] {\n          width: var(--simple-fields-url-combo-preview-size, 26px);\n          height: var(--simple-fields-url-combo-preview-size, 26px);\n          --simple-icon-height: var(\n            --simple-fields-url-combo-preview-size,\n            26px\n          );\n          --simple-icon-width: var(\n            --simple-fields-url-combo-preview-size,\n            26px\n          );\n          margin-right: var(--simple-fields-button-padding, 2px);\n        }\n        span[part="preview"] {\n          background-position: center;\n          background-size: cover;\n          background-repeat: no-repeat;\n          border-radius: var(--simple-fields-border-radius, 2px);\n        }\n        span[part="label"] {\n          max-width: 100%;\n          flex: 1 1 auto;\n        }\n        span[part="label"] span {\n          display: block;\n          line-height: 100%;\n          margin: 0;\n          overflow-wrap: break-word;\n          word-wrap: break-word;\n        }\n        span[part="label-secondary"] {\n          font-size: var(--simple-fields-meta-font-size, 10px);\n          opacity: var(--simple-fields-meta-opacity, unset);\n          color: var(--simple-fields-meta-color);\n        }\n      '])))]}},{key:"properties",get:function(){return s(s({},l(c(t),"properties",this)),{},{name:{name:"name",type:String,reflectToAttribute:!0},icon:{name:"icon",type:String,reflectToAttribute:!0},preview:{name:"preview",type:String,reflectToAttribute:!0},type:{name:"type",type:String,reflectToAttribute:!0},value:{name:"value",type:String,reflectToAttribute:!0}})}},{key:"tag",get:function(){return"simple-fields-url-combo-item"}}])}(h);customElements.define(zt.tag,zt);var Pt=function(e){function t(){var e;return d(this,t),(e=u(this,t)).grid=!1,e}return o(t,e),i(t,[{key:"isListboxHidden",get:function(){return!(this.alwaysExpanded||this.expanded)||this.hidden||this.filteredOptions.length<1}},{key:"listboxTemplate",get:function(){return a(Lt||(Lt=r(['\n      <div class="border-bottom input-bottom blur"></div>\n      <div class="border-bottom input-bottom focus"></div>\n      ',"\n    "])),l(c(t.prototype),"listboxTemplate",this))}},{key:"getListItemInner",value:function(e){return a(Bt||(Bt=r(['<simple-fields-url-combo-item\n      icon="','"\n      name="','"\n      preview="','"\n      type="','"\n      value="','"\n    >\n    </simple-fields-url-combo-item>'])),e.icon,e.name,e.preview,e.type,e.value)}},{key:"getOptionData",value:function(e,t){return{value:"object"===R(e)?e.value:e,name:"object"===R(e)?e.name:void 0,icon:"object"===R(e)?e.icon:void 0,preview:"object"===R(e)?e.preview:void 0,type:"object"===R(e)?e.type:void 0,id:t}}},{key:"sortedOptions",get:function(){var e=this,t=(this.itemsList||[]).map((function(t,n){return"object"===R(t)?t:e.getOptionData(t,n)}));return Object.keys(this.options||{}).sort((function(e,t){return e>t?1:-1})).forEach((function(n){return t.push(e.getOptionData(e.options[n],t.length))})),t}},{key:"possibleEmail",value:function(e){return e.match(/^\S+@\S+.\S+$/)}},{key:"possiblePhone",value:function(e){return e.match(/^(\+\d{1,3}\s?)?((\(\d{3}\)\s?)|(\d{3})(\s|-?))(\d{3}(\s|-?))(\d{4})(\s?(([E|e][X|x][T|t][\:|\.|]?)|x|X)(\s?\d+))?$/)}},{key:"filterOptions",value:function(e,n){l(c(t.prototype),"filterOptions",this).call(this,e,n),this.possibleEmail(e)?(this.filteredOptions=[{value:"mailto:".concat(e),id:"mailto"}].concat(m(this.filteredOptions)),this.open()):this.possiblePhone(e)&&(this.filteredOptions=[{value:"tel:".concat(e.replace(/[\(\)\-\s\:\.]/g,"").replace(/[a-zA-Z]+/,"p")),id:"tel"}].concat(m(this.filteredOptions)),this.open())}}],[{key:"tag",get:function(){return"simple-fields-url-combo"}},{key:"styles",get:function(){return[l(c(t),"styles",this),g(Mt||(Mt=r(['\n        :host([display-as="grid"]) {\n          --simple-fields-url-combo-preview-size: var(\n            --simple-fields-url-combo-grid-preview-size,\n            100px\n          );\n        }\n        ul[role="listbox"] li[role="option"]:not(:last-child) {\n          border-bottom: 1px solid var(--simple-fields-border-color-light, #ccc);\n        }\n        :host([display-as="columns"]) ul[role="listbox"] li[role="option"],\n        :host([display-as="grid"]) ul[role="listbox"] li[role="option"] {\n          border-radius: var(--simple-fields-border-radius, 2px);\n          border: 1px solid var(--simple-fields-border-color-light, #ccc);\n        }\n        :host([always-expanded]) #field-main-inner {\n          flex-wrap: wrap;\n          --simple-fields-combo-max-height: var(\n            --simple-fields-url-combox-expanded-max-height,\n            unset\n          );\n        }\n        .input-bottom,\n        :host([always-expanded]) .border-bottom:not(.input-bottom),\n        :host([always-expanded]) [part="option-icon"],\n        :host([has-suggestions="false"]) [part="option-icon"] {\n          display: none;\n        }\n        :host([always-expanded]) .input-bottom {\n          display: block;\n        }\n        :host([always-expanded]) ul[role="listbox"] {\n          border: none;\n          position: static;\n          opacity: 1;\n          flex: 1 0 100%;\n          margin: var(--simple-fields-margin-small, 8px) 0;\n        }\n        :host([display-as="columns"]) ul[role="listbox"] {\n          grid-gap: var(--simple-fields-button-padding, 2px);\n        }\n        :host([display-as="grid"]) ul[role="listbox"] {\n          grid-gap: var(--simple-fields-margin-small, 8px);\n        }\n        :host([display-as="columns"]) ul[role="listbox"],\n        :host([display-as="grid"]) ul[role="listbox"] {\n          display: grid;\n          grid-template-columns: repeat(\n            auto-fill,\n            minmax(\n              calc(\n                var(--simple-fields-url-combo-preview-size) + 2 *\n                  var(--simple-fields-button-padding, 2px)\n              ),\n              1fr\n            )\n          );\n        }\n        :host([display-as="grid"]) simple-fields-url-combo-item,\n        :host([display-as="grid"]) ::slotted(simple-fields-url-combo-item) {\n          flex-direction: column;\n          align-items: center;\n          text-align: center;\n          justify-content: space-between;\n          padding: var(--simple-fields-margin-small, 8px);\n        }\n        :host([display-as="grid"]) simple-fields-url-combo-item::part(preview),\n        :host([display-as="grid"])\n          ::slotted(simple-fields-url-combo-item::part(preview)) {\n          display: block;\n          margin-right: 0;\n        }\n      '])))]}},{key:"properties",get:function(){return s(s({},l(c(t),"properties",this)),{},{displayAs:{type:String,attribute:"display-as",reflect:!0},alwaysExpanded:{type:Boolean,attribute:"always-expanded",reflect:!0}})}}])}(Ct);customElements.define(Pt.tag,Pt);var Ot=function(e){function t(){return d(this,t),u(this,t,arguments)}return o(t,e),i(t,null,[{key:"version",get:function(){return"1.6.1"}}])}(Y(HTMLElement));customElements.define("vaadin-lumo-styles",Ot);var Ht=document.createElement("template");Ht.innerHTML='<custom-style>\n  <style>\n    @font-face {\n      font-family: \'lumo-icons\';\n      src: url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABEcAAsAAAAAIiwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAQwAAAFZAIUuKY21hcAAAAYgAAAD4AAADrsCU8d5nbHlmAAACgAAAC2MAABd4h9To2WhlYWQAAA3kAAAAMAAAADZa/6SsaGhlYQAADhQAAAAdAAAAJAbpA35obXR4AAAONAAAABAAAACspBAAAGxvY2EAAA5EAAAAWAAAAFh55IAsbWF4cAAADpwAAAAfAAAAIAFKAXBuYW1lAAAOvAAAATEAAAIuUUJZCHBvc3QAAA/wAAABKwAAAelm8SzVeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS+yDiBgZWBgamKaQ8DA0MPhGZ8wGDIyAQUZWBlZsAKAtJcUxgcXjG+0mIO+p/FEMUcxDANKMwIkgMABn8MLQB4nO3SWW6DMABF0UtwCEnIPM/zhLK8LqhfXRybSP14XUYtHV9hGYQwQBNIo3cUIPkhQeM7rib1ekqnXg981XuC1qvy84lzojleh3puxL0hPjGjRU473teloEefAUNGjJkwZcacBUtWrNmwZceeA0dOnLlw5cadB09elPGhGf+j0NTI/65KfXerT6JhqKnpRKtgOpuqaTrtKjPUlqHmhto21I7pL6i6hlqY3q7qGWrfUAeGOjTUkaGODXViqFNDnRnq3FAXhro01JWhrg11Y6hbQ90Z6t5QD4Z6NNSToZ4N9WKoV0O9GerdUB+G+jTUl6GWRvkL24BkEXictVh9bFvVFb/nxvbz+7Rf/N6zHcd2bCfP+Wgc1Z9N0jpNnEL6kbRVS6HA2hQYGh9TGR1CbCqa2rXrWOkQE/sHNJgmtZvoVNZqE1B1DNHxzTQxCehUTYiJTQyENui0qSLezr3PduyQfgmRWOfde8+9551z7rnn/O4jLoJ/bRP0UaKQMLFJjpBAvphLZC3Dk0ok7WBzR2/upJs7Ryw/nfFbln/uuN/apCvwrKLrSvUqRufbm5pn0fs0w4gYxnGVP6qHnO4bWiDQGQgwtS6lm3lB3QoX1M2vwEmuzirF39y+Es2+DJ8d1pkyqBIqoze3D1+Zz4DrFoazxI8dWwMrDlZ2DMqQAR9AROsJU+2cmlTPazTco52F1xTa2a2+K8vvq92dVHmtLoPeQX/AZPRYGthDYOeZjBjKoFsVGulR3lWU95WeCK44qHU7MhWUGUKZDT3oKUcG2GWuh+EDDfUYA/jhAhl0TOsJNYSEu7mQmi3UzfXwZKA4BsVsHLXQYGgRW95uEtpJ1Vfn9XiLriRBlFEqxsDjA09yCNUoQxxwd7KWSTt2y3GTKiflqHRSoWZc3m11Wa/fJdFgXD4sSYfleJBKd8GMz7J8dZn/cGRCcKGDnA2Ge3fKzcvlnTDNthGWLXzX/WaXtUAmRgeLlHSr30r0G9UTXMb0AtmwzOoy73fkSlHZkduw/TYuU9cAD4YutPoxTTsA3797wVr4Z/1NC5zARHr4vtxJjxIfiZMhMkbWk+14BnJZKwqGZwDfswLyxWDSg11rFLJF7Nopxjd1h1/QOT+oezgfu3Yq+Hk+duf5x+40o1GTkaIgikK/IEnC6aYxCUBaZJSN4XTYFjU/YMNIKqJwhDGOCCI8FDXnXmXjtGhGJyShqjAOnBOkW2JG9S7GgYeMWAU5JzhnWmBOaOM+CKEPoqSfFDC2Unq+DLlUgUVUFFLZGJg6jtlojsdsa8kPObPuJdi5dnBdBsLJMGTWDa4t2JvtwuPo9s+Y86suv/W33QG1rAaOAUV+vx4K6f2D04PVKlC7WLSrZzAi45ZV6lIC7WoXqmRyvUqoVwrzUoVsIjeTXWQv+RH5GTlBXiB/In8ln0IbBCAFOajAJrgZYyOHWqOfUe/aHjI12R6OQo1jCgt215l+4f6XPb+0MNou0V+43n2F77tSfRb24d7zitgnKmvYHs69zugaPvBwv6ioXkb2LdL65Atw51uLkXlu1bhMMRcXSPcYoqKIRlh34lQP8/5JbuUFye4vxD6/6MxFF11C0uVLr9Ulgw44tS3pMViNLUExbycFgLIct+QDMibRimx1ydUz8FXZiuOIDBOMVX2nUZc+huNE5XUJ81uiJoiabwqaVF0uacKbau/pl4R2VW0XXlJra6boVrYG646TF5NYzwy4vjENVrDlcNpZPl8DH6XX8XWCx0mvWVZY6KFLrvsY66/zPict5FnxaNUR/juvZCM3TvD60E2W1tZizbXTPDuabcm0nbbzpWKpmA1ayBQ8giedLUM+A0kNjBjQjmuYz7YrgIXYvmF63ZLBwSXrpn9Tb9wwdd/U1H0PMQK3XcO8ul3WT7PyPPdpy0TemKxNRcJNauiXJnnUDpUppQWs4SnUIy0EESGYqJYQLGHxzaGWwVIaS6Y7mQFM8ZjYDQ3axjf61SWjU33JwOZA1pwaG1L9mzf71aHRdX1JHw6Fp0aXhNwbqyeGNg4NbdzGCBxoz4ZXjy4Nu69Zr6sDY6vMrLU5nA1P8JkbdWXJ6ERfMryvNh1JfQ9+T4dIhGvK9w3dxjBBzatsQ/MlOHVIDnYpDz6odAXlQ01t2Pa5Iafd8MMpxAeDKP0C6CjgVLT5osB6icUx01lWjXxzT/GyRF2welEM5Z/7jG3VjQ1SrNn5IbyzOG5dobB3/QHxyZvsXcoz8IoEwS7plCg+zxHQk424q9BfEpkESJbFHQusDBSWFkuBkoPO0kLKwRVYjxGXlHTcTDQMJ/H6TX9afkO7mnraTO1feTnZAXLu4cp7HAXMmNG1yeFk9TgS/NHhZR/4QoBTr/ZB+6hCgyl15Nq1UbN6nE1/ZnP1U2cizCBpvs8cJQZJ4LkYx5N/yZPAUZNQQ0V4f3BQllWrK3YRzl30dOT6RVn2upNur6woSa8CqpdT/aKnBM4o3jNur9d9xqtUT6veBEt9Ca9at+ERzEEhUkR8sa5mQ4aVvJoVeEA8zI4ei5mULXFGyU7z/6TAeYLVcpzSWZY8PYYF5yrTV60sT0+XV141vX++Wf16V2bFeGVPZXxFpkvyeKTWLlzfW0mnKxsY6Y3294/0998SCfX1blm5pbcvFGlq/r07MRAMhYIDiW5JFKWW3vdrEpCsZSJG+om7Zu/PSScZJhNkLbmW5Wsr12pWqW5zKtlwRS4bFOxUw17mCzy6lskCDl1WYOGWDYrADrMA7BDDweWWNd5koiJnR1dz+ytLP2q0SqPB1lnK2ccB7RYe4FSoPks3iB3t4txTSHctb2sy1ivk0pvHuCNm6w1f6wxv3+OCgN78LqdQnUVh7R0oTAp0zOf2rbW770Vu5C2dIyGdTnHo8zSji7dppj0USoVCz+lhRMTh53Teq9VbGfbjuSbAooSdXayY4PYHg374C6f7gl1B/DXuJ4/QXxOBdJFJspFsI3egpoWUUCjlTIFnNYNl+ZyZKmBeYKGHkD1QyDlhaKbKwKcIJqJ4TLJ2OmdY/JWXae4DdGBw8HZ7eXcgFF2zr2SoalDry5iKqoa0Puhe3hPQ2s3elTYM+MI+n3rK0KgL7/La3GeMLt6m7u912vGnvtORiIa0qBmhqVi+XW9XNBmqb8eVgKzIHfGI5bNoG7X0UCzeISmqIcO/nY8FH7U8avX9fx/ST+hx0sezPw9Qy8Mum3GWf2N4Uy/yIYGVBXbJHWIZp7dfTcptdMTr9Qmq7DaiK/ukqCL4kt4RUfS5XPnMtmT22/mQFqF7emSqtrlu8SVElxDRJrZODkpuwe0VfTfjdEp1f7A7v+fozNBXUJ/6WTuK2TtFlpFVZAZ3LcFvUi1Z2p2YT+EMAkGJVStOzLTAPg4IqWIAlzRSjOBkl2zxj3TKycpzT/MnvX3uaSMWM+gU0rkXjohhefVRMaps3/kLMSKv23lT23uxQrkQjyOJleMDsdhAnD6ZGElWZ5MjCXzCE/hkWX+WF4knzGhVOyK2eQZekV3eyo0zL8kuYWCnDCvjjhAkcTPOBDXVdoav3HVcFnQjLvtV9S2p0zA6JegPwMQxt+yFb3ll9zGlq/5dRKb3cEyQYoaNYpharJ7xCB7AWxsLY3jjZXY0XsZj0Wjwc9I6PP/dKABnCZaqHpaZEACxk4ZeLZSKNgZABl+lYQX1sJQOSX3n6r410evcoud5JeAGUXVP9H1tZOKejTq4Ono0z0erro1FrnOpohva1d/hTdtVsQdKN5W9RlT3NjD0nznyKNTgKAMfWNWcyodV0IGLPIHOF0o4JyqufaK4z6WIIzuGh3d8c8cwQg8ER+OVxyrjdm8vNuhts4LoOihGxIMuUdgzwiYN7xhh1+oZnJNuTG7gQZvu4XWZ9GAZZjGEubwePqYhtKDTH+9VQkl17/iGybsnJ+8+sKtyPrcll9ty65Zsdst/9iqpEKh7M5VdBxh3csOdNc6tW3I1uyM1PzOXegSOrLFsFNI2O27M+TF2ApnN9MUv5ud6LjxIvEQnHRzxIu4IsA9MLFkJn2tcZoZ7ON7dXe7ujrc8HrusPKamlqXwd77lQUuLpilau4PUMapueBb7irU4RoUXEYXuVuIGlRGmOp+2lNkaRPVziOqmlaZvaqG4dFgSj0jxEJWrv12IUWntmw+rfQarRE0Aph4ocI6nlUlGqs+u3/+T/ethW62PpHp2eHbZstnh/wOO95yDAHicY2BkYGAA4pmJ6QHx/DZfGbiZXwBFGGpUNzQi6P+vmacy3QJyORiYQKIANoULVXicY2BkYGAO+p8FJF8wAAHzVAZGBlSgDQBW9gNvAAAAeJxjYGBgYH4xNDAAzwQmjwAAAAAATgCaAOgBCgEsAU4BcAGaAcQB7gIaApwC6ASaBLwE1gTyBQ4FKgV6BdAF/gZEBmYGtgcYB5AIGAhSCGoI/glGCb4J2goECjwKggq4CvALUAuWC7x4nGNgZGBg0GZMYRBlAAEmIOYCQgaG/2A+AwAYlAG8AHicbZE9TsMwGIbf9A/RSggEYmHxAgtq+jN2ZGj3Dt3T1GlTOXHkuBW9AyfgEByCgTNwCA7BW/NJlVBtyd/jx+8XKwmAa3whwnFE6Ib1OBq44O6Pm6Qb4Rb5QbiNHh6FO/RD4S6eMRHu4RaaT4halzR3eBVu4Apvwk36d+EW+UO4jXt8Cnfov4W7WOBHuIen6MXsCtvPU1vWc73emcSdxIkW2tW5LdUoHp7kTJfaJV6v1PKg6v167H2mMmcLNbWl18ZYVTm71amPN95Xk8EgEx+ntoDBDgUs+siRspaoMef7rukNEriziXNuwS7Hmoe9wggxv+e55IzJMqQTeNYV00scuNbY8+YxrUfGfcaMZb/CNPQe04bT0lThbEuT0sfYhK6K/23Amf3Lx+H24hcj4GScAAAAeJxtjtlugzAQRbkJUEJIuu/7vqR8lGNPAcWx0YAb5e/LklR96EgenSufGY038PqKvf9rhgGG8BEgxA4ijBBjjAQTTLGLPezjAIc4wjFOcIoznOMCl7jCNW5wizvc4wGPeMIzXvCKN7zjAzN8eonQRWZSSaYmjvug6ase98hFltexMJmmVNmV2WBvdNgZUc+ujAWzXW3UDnu1w43asStHc8GpzAXX/py0jqTQZJTgkcxJLpaCF0lD32xNt+43tAsn29Dft02uDKS2cjGUNgsk26qK2lFthYoU27INPqmiDqg5goe0pqR5qSoqMdek/CUZFywL46rEsiImleqiqoMyt4baXlu/1GLdNFf5zbcNmdr1YUWCZe47o+zUmb/DoStbw3cVsef9ALjjiPQA) format(\'woff\');\n      font-weight: normal;\n      font-style: normal;\n    }\n\n    html {\n      --lumo-icons-align-center: "\\ea01";\n      --lumo-icons-align-left: "\\ea02";\n      --lumo-icons-align-right: "\\ea03";\n      --lumo-icons-angle-down: "\\ea04";\n      --lumo-icons-angle-left: "\\ea05";\n      --lumo-icons-angle-right: "\\ea06";\n      --lumo-icons-angle-up: "\\ea07";\n      --lumo-icons-arrow-down: "\\ea08";\n      --lumo-icons-arrow-left: "\\ea09";\n      --lumo-icons-arrow-right: "\\ea0a";\n      --lumo-icons-arrow-up: "\\ea0b";\n      --lumo-icons-bar-chart: "\\ea0c";\n      --lumo-icons-bell: "\\ea0d";\n      --lumo-icons-calendar: "\\ea0e";\n      --lumo-icons-checkmark: "\\ea0f";\n      --lumo-icons-chevron-down: "\\ea10";\n      --lumo-icons-chevron-left: "\\ea11";\n      --lumo-icons-chevron-right: "\\ea12";\n      --lumo-icons-chevron-up: "\\ea13";\n      --lumo-icons-clock: "\\ea14";\n      --lumo-icons-cog: "\\ea15";\n      --lumo-icons-cross: "\\ea16";\n      --lumo-icons-download: "\\ea17";\n      --lumo-icons-dropdown: "\\ea18";\n      --lumo-icons-edit: "\\ea19";\n      --lumo-icons-error: "\\ea1a";\n      --lumo-icons-eye: "\\ea1b";\n      --lumo-icons-eye-disabled: "\\ea1c";\n      --lumo-icons-menu: "\\ea1d";\n      --lumo-icons-minus: "\\ea1e";\n      --lumo-icons-ordered-list: "\\ea1f";\n      --lumo-icons-phone: "\\ea20";\n      --lumo-icons-photo: "\\ea21";\n      --lumo-icons-play: "\\ea22";\n      --lumo-icons-plus: "\\ea23";\n      --lumo-icons-redo: "\\ea24";\n      --lumo-icons-reload: "\\ea25";\n      --lumo-icons-search: "\\ea26";\n      --lumo-icons-undo: "\\ea27";\n      --lumo-icons-unordered-list: "\\ea28";\n      --lumo-icons-upload: "\\ea29";\n      --lumo-icons-user: "\\ea2a";\n    }\n  </style>\n</custom-style>',document.head.appendChild(Ht.content);var Rt=document.createElement("template");Rt.innerHTML='<custom-style>\n  <style>\n    html {\n      /* Base (background) */\n      --lumo-base-color: #FFF;\n\n      /* Tint */\n      --lumo-tint-5pct: hsla(0, 0%, 100%, 0.3);\n      --lumo-tint-10pct: hsla(0, 0%, 100%, 0.37);\n      --lumo-tint-20pct: hsla(0, 0%, 100%, 0.44);\n      --lumo-tint-30pct: hsla(0, 0%, 100%, 0.5);\n      --lumo-tint-40pct: hsla(0, 0%, 100%, 0.57);\n      --lumo-tint-50pct: hsla(0, 0%, 100%, 0.64);\n      --lumo-tint-60pct: hsla(0, 0%, 100%, 0.7);\n      --lumo-tint-70pct: hsla(0, 0%, 100%, 0.77);\n      --lumo-tint-80pct: hsla(0, 0%, 100%, 0.84);\n      --lumo-tint-90pct: hsla(0, 0%, 100%, 0.9);\n      --lumo-tint: #FFF;\n\n      /* Shade */\n      --lumo-shade-5pct: hsla(214, 61%, 25%, 0.05);\n      --lumo-shade-10pct: hsla(214, 57%, 24%, 0.1);\n      --lumo-shade-20pct: hsla(214, 53%, 23%, 0.16);\n      --lumo-shade-30pct: hsla(214, 50%, 22%, 0.26);\n      --lumo-shade-40pct: hsla(214, 47%, 21%, 0.38);\n      --lumo-shade-50pct: hsla(214, 45%, 20%, 0.5);\n      --lumo-shade-60pct: hsla(214, 43%, 19%, 0.61);\n      --lumo-shade-70pct: hsla(214, 42%, 18%, 0.72);\n      --lumo-shade-80pct: hsla(214, 41%, 17%, 0.83);\n      --lumo-shade-90pct: hsla(214, 40%, 16%, 0.94);\n      --lumo-shade: hsl(214, 35%, 15%);\n\n      /* Contrast */\n      --lumo-contrast-5pct: var(--lumo-shade-5pct);\n      --lumo-contrast-10pct: var(--lumo-shade-10pct);\n      --lumo-contrast-20pct: var(--lumo-shade-20pct);\n      --lumo-contrast-30pct: var(--lumo-shade-30pct);\n      --lumo-contrast-40pct: var(--lumo-shade-40pct);\n      --lumo-contrast-50pct: var(--lumo-shade-50pct);\n      --lumo-contrast-60pct: var(--lumo-shade-60pct);\n      --lumo-contrast-70pct: var(--lumo-shade-70pct);\n      --lumo-contrast-80pct: var(--lumo-shade-80pct);\n      --lumo-contrast-90pct: var(--lumo-shade-90pct);\n      --lumo-contrast: var(--lumo-shade);\n\n      /* Text */\n      --lumo-header-text-color: var(--lumo-contrast);\n      --lumo-body-text-color: var(--lumo-contrast-90pct);\n      --lumo-secondary-text-color: var(--lumo-contrast-70pct);\n      --lumo-tertiary-text-color: var(--lumo-contrast-50pct);\n      --lumo-disabled-text-color: var(--lumo-contrast-30pct);\n\n      /* Primary */\n      --lumo-primary-color: hsl(214, 90%, 52%);\n      --lumo-primary-color-50pct: hsla(214, 90%, 52%, 0.5);\n      --lumo-primary-color-10pct: hsla(214, 90%, 52%, 0.1);\n      --lumo-primary-text-color: var(--lumo-primary-color);\n      --lumo-primary-contrast-color: #FFF;\n\n      /* Error */\n      --lumo-error-color: hsl(3, 100%, 61%);\n      --lumo-error-color-50pct: hsla(3, 100%, 60%, 0.5);\n      --lumo-error-color-10pct: hsla(3, 100%, 60%, 0.1);\n      --lumo-error-text-color: hsl(3, 92%, 53%);\n      --lumo-error-contrast-color: #FFF;\n\n      /* Success */\n      --lumo-success-color: hsl(145, 80%, 42%); /* hsl(144,82%,37%); */\n      --lumo-success-color-50pct: hsla(145, 76%, 44%, 0.55);\n      --lumo-success-color-10pct: hsla(145, 76%, 44%, 0.12);\n      --lumo-success-text-color: hsl(145, 100%, 32%);\n      --lumo-success-contrast-color: #FFF;\n    }\n  </style>\n</custom-style><dom-module id="lumo-color">\n  <template>\n    <style>\n      [theme~="dark"] {\n        /* Base (background) */\n        --lumo-base-color: hsl(214, 35%, 21%);\n\n        /* Tint */\n        --lumo-tint-5pct: hsla(214, 65%, 85%, 0.06);\n        --lumo-tint-10pct: hsla(214, 60%, 80%, 0.14);\n        --lumo-tint-20pct: hsla(214, 64%, 82%, 0.23);\n        --lumo-tint-30pct: hsla(214, 69%, 84%, 0.32);\n        --lumo-tint-40pct: hsla(214, 73%, 86%, 0.41);\n        --lumo-tint-50pct: hsla(214, 78%, 88%, 0.5);\n        --lumo-tint-60pct: hsla(214, 82%, 90%, 0.6);\n        --lumo-tint-70pct: hsla(214, 87%, 92%, 0.7);\n        --lumo-tint-80pct: hsla(214, 91%, 94%, 0.8);\n        --lumo-tint-90pct: hsla(214, 96%, 96%, 0.9);\n        --lumo-tint: hsl(214, 100%, 98%);\n\n        /* Shade */\n        --lumo-shade-5pct: hsla(214, 0%, 0%, 0.07);\n        --lumo-shade-10pct: hsla(214, 4%, 2%, 0.15);\n        --lumo-shade-20pct: hsla(214, 8%, 4%, 0.23);\n        --lumo-shade-30pct: hsla(214, 12%, 6%, 0.32);\n        --lumo-shade-40pct: hsla(214, 16%, 8%, 0.41);\n        --lumo-shade-50pct: hsla(214, 20%, 10%, 0.5);\n        --lumo-shade-60pct: hsla(214, 24%, 12%, 0.6);\n        --lumo-shade-70pct: hsla(214, 28%, 13%, 0.7);\n        --lumo-shade-80pct: hsla(214, 32%, 13%, 0.8);\n        --lumo-shade-90pct: hsla(214, 33%, 13%, 0.9);\n        --lumo-shade: hsl(214, 33%, 13%);\n\n        /* Contrast */\n        --lumo-contrast-5pct: var(--lumo-tint-5pct);\n        --lumo-contrast-10pct: var(--lumo-tint-10pct);\n        --lumo-contrast-20pct: var(--lumo-tint-20pct);\n        --lumo-contrast-30pct: var(--lumo-tint-30pct);\n        --lumo-contrast-40pct: var(--lumo-tint-40pct);\n        --lumo-contrast-50pct: var(--lumo-tint-50pct);\n        --lumo-contrast-60pct: var(--lumo-tint-60pct);\n        --lumo-contrast-70pct: var(--lumo-tint-70pct);\n        --lumo-contrast-80pct: var(--lumo-tint-80pct);\n        --lumo-contrast-90pct: var(--lumo-tint-90pct);\n        --lumo-contrast: var(--lumo-tint);\n\n        /* Text */\n        --lumo-header-text-color: var(--lumo-contrast);\n        --lumo-body-text-color: var(--lumo-contrast-90pct);\n        --lumo-secondary-text-color: var(--lumo-contrast-70pct);\n        --lumo-tertiary-text-color: var(--lumo-contrast-50pct);\n        --lumo-disabled-text-color: var(--lumo-contrast-30pct);\n\n        /* Primary */\n        --lumo-primary-color: hsl(214, 86%, 55%);\n        --lumo-primary-color-50pct: hsla(214, 86%, 55%, 0.5);\n        --lumo-primary-color-10pct: hsla(214, 90%, 63%, 0.1);\n        --lumo-primary-text-color: hsl(214, 100%, 70%);\n        --lumo-primary-contrast-color: #FFF;\n\n        /* Error */\n        --lumo-error-color: hsl(3, 90%, 63%);\n        --lumo-error-color-50pct: hsla(3, 90%, 63%, 0.5);\n        --lumo-error-color-10pct: hsla(3, 90%, 63%, 0.1);\n        --lumo-error-text-color: hsl(3, 100%, 67%);\n\n        /* Success */\n        --lumo-success-color: hsl(145, 65%, 42%);\n        --lumo-success-color-50pct: hsla(145, 65%, 42%, 0.5);\n        --lumo-success-color-10pct: hsla(145, 65%, 42%, 0.1);\n        --lumo-success-text-color: hsl(145, 85%, 47%);\n      }\n\n      html {\n        color: var(--lumo-body-text-color);\n        background-color: var(--lumo-base-color);\n      }\n\n      [theme~="dark"] {\n        color: var(--lumo-body-text-color);\n        background-color: var(--lumo-base-color);\n      }\n\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6 {\n        color: var(--lumo-header-text-color);\n      }\n\n      a {\n        color: var(--lumo-primary-text-color);\n      }\n\n      blockquote {\n        color: var(--lumo-secondary-text-color);\n      }\n\n      code,\n      pre {\n        background-color: var(--lumo-contrast-10pct);\n        border-radius: var(--lumo-border-radius-m);\n      }\n    </style>\n  </template>\n</dom-module><dom-module id="lumo-color-legacy">\n  <template>\n    <style include="lumo-color">\n      :host {\n        color: var(--lumo-body-text-color) !important;\n        background-color: var(--lumo-base-color) !important;\n      }\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(Rt.content);var Dt=document.createElement("template");Dt.innerHTML="<custom-style>\n  <style>\n    html {\n      --lumo-size-xs: 1.625rem;\n      --lumo-size-s: 1.875rem;\n      --lumo-size-m: 2.25rem;\n      --lumo-size-l: 2.75rem;\n      --lumo-size-xl: 3.5rem;\n\n      /* Icons */\n      --lumo-icon-size-s: 1.25em;\n      --lumo-icon-size-m: 1.5em;\n      --lumo-icon-size-l: 2.25em;\n      /* For backwards compatibility */\n      --lumo-icon-size: var(--lumo-icon-size-m);\n    }\n  </style>\n</custom-style>",document.head.appendChild(Dt.content);var Ft=document.createElement("template");Ft.innerHTML="<custom-style>\n  <style>\n    html {\n      /* Square */\n      --lumo-space-xs: 0.25rem;\n      --lumo-space-s: 0.5rem;\n      --lumo-space-m: 1rem;\n      --lumo-space-l: 1.5rem;\n      --lumo-space-xl: 2.5rem;\n\n      /* Wide */\n      --lumo-space-wide-xs: calc(var(--lumo-space-xs) / 2) var(--lumo-space-xs);\n      --lumo-space-wide-s: calc(var(--lumo-space-s) / 2) var(--lumo-space-s);\n      --lumo-space-wide-m: calc(var(--lumo-space-m) / 2) var(--lumo-space-m);\n      --lumo-space-wide-l: calc(var(--lumo-space-l) / 2) var(--lumo-space-l);\n      --lumo-space-wide-xl: calc(var(--lumo-space-xl) / 2) var(--lumo-space-xl);\n\n      /* Tall */\n      --lumo-space-tall-xs: var(--lumo-space-xs) calc(var(--lumo-space-xs) / 2);\n      --lumo-space-tall-s: var(--lumo-space-s) calc(var(--lumo-space-s) / 2);\n      --lumo-space-tall-m: var(--lumo-space-m) calc(var(--lumo-space-m) / 2);\n      --lumo-space-tall-l: var(--lumo-space-l) calc(var(--lumo-space-l) / 2);\n      --lumo-space-tall-xl: var(--lumo-space-xl) calc(var(--lumo-space-xl) / 2);\n    }\n  </style>\n</custom-style>",document.head.appendChild(Ft.content);var It=document.createElement("template");It.innerHTML="<custom-style>\n  <style>\n    html {\n      /* Border radius */\n      --lumo-border-radius-s: 0.25em; /* Checkbox, badge, date-picker year indicator, etc */\n      --lumo-border-radius-m: var(--lumo-border-radius, 0.25em); /* Button, text field, menu overlay, etc */\n      --lumo-border-radius-l: 0.5em; /* Dialog, notification, etc */\n      --lumo-border-radius: 0.25em; /* Deprecated */\n\n      /* Shadow */\n      --lumo-box-shadow-xs: 0 1px 4px -1px var(--lumo-shade-50pct);\n      --lumo-box-shadow-s: 0 2px 4px -1px var(--lumo-shade-20pct), 0 3px 12px -1px var(--lumo-shade-30pct);\n      --lumo-box-shadow-m: 0 2px 6px -1px var(--lumo-shade-20pct), 0 8px 24px -4px var(--lumo-shade-40pct);\n      --lumo-box-shadow-l: 0 3px 18px -2px var(--lumo-shade-20pct), 0 12px 48px -6px var(--lumo-shade-40pct);\n      --lumo-box-shadow-xl: 0 4px 24px -3px var(--lumo-shade-20pct), 0 18px 64px -8px var(--lumo-shade-40pct);\n\n      /* Clickable element cursor */\n      --lumo-clickable-cursor: default;\n    }\n  </style>\n</custom-style>",document.head.appendChild(It.content);var Ut=document.createElement("template");Ut.innerHTML='<custom-style>\n  <style>\n    html {\n      /* Font families */\n      --lumo-font-family: -apple-system, BlinkMacSystemFont, "Roboto", "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n\n      /* Font sizes */\n      --lumo-font-size-xxs: .75rem;\n      --lumo-font-size-xs: .8125rem;\n      --lumo-font-size-s: .875rem;\n      --lumo-font-size-m: 1rem;\n      --lumo-font-size-l: 1.125rem;\n      --lumo-font-size-xl: 1.375rem;\n      --lumo-font-size-xxl: 1.75rem;\n      --lumo-font-size-xxxl: 2.5rem;\n\n      /* Line heights */\n      --lumo-line-height-xs: 1.25;\n      --lumo-line-height-s: 1.375;\n      --lumo-line-height-m: 1.625;\n    }\n\n  </style>\n</custom-style><dom-module id="lumo-typography">\n  <template>\n    <style>\n      html {\n        font-family: var(--lumo-font-family);\n        font-size: var(--lumo-font-size, var(--lumo-font-size-m));\n        line-height: var(--lumo-line-height-m);\n        -webkit-text-size-adjust: 100%;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n\n      /* Can’t combine with the above selector because that doesn’t work in browsers without native shadow dom */\n      :host {\n        font-family: var(--lumo-font-family);\n        font-size: var(--lumo-font-size, var(--lumo-font-size-m));\n        line-height: var(--lumo-line-height-m);\n        -webkit-text-size-adjust: 100%;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n\n      small,\n      [theme~="font-size-s"] {\n        font-size: var(--lumo-font-size-s);\n        line-height: var(--lumo-line-height-s);\n      }\n\n      [theme~="font-size-xs"] {\n        font-size: var(--lumo-font-size-xs);\n        line-height: var(--lumo-line-height-xs);\n      }\n\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6 {\n        font-weight: 600;\n        line-height: var(--lumo-line-height-xs);\n        margin-top: 1.25em;\n      }\n\n      h1 {\n        font-size: var(--lumo-font-size-xxxl);\n        margin-bottom: 0.75em;\n      }\n\n      h2 {\n        font-size: var(--lumo-font-size-xxl);\n        margin-bottom: 0.5em;\n      }\n\n      h3 {\n        font-size: var(--lumo-font-size-xl);\n        margin-bottom: 0.5em;\n      }\n\n      h4 {\n        font-size: var(--lumo-font-size-l);\n        margin-bottom: 0.5em;\n      }\n\n      h5 {\n        font-size: var(--lumo-font-size-m);\n        margin-bottom: 0.25em;\n      }\n\n      h6 {\n        font-size: var(--lumo-font-size-xs);\n        margin-bottom: 0;\n        text-transform: uppercase;\n        letter-spacing: 0.03em;\n      }\n\n      p,\n      blockquote {\n        margin-top: 0.5em;\n        margin-bottom: 0.75em;\n      }\n\n      a {\n        text-decoration: none;\n      }\n\n      a:hover {\n        text-decoration: underline;\n      }\n\n      hr {\n        display: block;\n        align-self: stretch;\n        height: 1px;\n        border: 0;\n        padding: 0;\n        margin: var(--lumo-space-s) calc(var(--lumo-border-radius-m) / 2);\n        background-color: var(--lumo-contrast-10pct);\n      }\n\n      blockquote {\n        border-left: 2px solid var(--lumo-contrast-30pct);\n      }\n\n      b,\n      strong {\n        font-weight: 600;\n      }\n\n      /* RTL specific styles */\n\n      blockquote[dir="rtl"] {\n        border-left: none;\n        border-right: 2px solid var(--lumo-contrast-30pct);\n      }\n\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(Ut.content);var qt,Gt=document.createElement("template");Gt.innerHTML='<dom-module id="lumo-field-button">\n  <template>\n    <style>\n      [part$="button"] {\n        flex: none;\n        width: 1em;\n        height: 1em;\n        line-height: 1;\n        font-size: var(--lumo-icon-size-m);\n        text-align: center;\n        color: var(--lumo-contrast-60pct);\n        transition: 0.2s color;\n        cursor: var(--lumo-clickable-cursor);\n      }\n\n      :host(:not([readonly])) [part$="button"]:hover {\n        color: var(--lumo-contrast-90pct);\n      }\n\n      :host([disabled]) [part$="button"],\n      :host([readonly]) [part$="button"] {\n        color: var(--lumo-contrast-20pct);\n      }\n\n      [part$="button"]::before {\n        font-family: "lumo-icons";\n        display: block;\n      }\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(Gt.content);var jt=Q(qt||(qt=r(['<dom-module id="lumo-button" theme-for="vaadin-button">\n  <template>\n    <style>\n      :host {\n        /* Sizing */\n        --lumo-button-size: var(--lumo-size-m);\n        min-width: calc(var(--lumo-button-size) * 2);\n        height: var(--lumo-button-size);\n        padding: 0 calc(var(--lumo-button-size) / 3 + var(--lumo-border-radius) / 2);\n        margin: var(--lumo-space-xs) 0;\n        box-sizing: border-box;\n        /* Style */\n        font-family: var(--lumo-font-family);\n        font-size: var(--lumo-font-size-m);\n        font-weight: 500;\n        color: var(--_lumo-button-color, var(--lumo-primary-text-color));\n        background-color: var(--_lumo-button-background-color, var(--lumo-contrast-5pct));\n        border-radius: var(--lumo-border-radius);\n        cursor: default;\n        -webkit-tap-highlight-color: transparent;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n\n      /* Set only for the internal parts so we don’t affect the host vertical alignment */\n      [part="label"],\n      [part="prefix"],\n      [part="suffix"] {\n        line-height: var(--lumo-line-height-xs);\n      }\n\n      [part="label"] {\n        padding: calc(var(--lumo-button-size) / 6) 0;\n      }\n\n      :host([theme~="small"]) {\n        font-size: var(--lumo-font-size-s);\n        --lumo-button-size: var(--lumo-size-s);\n      }\n\n      :host([theme~="large"]) {\n        font-size: var(--lumo-font-size-l);\n        --lumo-button-size: var(--lumo-size-l);\n      }\n\n      /* This needs to be the last selector for it to take priority */\n      :host([disabled][disabled]) {\n        pointer-events: none;\n        color: var(--lumo-disabled-text-color);\n        background-color: var(--lumo-contrast-5pct);\n      }\n\n      /* For interaction states */\n      :host::before,\n      :host::after {\n        content: "";\n        /* We rely on the host always being relative */\n        position: absolute;\n        z-index: 1;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        background-color: currentColor;\n        border-radius: inherit;\n        opacity: 0;\n        transition: opacity 0.2s;\n        pointer-events: none;\n      }\n\n      /* Hover */\n\n      :host(:hover)::before {\n        opacity: 0.05;\n      }\n\n      /* Disable hover for touch devices */\n      @media (pointer: coarse) {\n        :host(:not([active]):hover)::before {\n          opacity: 0;\n        }\n      }\n\n      /* Active */\n\n      :host::after {\n        transition: opacity 1.4s, transform 0.1s;\n        filter: blur(8px);\n      }\n\n      :host([active])::before {\n        opacity: 0.1;\n        transition-duration: 0s;\n      }\n\n      :host([active])::after {\n        opacity: 0.1;\n        transition-duration: 0s, 0s;\n        transform: scale(0);\n      }\n\n      /* Keyboard focus */\n\n      :host([focus-ring]) {\n        box-shadow: 0 0 0 2px var(--lumo-primary-color-50pct);\n      }\n\n      /* Types (primary, tertiary, tertiary-inline */\n\n      :host([theme~="tertiary"]),\n      :host([theme~="tertiary-inline"]) {\n        background-color: transparent !important;\n        transition: opacity 0.2s;\n        min-width: 0;\n      }\n\n      :host([theme~="tertiary"])::before,\n      :host([theme~="tertiary-inline"])::before {\n        display: none;\n      }\n\n      :host([theme~="tertiary"]) {\n        padding: 0 calc(var(--lumo-button-size) / 6);\n      }\n\n      @media (hover: hover) {\n        :host([theme*="tertiary"]:not([active]):hover) {\n          opacity: 0.8;\n        }\n      }\n\n      :host([theme~="tertiary"][active]),\n      :host([theme~="tertiary-inline"][active]) {\n        opacity: 0.5;\n        transition-duration: 0s;\n      }\n\n      :host([theme~="tertiary-inline"]) {\n        margin: 0;\n        height: auto;\n        padding: 0;\n        line-height: inherit;\n        font-size: inherit;\n      }\n\n      :host([theme~="tertiary-inline"]) [part="label"] {\n        padding: 0;\n        overflow: visible;\n        line-height: inherit;\n      }\n\n      :host([theme~="primary"]) {\n        background-color: var(--_lumo-button-primary-background-color, var(--lumo-primary-color));\n        color: var(--_lumo-button-primary-color, var(--lumo-primary-contrast-color));\n        font-weight: 600;\n        min-width: calc(var(--lumo-button-size) * 2.5);\n      }\n\n      :host([theme~="primary"][disabled]) {\n        background-color: var(--lumo-primary-color-50pct);\n        color: var(--lumo-primary-contrast-color);\n      }\n\n      :host([theme~="primary"]:hover)::before {\n        opacity: 0.1;\n      }\n\n      :host([theme~="primary"][active])::before {\n        background-color: var(--lumo-shade-20pct);\n      }\n\n      @media (pointer: coarse) {\n        :host([theme~="primary"][active])::before {\n          background-color: var(--lumo-shade-60pct);\n        }\n\n        :host([theme~="primary"]:not([active]):hover)::before {\n          opacity: 0;\n        }\n      }\n\n      :host([theme~="primary"][active])::after {\n        opacity: 0.2;\n      }\n\n      /* Colors (success, error, contrast) */\n\n      :host([theme~="success"]) {\n        color: var(--lumo-success-text-color);\n      }\n\n      :host([theme~="success"][theme~="primary"]) {\n        background-color: var(--lumo-success-color);\n        color: var(--lumo-success-contrast-color);\n      }\n\n      :host([theme~="success"][theme~="primary"][disabled]) {\n        background-color: var(--lumo-success-color-50pct);\n      }\n\n      :host([theme~="error"]) {\n        color: var(--lumo-error-text-color);\n      }\n\n      :host([theme~="error"][theme~="primary"]) {\n        background-color: var(--lumo-error-color);\n        color: var(--lumo-error-contrast-color);\n      }\n\n      :host([theme~="error"][theme~="primary"][disabled]) {\n        background-color: var(--lumo-error-color-50pct);\n      }\n\n      :host([theme~="contrast"]) {\n        color: var(--lumo-contrast);\n      }\n\n      :host([theme~="contrast"][theme~="primary"]) {\n        background-color: var(--lumo-contrast);\n        color: var(--lumo-base-color);\n      }\n\n      :host([theme~="contrast"][theme~="primary"][disabled]) {\n        background-color: var(--lumo-contrast-50pct);\n      }\n\n      /* Icons */\n\n      [part] ::slotted(iron-icon) {\n        display: inline-block;\n        width: var(--lumo-icon-size-m);\n        height: var(--lumo-icon-size-m);\n      }\n\n      /* Vaadin icons are based on a 16x16 grid (unlike Lumo and Material icons with 24x24), so they look too big by default */\n      [part] ::slotted(iron-icon[icon^="vaadin:"]) {\n        padding: 0.25em;\n        box-sizing: border-box !important;\n      }\n\n      [part="prefix"] {\n        margin-left: -0.25em;\n        margin-right: 0.25em;\n      }\n\n      [part="suffix"] {\n        margin-left: 0.25em;\n        margin-right: -0.25em;\n      }\n\n      /* Icon-only */\n\n      :host([theme~="icon"]:not([theme~="tertiary-inline"])) {\n        min-width: var(--lumo-button-size);\n        padding-left: calc(var(--lumo-button-size) / 4);\n        padding-right: calc(var(--lumo-button-size) / 4);\n      }\n\n      :host([theme~="icon"]) [part="prefix"],\n      :host([theme~="icon"]) [part="suffix"] {\n        margin-left: 0;\n        margin-right: 0;\n      }\n\n      /* RTL specific styles */\n\n      :host([dir="rtl"]) [part="prefix"] {\n        margin-left: 0.25em;\n        margin-right: -0.25em;\n      }\n\n      :host([dir="rtl"]) [part="suffix"] {\n        margin-left: -0.25em;\n        margin-right: 0.25em;\n      }\n\n      :host([dir="rtl"][theme~="icon"]) [part="prefix"],\n      :host([dir="rtl"][theme~="icon"]) [part="suffix"] {\n        margin-left: 0;\n        margin-right: 0;\n      }\n    </style>\n  </template>\n</dom-module>'])));document.head.appendChild(jt.content);var Vt=function(e){return function(e){function t(){return d(this,t),u(this,t,arguments)}return o(t,e),i(t,null,[{key:"finalize",value:function(){var e=this;l(c(t),"finalize",this).call(this);var n=this.prototype._template,o=this.template&&this.template.parentElement&&this.template.parentElement.id===this.is,i=Object.getPrototypeOf(this.prototype)._template;i&&!o&&Array.from(i.content.querySelectorAll("style[include]")).forEach((function(t){e._includeStyle(t.getAttribute("include"),n)})),this._includeMatchingThemes(n)}},{key:"_includeMatchingThemes",value:function(e){var t=this,n=K.prototype.modules,o=!1,i=this.is+"-default-theme";Object.keys(n).sort((function(e,t){var n=0===e.indexOf("vaadin-"),o=0===t.indexOf("vaadin-"),i=["lumo-","material-"],a=i.filter((function(t){return 0===e.indexOf(t)})).length>0,r=i.filter((function(e){return 0===t.indexOf(e)})).length>0;return n!==o?n?-1:1:a!==r?a?-1:1:0})).forEach((function(a){if(a!==i){var r=n[a].getAttribute("theme-for");r&&r.split(" ").forEach((function(n){new RegExp("^"+n.split("*").join(".*")+"$").test(t.is)&&(o=!0,t._includeStyle(a,e))}))}})),!o&&n[i]&&this._includeStyle(i,e)}},{key:"_includeStyle",value:function(e,t){if(t&&!t.content.querySelector('style[include="'.concat(e,'"]'))){var n=document.createElement("style");n.setAttribute("include",e),t.content.appendChild(n)}}}])}(function(e){return function(e){function t(){return d(this,t),u(this,t,arguments)}return o(t,e),i(t,[{key:"attributeChangedCallback",value:function(e,n,o){l(c(t.prototype),"attributeChangedCallback",this).call(this,e,n,o),"theme"===e&&this._setTheme(o)}}],[{key:"properties",get:function(){return{theme:{type:String,readOnly:!0}}}}])}(e)}(e))},Wt=!1;window.addEventListener("keydown",(function(){Wt=!0}),{capture:!0}),window.addEventListener("mousedown",(function(){Wt=!1}),{capture:!0});var Xt,Yt=function(){return i((function e(){d(this,e)}),null,[{key:"detectScrollType",value:function(){var e=document.createElement("div");e.textContent="ABCD",e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e);var t="reverse";return e.scrollLeft>0?t="default":(e.scrollLeft=2,e.scrollLeft<2&&(t="negative")),document.body.removeChild(e),t}},{key:"getNormalizedScrollLeft",value:function(e,t,n){var o=n.scrollLeft;if("rtl"!==t||!e)return o;switch(e){case"negative":return n.scrollWidth-n.clientWidth+o;case"reverse":return n.scrollWidth-n.clientWidth-o}return o}},{key:"setNormalizedScrollLeft",value:function(e,t,n,o){if("rtl"===t&&e)switch(e){case"negative":n.scrollLeft=n.clientWidth-n.scrollWidth+o;break;case"reverse":n.scrollLeft=n.scrollWidth-n.clientWidth-o;break;default:n.scrollLeft=o}else n.scrollLeft=o}}])}(),Qt=[];new MutationObserver((function(){var e=Jt();Qt.forEach((function(t){Kt(t,e)}))})).observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]});var Kt=function(e,t){t?e.setAttribute("dir",t):e.removeAttribute("dir")},Jt=function(){return document.documentElement.getAttribute("dir")},Zt=/\/\*[\*!]\s+vaadin-dev-mode:start([\s\S]*)vaadin-dev-mode:end\s+\*\*\//i,$t=window.Vaadin&&window.Vaadin.Flow&&window.Vaadin.Flow.clients;function en(e,t){if("function"==typeof e){var n=Zt.exec(e.toString());if(n)try{e=new Function(n[1])}catch(e){console.log("vaadin-development-mode-detector: uncommentAndRun() failed",e)}return e(t)}}window.Vaadin=window.Vaadin||{};var tn=function(e,t){if(window.Vaadin.developmentMode)return en(e,t)};function nn(){}void 0===window.Vaadin.developmentMode&&(window.Vaadin.developmentMode=function(){try{return!!localStorage.getItem("vaadin.developmentmode.force")||["localhost","127.0.0.1"].indexOf(window.location.hostname)>=0&&($t?!($t&&Object.keys($t).map((function(e){return $t[e]})).filter((function(e){return e.productionMode})).length>0):!en((function(){return!0})))}catch(e){return!1}}());var on,an=function(){return tn(nn)};window.Vaadin||(window.Vaadin={}),window.Vaadin.registrations=window.Vaadin.registrations||[],window.Vaadin.developmentModeCallback=window.Vaadin.developmentModeCallback||{},window.Vaadin.developmentModeCallback["vaadin-usage-statistics"]=function(){an&&an()};var rn,sn,ln=new Set,cn=function(e){return function(e){function t(){var e;return d(this,t),e=u(this,t),null===document.doctype&&console.warn('Vaadin components require the "standards mode" declaration. Please add <!DOCTYPE html> to the HTML document.'),e}return o(t,e),i(t,null,[{key:"finalize",value:function(){l(c(t),"finalize",this).call(this);var e=this.is;e&&!ln.has(e)&&(window.Vaadin.registrations.push(this),ln.add(e),window.Vaadin.developmentModeCallback&&(on=J.debounce(on,Z,(function(){window.Vaadin.developmentModeCallback["vaadin-usage-statistics"]()})),$(on)))}}])}(function(e){return function(e){function t(){return d(this,t),u(this,t,arguments)}return o(t,e),i(t,[{key:"connectedCallback",value:function(){l(c(t.prototype),"connectedCallback",this).call(this),this.hasAttribute("dir")||(this.__subscribe(),Kt(this,Jt()))}},{key:"attributeChangedCallback",value:function(e,n,o){if(l(c(t.prototype),"attributeChangedCallback",this).call(this,e,n,o),"dir"===e){var i=o===Jt()&&-1===Qt.indexOf(this),a=!o&&n&&-1===Qt.indexOf(this),r=o!==Jt()&&n===Jt();i||a?(this.__subscribe(),Kt(this,Jt())):r&&this.__subscribe(!1)}}},{key:"disconnectedCallback",value:function(){l(c(t.prototype),"disconnectedCallback",this).call(this),this.__subscribe(!1),this.removeAttribute("dir")}},{key:"__subscribe",value:function(){arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?Qt.indexOf(this)>-1&&Qt.splice(Qt.indexOf(this),1):-1===Qt.indexOf(this)&&Qt.push(this)}},{key:"__getNormalizedScrollLeft",value:function(e){return Yt.getNormalizedScrollLeft(Xt,this.getAttribute("dir")||"ltr",e)}},{key:"__setNormalizedScrollLeft",value:function(e,t){return Yt.setNormalizedScrollLeft(Xt,this.getAttribute("dir")||"ltr",e,t)}}],[{key:"properties",get:function(){return{dir:{type:String,readOnly:!0}}}},{key:"finalize",value:function(){l(c(t),"finalize",this).call(this),Xt||(Xt=Yt.detectScrollType())}}])}(e)}(e))},dn=function(e){function t(){return d(this,t),u(this,t,arguments)}return o(t,e),i(t,[{key:"ready",value:function(){l(c(t.prototype),"ready",this).call(this),this.setAttribute("role","button"),this.$.button.setAttribute("role","presentation"),this._addActiveListeners(),window.ShadyDOM&&window.ShadyDOM.flush()}},{key:"disconnectedCallback",value:function(){l(c(t.prototype),"disconnectedCallback",this).call(this),this.hasAttribute("active")&&this.removeAttribute("active")}},{key:"_addActiveListeners",value:function(){var e=this;ee(this,"down",(function(){return!e.disabled&&e.setAttribute("active","")})),ee(this,"up",(function(){return e.removeAttribute("active")})),this.addEventListener("keydown",(function(t){return!e.disabled&&[13,32].indexOf(t.keyCode)>=0&&e.setAttribute("active","")})),this.addEventListener("keyup",(function(){return e.removeAttribute("active")})),this.addEventListener("blur",(function(){return e.removeAttribute("active")}))}},{key:"focusElement",get:function(){return this.$.button}}],[{key:"template",get:function(){return Q(rn||(rn=r(['\n    <style>\n      :host {\n        display: inline-block;\n        position: relative;\n        outline: none;\n        white-space: nowrap;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      /* Ensure the button is always aligned on the baseline */\n      .vaadin-button-container::before {\n        content: "\\2003";\n        display: inline-block;\n        width: 0;\n      }\n\n      .vaadin-button-container {\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        text-align: center;\n        width: 100%;\n        height: 100%;\n        min-height: inherit;\n        text-shadow: inherit;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        user-select: none;\n      }\n\n      [part="prefix"],\n      [part="suffix"] {\n        flex: none;\n      }\n\n      [part="label"] {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n\n      #button {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        width: 100%;\n        height: 100%;\n        opacity: 0;\n        cursor: inherit;\n      }\n    </style>\n    <div class="vaadin-button-container">\n      <div part="prefix">\n        <slot name="prefix"></slot>\n      </div>\n      <div part="label">\n        <slot></slot>\n      </div>\n      <div part="suffix">\n        <slot name="suffix"></slot>\n      </div>\n    </div>\n    <button id="button" type="button"></button>\n'],['\n    <style>\n      :host {\n        display: inline-block;\n        position: relative;\n        outline: none;\n        white-space: nowrap;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      /* Ensure the button is always aligned on the baseline */\n      .vaadin-button-container::before {\n        content: "\\\\2003";\n        display: inline-block;\n        width: 0;\n      }\n\n      .vaadin-button-container {\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        text-align: center;\n        width: 100%;\n        height: 100%;\n        min-height: inherit;\n        text-shadow: inherit;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        user-select: none;\n      }\n\n      [part="prefix"],\n      [part="suffix"] {\n        flex: none;\n      }\n\n      [part="label"] {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n\n      #button {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        width: 100%;\n        height: 100%;\n        opacity: 0;\n        cursor: inherit;\n      }\n    </style>\n    <div class="vaadin-button-container">\n      <div part="prefix">\n        <slot name="prefix"></slot>\n      </div>\n      <div part="label">\n        <slot></slot>\n      </div>\n      <div part="suffix">\n        <slot name="suffix"></slot>\n      </div>\n    </div>\n    <button id="button" type="button"></button>\n'])))}},{key:"is",get:function(){return"vaadin-button"}},{key:"version",get:function(){return"2.4.0"}}])}(cn(function(e){function t(){return d(this,t),u(this,t,arguments)}return o(t,e),i(t,[{key:"_keyboardActive",get:function(){return Wt}},{key:"ready",value:function(){var e=this;this.addEventListener("focusin",(function(t){t.composedPath()[0]===e?e.contains(t.relatedTarget)||e._focus():-1===t.composedPath().indexOf(e.focusElement)||e.disabled||e._setFocused(!0)})),this.addEventListener("focusout",(function(t){return e._setFocused(!1)})),l(c(t.prototype),"ready",this).call(this);var n=function(e){e.composed||e.target.dispatchEvent(new CustomEvent(e.type,{bubbles:!0,composed:!0,cancelable:!1}))};this.shadowRoot.addEventListener("focusin",n),this.shadowRoot.addEventListener("focusout",n),this.addEventListener("keydown",(function(t){if(!t.defaultPrevented&&9===t.keyCode)if(t.shiftKey)e._isShiftTabbing=!0,HTMLElement.prototype.focus.apply(e),e._setFocused(!1),setTimeout((function(){return e._isShiftTabbing=!1}),0);else{var n=window.navigator.userAgent.match(/Firefox\/(\d\d\.\d)/);if(n&&parseFloat(n[1])>=63&&parseFloat(n[1])<66&&e.parentNode&&e.nextSibling){var o=document.createElement("input");o.style.position="absolute",o.style.opacity="0",o.tabIndex=e.tabIndex,e.parentNode.insertBefore(o,e.nextSibling),o.focus(),o.addEventListener("focusout",(function(){return e.parentNode.removeChild(o)}))}}})),this.autofocus&&!this.disabled&&window.requestAnimationFrame((function(){e._focus(),e._setFocused(!0),e.setAttribute("focus-ring","")}))}},{key:"disconnectedCallback",value:function(){l(c(t.prototype),"disconnectedCallback",this).call(this),this.hasAttribute("focused")&&this._setFocused(!1)}},{key:"_setFocused",value:function(e){e?this.setAttribute("focused",""):this.removeAttribute("focused"),e&&Wt?this.setAttribute("focus-ring",""):this.removeAttribute("focus-ring")}},{key:"focusElement",get:function(){return window.console.warn("Please implement the 'focusElement' property in <".concat(this.localName,">")),this}},{key:"_focus",value:function(){this.focusElement&&!this._isShiftTabbing&&(this.focusElement.focus(),this._setFocused(!0))}},{key:"focus",value:function(){this.focusElement&&!this.disabled&&(this.focusElement.focus(),this._setFocused(!0))}},{key:"blur",value:function(){this.focusElement&&(this.focusElement.blur(),this._setFocused(!1))}},{key:"_disabledChanged",value:function(e){this.focusElement.disabled=e,e?(this.blur(),this._previousTabIndex=this.tabindex,this.tabindex=-1,this.setAttribute("aria-disabled","true")):(void 0!==this._previousTabIndex&&(this.tabindex=this._previousTabIndex),this.removeAttribute("aria-disabled"))}},{key:"_tabindexChanged",value:function(e){void 0!==e&&(this.focusElement.tabIndex=e),this.disabled&&this.tabindex&&(-1!==this.tabindex&&(this._previousTabIndex=this.tabindex),this.tabindex=e=void 0),window.ShadyDOM&&this.setProperties({tabIndex:e,tabindex:e})}},{key:"click",value:function(){this.disabled||l(c(t.prototype),"click",this).call(this)}}],[{key:"properties",get:function(){return{autofocus:{type:Boolean},_previousTabIndex:{type:Number},disabled:{type:Boolean,observer:"_disabledChanged",reflectToAttribute:!0},_isShiftTabbing:{type:Boolean}}}}])}(function(e){return function(e){function t(){return d(this,t),u(this,t,arguments)}return o(t,e),i(t,null,[{key:"properties",get:function(){var e={tabindex:{type:Number,value:0,reflectToAttribute:!0,observer:"_tabindexChanged"}};return window.ShadyDOM&&(e.tabIndex=e.tabindex),e}}])}(e)}(Vt(te(ne))))));customElements.define(dn.is,dn);var un=Q(sn||(sn=r(['<dom-module id="lumo-progress-bar" theme-for="vaadin-progress-bar">\n  <template>\n    <style>\n      :host {\n        height: calc(var(--lumo-size-l) / 10);\n        margin: var(--lumo-space-s) 0;\n      }\n\n      [part="bar"] {\n        border-radius: var(--lumo-border-radius);\n        background-color: var(--lumo-contrast-10pct);\n      }\n\n      [part="value"] {\n        border-radius: var(--lumo-border-radius);\n        background-color: var(--lumo-primary-color);\n        /* Use width instead of transform to preserve border radius */\n        transform: none;\n        width: calc(var(--vaadin-progress-value) * 100%);\n        will-change: width;\n        transition: 0.1s width linear;\n      }\n\n      /* Indeterminate mode */\n\n      :host([indeterminate]) [part="value"] {\n        --lumo-progress-indeterminate-progress-bar-background: linear-gradient(to right, var(--lumo-primary-color-10pct) 10%, var(--lumo-primary-color));\n        --lumo-progress-indeterminate-progress-bar-background-reverse: linear-gradient(to left, var(--lumo-primary-color-10pct) 10%, var(--lumo-primary-color));\n        width: 100%;\n        background-color: transparent !important;\n        background-image: var(--lumo-progress-indeterminate-progress-bar-background);\n        opacity: 0.75;\n        will-change: transform;\n        animation: vaadin-progress-indeterminate 1.6s infinite cubic-bezier(.645, .045, .355, 1);\n      }\n\n      @keyframes vaadin-progress-indeterminate {\n        0% {\n          transform: scaleX(0.015);\n          transform-origin: 0% 0%;\n        }\n\n        25% {\n          transform: scaleX(0.4);\n        }\n\n        50% {\n          transform: scaleX(0.015);\n          transform-origin: 100% 0%;\n          background-image: var(--lumo-progress-indeterminate-progress-bar-background);\n        }\n\n        50.1% {\n          transform: scaleX(0.015);\n          transform-origin: 100% 0%;\n          background-image: var(--lumo-progress-indeterminate-progress-bar-background-reverse);\n        }\n\n        75% {\n          transform: scaleX(0.4);\n        }\n\n        100% {\n          transform: scaleX(0.015);\n          transform-origin: 0% 0%;\n          background-image: var(--lumo-progress-indeterminate-progress-bar-background-reverse);\n        }\n      }\n\n      :host(:not([aria-valuenow])) [part="value"]::before,\n      :host([indeterminate]) [part="value"]::before {\n        content: "";\n        display: block;\n        width: 100%;\n        height: 100%;\n        border-radius: inherit;\n        background-color: var(--lumo-primary-color);\n        will-change: opacity;\n        animation: vaadin-progress-pulse3 1.6s infinite cubic-bezier(.645, .045, .355, 1);\n      }\n\n      @keyframes vaadin-progress-pulse3 {\n        0% { opacity: 1; }\n        10% { opacity: 0; }\n        40% { opacity: 0; }\n        50% { opacity: 1; }\n        50.1% { opacity: 1; }\n        60% { opacity: 0; }\n        90% { opacity: 0; }\n        100% { opacity: 1; }\n      }\n\n      /* Contrast color */\n\n      :host([theme~="contrast"]) [part="value"],\n      :host([theme~="contrast"]) [part="value"]::before {\n        background-color: var(--lumo-contrast-80pct);\n        --lumo-progress-indeterminate-progress-bar-background: linear-gradient(to right, var(--lumo-contrast-5pct) 10%, var(--lumo-contrast-80pct));\n        --lumo-progress-indeterminate-progress-bar-background-reverse: linear-gradient(to left, var(--lumo-contrast-5pct) 10%, var(--lumo-contrast-60pct));\n      }\n\n      /* Error color */\n\n      :host([theme~="error"]) [part="value"],\n      :host([theme~="error"]) [part="value"]::before {\n        background-color: var(--lumo-error-color);\n        --lumo-progress-indeterminate-progress-bar-background: linear-gradient(to right, var(--lumo-error-color-10pct) 10%, var(--lumo-error-color));\n        --lumo-progress-indeterminate-progress-bar-background-reverse: linear-gradient(to left, var(--lumo-error-color-10pct) 10%, var(--lumo-error-color));\n      }\n\n      /* Primary color */\n\n      :host([theme~="success"]) [part="value"],\n      :host([theme~="success"]) [part="value"]::before {\n        background-color: var(--lumo-success-color);\n        --lumo-progress-indeterminate-progress-bar-background: linear-gradient(to right, var(--lumo-success-color-10pct) 10%, var(--lumo-success-color));\n        --lumo-progress-indeterminate-progress-bar-background-reverse: linear-gradient(to left, var(--lumo-success-color-10pct) 10%, var(--lumo-success-color));\n      }\n\n      /* RTL specific styles */\n\n      :host([indeterminate][dir="rtl"]) [part="value"] {\n        --lumo-progress-indeterminate-progress-bar-background: linear-gradient(to left, var(--lumo-primary-color-10pct) 10%, var(--lumo-primary-color));\n        --lumo-progress-indeterminate-progress-bar-background-reverse: linear-gradient(to right, var(--lumo-primary-color-10pct) 10%, var(--lumo-primary-color));\n        animation: vaadin-progress-indeterminate-rtl 1.6s infinite cubic-bezier(.355, .045, .645, 1);\n      }\n\n      :host(:not([aria-valuenow])[dir="rtl"]) [part="value"]::before,\n      :host([indeterminate][dir="rtl"]) [part="value"]::before {\n        animation: vaadin-progress-pulse3 1.6s infinite cubic-bezier(.355, .045, .645, 1);\n      }\n\n      @keyframes vaadin-progress-indeterminate-rtl {\n        0% {\n          transform: scaleX(0.015);\n          transform-origin: 100% 0%;\n        }\n\n        25% {\n          transform: scaleX(0.4);\n        }\n\n        50% {\n          transform: scaleX(0.015);\n          transform-origin: 0% 0%;\n          background-image: var(--lumo-progress-indeterminate-progress-bar-background);\n        }\n\n        50.1% {\n          transform: scaleX(0.015);\n          transform-origin: 0% 0%;\n          background-image: var(--lumo-progress-indeterminate-progress-bar-background-reverse);\n        }\n\n        75% {\n          transform: scaleX(0.4);\n        }\n\n        100% {\n          transform: scaleX(0.015);\n          transform-origin: 100% 0%;\n          background-image: var(--lumo-progress-indeterminate-progress-bar-background-reverse);\n        }\n      }\n\n      /* Contrast color */\n\n      :host([theme~="contrast"][dir="rtl"]) [part="value"],\n      :host([theme~="contrast"][dir="rtl"]) [part="value"]::before {\n        --lumo-progress-indeterminate-progress-bar-background: linear-gradient(to left, var(--lumo-contrast-5pct) 10%, var(--lumo-contrast-80pct));\n        --lumo-progress-indeterminate-progress-bar-background-reverse: linear-gradient(to right, var(--lumo-contrast-5pct) 10%, var(--lumo-contrast-60pct));\n      }\n\n      /* Error color */\n\n      :host([theme~="error"][dir="rtl"]) [part="value"],\n      :host([theme~="error"][dir="rtl"]) [part="value"]::before {\n        --lumo-progress-indeterminate-progress-bar-background: linear-gradient(to left, var(--lumo-error-color-10pct) 10%, var(--lumo-error-color));\n        --lumo-progress-indeterminate-progress-bar-background-reverse: linear-gradient(to right, var(--lumo-error-color-10pct) 10%, var(--lumo-error-color));\n      }\n\n      /* Primary color */\n\n      :host([theme~="success"][dir="rtl"]) [part="value"],\n      :host([theme~="success"][dir="rtl"]) [part="value"]::before {\n        --lumo-progress-indeterminate-progress-bar-background: linear-gradient(to left, var(--lumo-success-color-10pct) 10%, var(--lumo-success-color));\n        --lumo-progress-indeterminate-progress-bar-background-reverse: linear-gradient(to right, var(--lumo-success-color-10pct) 10%, var(--lumo-success-color));\n      }\n    </style>\n  </template>\n</dom-module><custom-style>\n  <style>\n    @keyframes vaadin-progress-pulse3 {\n      0% { opacity: 1; }\n      10% { opacity: 0; }\n      40% { opacity: 0; }\n      50% { opacity: 1; }\n      50.1% { opacity: 1; }\n      60% { opacity: 0; }\n      90% { opacity: 0; }\n      100% { opacity: 1; }\n    }\n  </style>\n</custom-style>'])));document.head.appendChild(un.content);var hn,pn,mn=function(e){function t(){return d(this,t),u(this,t,arguments)}return o(t,e),i(t,null,[{key:"template",get:function(){return Q(hn||(hn=r(['\n    <style>\n      :host {\n        display: block;\n        width: 100%; /* prevent collapsing inside non-stretching column flex */\n        height: 8px;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      [part="bar"] {\n        height: 100%;\n      }\n\n      [part="value"] {\n        height: 100%;\n        transform-origin: 0 50%;\n        transform: scaleX(var(--vaadin-progress-value));\n      }\n\n      /* RTL specific styles */\n\n      :host([dir="rtl"]) [part="value"] {\n        transform-origin: 100% 50%;\n      }\n    </style>\n\n    <div part="bar">\n      <div part="value"></div>\n    </div>\n'])))}},{key:"is",get:function(){return"vaadin-progress-bar"}},{key:"version",get:function(){return"1.3.0"}}])}(cn(Vt(function(e){return function(e){function t(){return d(this,t),u(this,t,arguments)}return o(t,e),i(t,[{key:"ready",value:function(){l(c(t.prototype),"ready",this).call(this),this.setAttribute("role","progressbar")}},{key:"_normalizedValueChanged",value:function(e,t,n){var o=this._normalizeValue(e,t,n);this.style.setProperty("--vaadin-progress-value",o),this.updateStyles({"--vaadin-progress-value":String(o)})}},{key:"_valueChanged",value:function(e,t){this.setAttribute("aria-valuenow",e)}},{key:"_minChanged",value:function(e,t){this.setAttribute("aria-valuemin",e)}},{key:"_maxChanged",value:function(e,t){this.setAttribute("aria-valuemax",e)}},{key:"_normalizeValue",value:function(e,t,n){var o;return e||0==e?t>=n?o=1:(o=(e-t)/(n-t),o=Math.min(Math.max(o,0),1)):o=0,o}}],[{key:"properties",get:function(){return{value:{type:Number,observer:"_valueChanged"},min:{type:Number,value:0,observer:"_minChanged"},max:{type:Number,value:1,observer:"_maxChanged"},indeterminate:{type:Boolean,value:!1,reflectToAttribute:!0}}}},{key:"observers",get:function(){return["_normalizedValueChanged(value, min, max)"]}}])}(e)}(ne))));customElements.define(mn.is,mn);var vn=Q(pn||(pn=r(['<dom-module id="lumo-upload" theme-for="vaadin-upload">\n  <template>\n    <style>\n      :host {\n        line-height: var(--lumo-line-height-m);\n      }\n\n      :host(:not([nodrop])) {\n        overflow: hidden;\n        border: 1px dashed var(--lumo-contrast-20pct);\n        border-radius: var(--lumo-border-radius);\n        padding: var(--lumo-space-m);\n        transition: background-color 0.6s, border-color 0.6s;\n      }\n\n      [part="primary-buttons"] > * {\n        display: inline-block;\n        white-space: nowrap;\n      }\n\n      [part="drop-label"] {\n        display: inline-block;\n        white-space: normal;\n        padding: 0 var(--lumo-space-s);\n        color: var(--lumo-secondary-text-color);\n        font-family: var(--lumo-font-family);\n      }\n\n      :host([dragover-valid]) {\n        border-color: var(--lumo-primary-color-50pct);\n        background: var(--lumo-primary-color-10pct);\n        transition: background-color 0.1s, border-color 0.1s;\n      }\n\n      :host([dragover-valid]) [part="drop-label"] {\n        color: var(--lumo-primary-text-color);\n      }\n\n      :host([max-files-reached]) [part=\'drop-label\'] {\n        color: var(--lumo-disabled-text-color);\n      }\n\n      [part="drop-label-icon"] {\n        display: inline-block;\n      }\n\n      [part="drop-label-icon"]::before {\n        content: var(--lumo-icons-upload);\n        font-family: lumo-icons;\n        font-size: var(--lumo-icon-size-m);\n        line-height: 1;\n        vertical-align: -.25em;\n      }\n    </style>\n  </template>\n</dom-module><dom-module id="lumo-upload-file" theme-for="vaadin-upload-file">\n  <template>\n    <style include="lumo-field-button">\n      :host {\n        padding: var(--lumo-space-s) 0;\n      }\n\n      :host(:not(:first-child)) {\n        border-top: 1px solid var(--lumo-contrast-10pct);\n      }\n\n      [part="row"] {\n        display: flex;\n        align-items: baseline;\n        justify-content: space-between;\n      }\n\n      [part="status"],\n      [part="error"] {\n        color: var(--lumo-secondary-text-color);\n        font-size: var(--lumo-font-size-s);\n      }\n\n      [part="info"] {\n        display: flex;\n        align-items: baseline;\n        flex: auto;\n      }\n\n      [part="meta"] {\n        width: 0.001px;\n        flex: 1 1 auto;\n      }\n\n      [part="name"] {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n\n      [part="commands"] {\n        display: flex;\n        align-items: baseline;\n        flex: none;\n      }\n\n      [part="done-icon"],\n      [part="warning-icon"] {\n        margin-right: var(--lumo-space-xs);\n      }\n\n      /* When both icons are hidden, let us keep space for one */\n      [part="done-icon"][hidden] + [part="warning-icon"][hidden] {\n        display: block !important;\n        visibility: hidden;\n      }\n\n      [part="done-icon"],\n      [part="warning-icon"] {\n        font-size: var(--lumo-icon-size-m);\n        font-family: \'lumo-icons\';\n        line-height: 1;\n      }\n\n      [part="start-button"],\n      [part="retry-button"],\n      [part="clear-button"] {\n        flex: none;\n        margin-left: var(--lumo-space-xs);\n      }\n\n      [part="done-icon"]::before,\n      [part="warning-icon"]::before,\n      [part="start-button"]::before,\n      [part="retry-button"]::before,\n      [part="clear-button"]::before {\n        vertical-align: -.25em;\n      }\n\n      [part="done-icon"]::before {\n        content: var(--lumo-icons-checkmark);\n        color: var(--lumo-primary-text-color);\n      }\n\n      [part="warning-icon"]::before {\n        content: var(--lumo-icons-error);\n        color: var(--lumo-error-text-color);\n      }\n\n      [part="start-button"]::before {\n        content: var(--lumo-icons-play);\n      }\n\n      [part="retry-button"]::before {\n        content: var(--lumo-icons-reload);\n      }\n\n      [part="clear-button"]::before {\n        content: var(--lumo-icons-cross);\n      }\n\n      [part="error"] {\n        color: var(--lumo-error-text-color);\n      }\n\n      [part="progress"] {\n        width: auto;\n        margin-left: calc(var(--lumo-icon-size-m) + var(--lumo-space-xs));\n        margin-right: calc(var(--lumo-icon-size-m) + var(--lumo-space-xs));\n      }\n\n      [part="progress"][complete],\n      [part="progress"][error] {\n        display: none;\n      }\n\n    </style>\n  </template>\n</dom-module>'])));document.head.appendChild(vn.content);var gn,fn=document.createElement("template");fn.innerHTML="<custom-style>\n  <style>\n    @font-face {\n      font-family: 'vaadin-upload-icons';\n      src: url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAasAAsAAAAABmAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABCAAAAGAAAABgDxIF5mNtYXAAAAFoAAAAVAAAAFQXVtKMZ2FzcAAAAbwAAAAIAAAACAAAABBnbHlmAAABxAAAAfQAAAH0bBJxYWhlYWQAAAO4AAAANgAAADYPD267aGhlYQAAA/AAAAAkAAAAJAfCA8tobXR4AAAEFAAAACgAAAAoHgAAx2xvY2EAAAQ8AAAAFgAAABYCSgHsbWF4cAAABFQAAAAgAAAAIAAOADVuYW1lAAAEdAAAAhYAAAIWmmcHf3Bvc3QAAAaMAAAAIAAAACAAAwAAAAMDtwGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAA6QUDwP/AAEADwABAAAAAAQAAAAAAAAAAAAAAIAAAAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEADgAAAAKAAgAAgACAAEAIOkF//3//wAAAAAAIOkA//3//wAB/+MXBAADAAEAAAAAAAAAAAAAAAEAAf//AA8AAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAgAA/8AEAAPAABkAMgAAEz4DMzIeAhczLgMjIg4CBycRIScFIRcOAyMiLgInIx4DMzI+AjcXphZGWmo6SH9kQwyADFiGrmJIhXJbIEYBAFoDWv76YBZGXGw8Rn5lRQyADFmIrWBIhHReIkYCWjJVPSIyVnVDXqN5RiVEYTxG/wBa2loyVT0iMlZ1Q16jeUYnRWE5RgAAAAABAIAAAAOAA4AAAgAAExEBgAMAA4D8gAHAAAAAAwAAAAAEAAOAAAIADgASAAAJASElIiY1NDYzMhYVFAYnETMRAgD+AAQA/gAdIyMdHSMjXYADgPyAgCMdHSMjHR0jwAEA/wAAAQANADMD5gNaAAUAACUBNwUBFwHT/jptATMBppMzAU2a4AIgdAAAAAEAOv/6A8YDhgALAAABJwkBBwkBFwkBNwEDxoz+xv7GjAFA/sCMAToBOoz+wAL6jP7AAUCM/sb+xowBQP7AjAE6AAAAAwAA/8AEAAPAAAcACwASAAABFSE1IREhEQEjNTMJAjMRIRECwP6A/sAEAP0AgIACQP7A/sDAAQABQICA/oABgP8AgAHAAUD+wP6AAYAAAAABAAAAAQAAdhiEdV8PPPUACwQAAAAAANX4FR8AAAAA1fgVHwAA/8AEAAPAAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAQAAAEAAAAAAAAAAAAAAAAAAAAKBAAAAAAAAAAAAAAAAgAAAAQAAAAEAACABAAAAAQAAA0EAAA6BAAAAAAAAAAACgAUAB4AagB4AJwAsADSAPoAAAABAAAACgAzAAMAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAADgCuAAEAAAAAAAEAEwAAAAEAAAAAAAIABwDMAAEAAAAAAAMAEwBaAAEAAAAAAAQAEwDhAAEAAAAAAAUACwA5AAEAAAAAAAYAEwCTAAEAAAAAAAoAGgEaAAMAAQQJAAEAJgATAAMAAQQJAAIADgDTAAMAAQQJAAMAJgBtAAMAAQQJAAQAJgD0AAMAAQQJAAUAFgBEAAMAAQQJAAYAJgCmAAMAAQQJAAoANAE0dmFhZGluLXVwbG9hZC1pY29ucwB2AGEAYQBkAGkAbgAtAHUAcABsAG8AYQBkAC0AaQBjAG8AbgBzVmVyc2lvbiAxLjAAVgBlAHIAcwBpAG8AbgAgADEALgAwdmFhZGluLXVwbG9hZC1pY29ucwB2AGEAYQBkAGkAbgAtAHUAcABsAG8AYQBkAC0AaQBjAG8AbgBzdmFhZGluLXVwbG9hZC1pY29ucwB2AGEAYQBkAGkAbgAtAHUAcABsAG8AYQBkAC0AaQBjAG8AbgBzUmVndWxhcgBSAGUAZwB1AGwAYQBydmFhZGluLXVwbG9hZC1pY29ucwB2AGEAYQBkAGkAbgAtAHUAcABsAG8AYQBkAC0AaQBjAG8AbgBzRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4ARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAASQBjAG8ATQBvAG8AbgAuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==) format('woff');\n      font-weight: normal;\n      font-style: normal;\n    }\n  </style>\n</custom-style>",document.head.appendChild(fn.content);var bn,yn=function(e){function t(){return d(this,t),u(this,t,arguments)}return o(t,e),i(t,[{key:"_fileAborted",value:function(e){e&&this._remove()}},{key:"_remove",value:function(){this.dispatchEvent(new CustomEvent("file-remove",{detail:{file:this.file},bubbles:!0,composed:!0}))}},{key:"_formatProgressValue",value:function(e){return e/100}},{key:"_fireFileEvent",value:function(e){return e.preventDefault(),this.dispatchEvent(new CustomEvent(e.target.getAttribute("file-event"),{detail:{file:this.file},bubbles:!0,composed:!0}))}},{key:"_toggleHostAttribute",value:function(e,t){var n=Boolean(e);this.hasAttribute(t)!==n&&(n?this.setAttribute(t,""):this.removeAttribute(t))}}],[{key:"template",get:function(){return Q(gn||(gn=r(['\n    <style>\n      :host {\n        display: block;\n      }\n\n      [hidden] {\n        display: none;\n      }\n    </style>\n\n    <div part="row">\n      <div part="info">\n        <div part="done-icon" hidden$="[[!file.complete]]"></div>\n        <div part="warning-icon" hidden$="[[!file.error]]"></div>\n\n        <div part="meta">\n          <div part="name" id="name">[[file.name]]</div>\n          <div part="status" hidden$="[[!file.status]]" id="status">[[file.status]]</div>\n          <div part="error" id="error" hidden$="[[!file.error]]">[[file.error]]</div>\n        </div>\n      </div>\n      <div part="commands">\n        <div part="start-button" file-event="file-start" on-click="_fireFileEvent" hidden$="[[!file.held]]"></div>\n        <div part="retry-button" file-event="file-retry" on-click="_fireFileEvent" hidden$="[[!file.error]]"></div>\n        <div part="clear-button" file-event="file-abort" on-click="_fireFileEvent"></div>\n      </div>\n    </div>\n\n    <vaadin-progress-bar part="progress" id="progress" value$="[[_formatProgressValue(file.progress)]]" error$="[[file.error]]" indeterminate$="[[file.indeterminate]]" uploading$="[[file.uploading]]" complete$="[[file.complete]]">\n    </vaadin-progress-bar>\n'],['\n    <style>\n      :host {\n        display: block;\n      }\n\n      [hidden] {\n        display: none;\n      }\n    </style>\n\n    <div part="row">\n      <div part="info">\n        <div part="done-icon" hidden\\$="[[!file.complete]]"></div>\n        <div part="warning-icon" hidden\\$="[[!file.error]]"></div>\n\n        <div part="meta">\n          <div part="name" id="name">[[file.name]]</div>\n          <div part="status" hidden\\$="[[!file.status]]" id="status">[[file.status]]</div>\n          <div part="error" id="error" hidden\\$="[[!file.error]]">[[file.error]]</div>\n        </div>\n      </div>\n      <div part="commands">\n        <div part="start-button" file-event="file-start" on-click="_fireFileEvent" hidden\\$="[[!file.held]]"></div>\n        <div part="retry-button" file-event="file-retry" on-click="_fireFileEvent" hidden\\$="[[!file.error]]"></div>\n        <div part="clear-button" file-event="file-abort" on-click="_fireFileEvent"></div>\n      </div>\n    </div>\n\n    <vaadin-progress-bar part="progress" id="progress" value\\$="[[_formatProgressValue(file.progress)]]" error\\$="[[file.error]]" indeterminate\\$="[[file.indeterminate]]" uploading\\$="[[file.uploading]]" complete\\$="[[file.complete]]">\n    </vaadin-progress-bar>\n'])))}},{key:"is",get:function(){return"vaadin-upload-file"}},{key:"properties",get:function(){return{file:Object}}},{key:"observers",get:function(){return["_fileAborted(file.abort)",'_toggleHostAttribute(file.error, "error")','_toggleHostAttribute(file.indeterminate, "indeterminate")','_toggleHostAttribute(file.uploading, "uploading")','_toggleHostAttribute(file.complete, "complete")']}}])}(Vt(ne));customElements.define(yn.is,yn);var xn,An,kn,wn,En=function(e){function t(){return d(this,t),u(this,t,arguments)}return o(t,e),i(t,[{key:"ready",value:function(){l(c(t.prototype),"ready",this).call(this),this.addEventListener("dragover",this._onDragover.bind(this)),this.addEventListener("dragleave",this._onDragleave.bind(this)),this.addEventListener("drop",this._onDrop.bind(this)),this.addEventListener("file-retry",this._onFileRetry.bind(this)),this.addEventListener("file-abort",this._onFileAbort.bind(this)),this.addEventListener("file-remove",this._onFileRemove.bind(this)),this.addEventListener("file-start",this._onFileStart.bind(this))}},{key:"_formatSize",value:function(e){if("function"==typeof this.i18n.formatSize)return this.i18n.formatSize(e);var t=this.i18n.units.sizeBase||1e3,n=~~(Math.log(e)/Math.log(t)),o=Math.max(0,Math.min(3,n-1));return parseFloat((e/Math.pow(t,n)).toFixed(o))+" "+this.i18n.units.size[n]}},{key:"_splitTimeByUnits",value:function(e){for(var t=[60,60,24,1/0],n=[0],o=0;o<t.length&&e>0;o++)n[o]=e%t[o],e=Math.floor(e/t[o]);return n}},{key:"_formatTime",value:function(e,t){if("function"==typeof this.i18n.formatTime)return this.i18n.formatTime(e,t);for(;t.length<3;)t.push(0);return t.reverse().map((function(e){return(e<10?"0":"")+e})).join(":")}},{key:"_formatFileProgress",value:function(e){return e.totalStr+": "+e.progress+"% ("+(e.loaded>0?this.i18n.uploading.remainingTime.prefix+e.remainingStr:this.i18n.uploading.remainingTime.unknown)+")"}},{key:"_maxFilesAdded",value:function(e,t){return e>=0&&t>=e}},{key:"_onDragover",value:function(e){e.preventDefault(),this.nodrop||this._dragover||(this._dragoverValid=!this.maxFilesReached,this._dragover=!0),e.dataTransfer.dropEffect=!this._dragoverValid||this.nodrop?"none":"copy"}},{key:"_onDragleave",value:function(e){e.preventDefault(),this._dragover&&!this.nodrop&&(this._dragover=this._dragoverValid=!1)}},{key:"_onDrop",value:function(e){this.nodrop||(e.preventDefault(),this._dragover=this._dragoverValid=!1,this._addFiles(e.dataTransfer.files))}},{key:"_createXhr",value:function(){return new XMLHttpRequest}},{key:"_configureXhr",value:function(e){if("string"==typeof this.headers)try{this.headers=JSON.parse(this.headers)}catch(e){this.headers=void 0}for(var t in this.headers)e.setRequestHeader(t,this.headers[t]);this.timeout&&(e.timeout=this.timeout),e.withCredentials=this.withCredentials}},{key:"_setStatus",value:function(e,t,n,o){e.elapsed=o,e.elapsedStr=this._formatTime(e.elapsed,this._splitTimeByUnits(e.elapsed)),e.remaining=Math.ceil(o*(t/n-1)),e.remainingStr=this._formatTime(e.remaining,this._splitTimeByUnits(e.remaining)),e.speed=~~(t/o/1024),e.totalStr=this._formatSize(t),e.loadedStr=this._formatSize(n),e.status=this._formatFileProgress(e)}},{key:"uploadFiles",value:function(e){e&&!Array.isArray(e)&&(e=[e]),e=(e=e||this.files).filter((function(e){return!e.complete})),Array.prototype.forEach.call(e,this._uploadFile.bind(this))}},{key:"_uploadFile",value:function(e){var t=this;if(!e.uploading){var n,o=Date.now(),i=e.xhr=this._createXhr();i.upload.onprogress=function(a){clearTimeout(n);var r=(Date.now()-o)/1e3,s=a.loaded,l=a.total,c=~~(s/l*100);e.loaded=s,e.progress=c,e.indeterminate=s<=0||s>=l,e.error?e.indeterminate=e.status=void 0:e.abort||(c<100?(t._setStatus(e,l,s,r),n=setTimeout((function(){e.status=t.i18n.uploading.status.stalled,t._notifyFileChanges(e)}),2e3)):(e.loadedStr=e.totalStr,e.status=t.i18n.uploading.status.processing)),t._notifyFileChanges(e),t.dispatchEvent(new CustomEvent("upload-progress",{detail:{file:e,xhr:i}}))},i.onreadystatechange=function(){if(4==i.readyState){if(clearTimeout(n),e.indeterminate=e.uploading=!1,e.abort)return void t._notifyFileChanges(e);if(e.status="",!t.dispatchEvent(new CustomEvent("upload-response",{detail:{file:e,xhr:i},cancelable:!0})))return;0===i.status?e.error=t.i18n.uploading.error.serverUnavailable:i.status>=500?e.error=t.i18n.uploading.error.unexpectedServerError:i.status>=400&&(e.error=t.i18n.uploading.error.forbidden),e.complete=!e.error,t.dispatchEvent(new CustomEvent("upload-".concat(e.error?"error":"success"),{detail:{file:e,xhr:i}})),t._notifyFileChanges(e)}};var a=new FormData;if(e.uploadTarget=e.uploadTarget||this.target||"",e.formDataName=this.formDataName,this.dispatchEvent(new CustomEvent("upload-before",{detail:{file:e,xhr:i},cancelable:!0})))a.append(e.formDataName,e,e.name),i.open(this.method,e.uploadTarget,!0),this._configureXhr(i),e.status=this.i18n.uploading.status.connecting,e.uploading=e.indeterminate=!0,e.complete=e.abort=e.error=e.held=!1,i.upload.onloadstart=function(){t.dispatchEvent(new CustomEvent("upload-start",{detail:{file:e,xhr:i}})),t._notifyFileChanges(e)},this.dispatchEvent(new CustomEvent("upload-request",{detail:{file:e,xhr:i,formData:a},cancelable:!0}))&&i.send(a)}}},{key:"_retryFileUpload",value:function(e){this.dispatchEvent(new CustomEvent("upload-retry",{detail:{file:e,xhr:e.xhr},cancelable:!0}))&&this._uploadFile(e)}},{key:"_abortFileUpload",value:function(e){this.dispatchEvent(new CustomEvent("upload-abort",{detail:{file:e,xhr:e.xhr},cancelable:!0}))&&(e.abort=!0,e.xhr&&e.xhr.abort(),this._notifyFileChanges(e))}},{key:"_notifyFileChanges",value:function(e){var t="files."+this.files.indexOf(e)+".";for(var n in e)e.hasOwnProperty(n)&&this.notifyPath(t+n,e[n])}},{key:"_addFiles",value:function(e){Array.prototype.forEach.call(e,this._addFile.bind(this))}},{key:"_addFile",value:function(e){if(this.maxFilesReached)this.dispatchEvent(new CustomEvent("file-reject",{detail:{file:e,error:this.i18n.error.tooManyFiles}}));else if(this.maxFileSize>=0&&e.size>this.maxFileSize)this.dispatchEvent(new CustomEvent("file-reject",{detail:{file:e,error:this.i18n.error.fileIsTooBig}}));else{var t=e.name.match(/\.[^\.]*$|$/)[0],n=new RegExp("^("+this.accept.replace(/[, ]+/g,"|").replace(/\/\*/g,"/.*")+")$","i");!this.accept||n.test(e.type)||n.test(t)?(e.loaded=0,e.held=!0,e.status=this.i18n.uploading.status.held,this.unshift("files",e),this.noAuto||this._uploadFile(e)):this.dispatchEvent(new CustomEvent("file-reject",{detail:{file:e,error:this.i18n.error.incorrectFileType}}))}}},{key:"_removeFile",value:function(e){this.files.indexOf(e)>-1&&this.splice("files",this.files.indexOf(e),1)}},{key:"_onAddFilesTouchEnd",value:function(e){e.preventDefault(),this.__resetMouseCanceller(),this._onAddFilesClick()}},{key:"__resetMouseCanceller",value:function(){oe()}},{key:"_onAddFilesClick",value:function(){this.maxFilesReached||(this.$.fileInput.value="",this.$.fileInput.click())}},{key:"_onFileInputChange",value:function(e){this._addFiles(e.target.files)}},{key:"_onFileStart",value:function(e){this._uploadFile(e.detail.file)}},{key:"_onFileRetry",value:function(e){this._retryFileUpload(e.detail.file)}},{key:"_onFileAbort",value:function(e){this._abortFileUpload(e.detail.file)}},{key:"_onFileRemove",value:function(e){this._removeFile(e.detail.file)}},{key:"_dragoverChanged",value:function(e){e?this.setAttribute("dragover",e):this.removeAttribute("dragover")}},{key:"_dragoverValidChanged",value:function(e){e?this.setAttribute("dragover-valid",e):this.removeAttribute("dragover-valid")}},{key:"_i18nPlural",value:function(e,t){return 1==e?t.one:t.many}},{key:"_isMultiple",value:function(e){return 1!=e}}],[{key:"template",get:function(){return Q(bn||(bn=r(['\n    <style>\n      :host {\n        display: block;\n        position: relative;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      [hidden] {\n        display: none !important;\n      }\n    </style>\n\n    <div part="primary-buttons">\n      <div id="addFiles" on-touchend="_onAddFilesTouchEnd" on-click="_onAddFilesClick">\n        <slot name="add-button">\n          <vaadin-button part="upload-button" id="addButton" disabled="[[maxFilesReached]]">\n            [[_i18nPlural(maxFiles, i18n.addFiles, i18n.addFiles.*)]]\n          </vaadin-button>\n        </slot>\n      </div>\n      <div part="drop-label" hidden$="[[nodrop]]" id="dropLabelContainer">\n        <slot name="drop-label-icon">\n          <div part="drop-label-icon"></div>\n        </slot>\n        <slot name="drop-label" id="dropLabel">\n          [[_i18nPlural(maxFiles, i18n.dropFiles, i18n.dropFiles.*)]]\n        </slot>\n      </div>\n    </div>\n    <slot name="file-list">\n      <div id="fileList" part="file-list">\n        <template is="dom-repeat" items="[[files]]" as="file">\n          <vaadin-upload-file file="[[file]]"></vaadin-upload-file>\n        </template>\n      </div>\n    </slot>\n    <slot></slot>\n    <input type="file" id="fileInput" on-change="_onFileInputChange" hidden="" accept$="{{accept}}" multiple$="[[_isMultiple(maxFiles)]]" capture$="[[capture]]">\n'],['\n    <style>\n      :host {\n        display: block;\n        position: relative;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      [hidden] {\n        display: none !important;\n      }\n    </style>\n\n    <div part="primary-buttons">\n      <div id="addFiles" on-touchend="_onAddFilesTouchEnd" on-click="_onAddFilesClick">\n        <slot name="add-button">\n          <vaadin-button part="upload-button" id="addButton" disabled="[[maxFilesReached]]">\n            [[_i18nPlural(maxFiles, i18n.addFiles, i18n.addFiles.*)]]\n          </vaadin-button>\n        </slot>\n      </div>\n      <div part="drop-label" hidden\\$="[[nodrop]]" id="dropLabelContainer">\n        <slot name="drop-label-icon">\n          <div part="drop-label-icon"></div>\n        </slot>\n        <slot name="drop-label" id="dropLabel">\n          [[_i18nPlural(maxFiles, i18n.dropFiles, i18n.dropFiles.*)]]\n        </slot>\n      </div>\n    </div>\n    <slot name="file-list">\n      <div id="fileList" part="file-list">\n        <template is="dom-repeat" items="[[files]]" as="file">\n          <vaadin-upload-file file="[[file]]"></vaadin-upload-file>\n        </template>\n      </div>\n    </slot>\n    <slot></slot>\n    <input type="file" id="fileInput" on-change="_onFileInputChange" hidden="" accept\\$="{{accept}}" multiple\\$="[[_isMultiple(maxFiles)]]" capture\\$="[[capture]]">\n'])))}},{key:"is",get:function(){return"vaadin-upload"}},{key:"version",get:function(){return"4.4.3"}},{key:"properties",get:function(){return{nodrop:{type:Boolean,reflectToAttribute:!0,value:function(){try{return!!document.createEvent("TouchEvent")}catch(e){return!1}}},target:{type:String,value:""},method:{type:String,value:"POST"},headers:{type:Object,value:{}},timeout:{type:Number,value:0},_dragover:{type:Boolean,value:!1,observer:"_dragoverChanged"},files:{type:Array,notify:!0,value:function(){return[]}},maxFiles:{type:Number,value:1/0},maxFilesReached:{type:Boolean,value:!1,notify:!0,readOnly:!0,reflectToAttribute:!0,computed:"_maxFilesAdded(maxFiles, files.length)"},accept:{type:String,value:""},maxFileSize:{type:Number,value:1/0},_dragoverValid:{type:Boolean,value:!1,observer:"_dragoverValidChanged"},formDataName:{type:String,value:"file"},noAuto:{type:Boolean,value:!1},withCredentials:{type:Boolean,value:!1},capture:String,i18n:{type:Object,value:function(){return{dropFiles:{one:"Drop file here",many:"Drop files here"},addFiles:{one:"Upload File...",many:"Upload Files..."},cancel:"Cancel",error:{tooManyFiles:"Too Many Files.",fileIsTooBig:"File is Too Big.",incorrectFileType:"Incorrect File Type."},uploading:{status:{connecting:"Connecting...",stalled:"Stalled.",processing:"Processing File...",held:"Queued"},remainingTime:{prefix:"remaining time: ",unknown:"unknown remaining time"},error:{serverUnavailable:"Server Unavailable",unexpectedServerError:"Unexpected Server Error",forbidden:"Forbidden"}},units:{size:["B","kB","MB","GB","TB","PB","EB","ZB","YB"]}}}}}}}])}(cn(Vt(ne)));customElements.define(En.is,En);var _n,Sn={url:new URL("./elements/simple-fields/lib/simple-fields-upload.js",document.baseURI).href},Nn=function(e){function t(){var e;return d(this,t),(e=u(this,t)).voice=null,e.t=e.t||{},e.t=s(s({},e.t),{},{dropMediaHereOr:"drop media here or",upload:"Upload",takePhoto:"Take photo",recordAudio:"Record audio",cancel:"Cancel",uploadMedia:"Upload media"}),e.registerLocalization({context:e,namespace:"simple-fields",localesPath:new URL("../locales/simple-fields.es.json",Sn.url).href+"/../",locales:["es"]}),e.hideInput=!1,e.itemsList=[],e.autocomplete="off",e.noCamera=!1,e.noVoiceRecord=!1,e.responsiveSize="sm",e}return o(t,e),i(t,[{key:"render",value:function(){return a(xn||(xn=r(['\n      <fieldset part="fieldset">'," ","</fieldset>\n    "])),this.legend,this.fields)}},{key:"sources",get:function(){return a(An||(An=r(['\n      <simple-toolbar-button\n        id="browse"\n        ?disabled="','"\n        label="','.."\n        ?show-text-label="','"\n        icon="icons:file-upload"\n        show-text-label\n        @click="','"\n        controls="fieldset"\n        part="browse"\n      >\n      </simple-toolbar-button>\n      <simple-toolbar-button\n        icon="image:camera-alt"\n        ?disabled="','"\n        label="','.."\n        ?show-text-label="','"\n        @mousedown="','"\n        @focus="','"\n        @click="','"\n        controls="fieldset"\n        part="take-photo"\n        ?hidden="','"\n      >\n      </simple-toolbar-button>\n      <simple-toolbar-button\n        icon="hardware:keyboard-voice"\n        ?disabled="','"\n        label="','.."\n        ?show-text-label="','"\n        @mousedown="','"\n        @focus="','"\n        @click="','"\n        controls="fieldset"\n        part="record-audio"\n        ?hidden="','"\n      >\n      </simple-toolbar-button>\n    '])),this.disabled,this.t.upload,this.responsiveSize.indexOf("s")<0,this._handleBrowse,this.disabled,this.t.takePhoto,this.responsiveSize.indexOf("s")<0,(function(e){return e.preventDefault()}),(function(e){return e.preventDefault()}),this._handleCameraOption,!navigator.mediaDevices||this.noCamera,this.disabled,this.t.recordAudio,this.responsiveSize.indexOf("s")<0,(function(e){return e.preventDefault()}),(function(e){return e.preventDefault()}),this._handleAudioOption,!navigator.mediaDevices||this.noVoiceRecord)}},{key:"fields",get:function(){return a(kn||(kn=r(['\n      <div id="upload-options">\n        <vaadin-upload\n          capture=""\n          class="option-','"\n          form-data-name="file-upload"\n          id="fileupload"\n          @upload-before="','"\n          @upload-response="','"\n          part="upload"\n          ?nodrop="','"\n        >\n          <button\n            ?disabled="','"\n            id="add-hidden"\n            slot="add-button"\n          >\n            ','..\n          </button>\n          <div\n            part="browse-area"\n            ?hidden="','"\n          >\n            <simple-fields-url-combo\n              id="url"\n              ?autofocus="','"\n              autocomplete="both"\n              value="','"\n              label="URL"\n              type="url"\n              auto-validate=""\n              part="url"\n              ?disabled="','"\n              ?always-expanded="','"\n              display-as="','"\n              .itemsList="','"\n              @click="','"\n              @mousedown="','"\n              @focus="','"\n              @value-changed="','"\n            >\n            </simple-fields-url-combo>\n          </div>\n          <div id="upload">\n            <span part="drop-area-text">',"</span>\n            ",'\n          </div>\n          <simple-toolbar-button\n            id="cancel"\n            icon="icons:clear"\n            ?disabled="','"\n            label="','"\n            @mousedown="','"\n            @focus="','"\n            @click="','"\n            controls="fieldset"\n            slot="drop-label"\n            part="cancel-media"\n            ?hidden="','"\n          >\n          </simple-toolbar-button>\n          <div\n            id="camerahole"\n            ?hidden="','"\n            part="camera"\n            part="camera-preview"\n          ></div>\n          <div\n            id="voicerecorder"\n            ?hidden="','"\n            part="voice-preview"\n          ></div>\n          ',"\n        </vaadin-upload>\n      </div>\n    "])),this.option,this._fileAboutToUpload,this._fileUploadResponse,this.disabled,this.disabled,this.t.upload,"selfie"==this.option||"audio"==this.option||this.hideInput,this.autofocus,this.value||"",this.disabled,this.responsiveSize.indexOf("s")<0,this.responsiveSize.indexOf("l")>-1?"grid":"",this.itemsList,(function(e){return e.stopImmediatePropagation()}),(function(e){return e.stopImmediatePropagation()}),(function(e){return e.stopImmediatePropagation()}),this.valueChanged,this.t.dropMediaHereOr,this.sources,this.disabled,this.t.cancel,(function(e){return e.preventDefault()}),(function(e){return e.preventDefault()}),this._handleCancel,"selfie"!==this.option&&"audio"!==this.option,"selfie"!==this.option,"audio"!==this.option,this.desc)}},{key:"_handleCameraOption",value:function(e){e.preventDefault(),this.option="selfie",this._takeSelfie(e)}},{key:"_handleAudioOption",value:function(e){e.preventDefault(),this.option="audio",this._voiceRecorder(e)}},{key:"_handleCancel",value:function(e){e.preventDefault(),this.option="fileupload"}},{key:"_handleBrowse",value:function(e){e.preventDefault(),this.shadowRoot.querySelector("#add-hidden").dispatchEvent(new CustomEvent("click",e))}},{key:"valueChanged",value:function(e){this.value=e.detail.value}},{key:"updated",value:function(e){var n=this;l(c(t.prototype),"updated",this)&&l(c(t.prototype),"updated",this).call(this,e),e.forEach((function(e,t){"value"==t&&n.dispatchEvent(new CustomEvent("value-changed",{detail:{value:n[t]}}))})),this.field&&this.__delayedFocus&&this.focus()}},{key:"field",get:function(){if(this.shadowRoot)return"selfie"==this.option&&this.shadowRoot.querySelector("#cancel")||"audio"==this.option&&this.shadowRoot.querySelector("#cancel")?this.shadowRoot.querySelector("#cancel"):!!this.shadowRoot.querySelector("#url")&&this.shadowRoot.querySelector("#url")}},{key:"focus",value:function(){this.field?(this.field.focus(),this.__delayedFocus=!1):this.__delayedFocus=!0}},{key:"_fileAboutToUpload",value:function(e){this.dispatchEvent(new CustomEvent("upload-before",{bubbles:!0,cancelable:!0,composed:!1,detail:e.detail})),this.dispatchEvent(new CustomEvent("upload-response",{bubbles:!0,cancelable:!0,composed:!1,detail:e.detail}))}},{key:"firstUpdated",value:function(e){l(c(t.prototype),"firstUpdated",this)&&l(c(t.prototype),"firstUpdated",this).call(this,e),this.value?this.option="url":this.option="fileupload",globalThis.ResponsiveUtility.requestAvailability(),globalThis.dispatchEvent(new CustomEvent("responsive-element",{detail:{element:this,attribute:"responsive-size",relativeToParent:!0,sm:150,md:300,lg:600,xl:1200}}))}},{key:"__newPhotoShowedUp",value:function(e){var t=new File([e.detail.raw],"headshot"+e.timeStamp+".jpg");this.shadowRoot.querySelector("#fileupload")._addFile(t)}},{key:"__newAudioShowedUp",value:function(e){var t=this,n=new File([e.detail.value],"voice-recording-"+e.timeStamp+".mp3");this.shadowRoot.querySelector("#fileupload")._addFile(n),this.voice.remove(),setTimeout((function(){t.voice=null}),0)}},{key:"_takeSelfie",value:function(e){var t=this;this.camera||n.import("./893bdd97.js").then((function(){t.camera=globalThis.document.createElement("simple-camera-snap"),t.camera.autoplay=!0,t.camera.addEventListener("simple-camera-snap-image",t.__newPhotoShowedUp.bind(t)),t.shadowRoot.querySelector("#camerahole").appendChild(t.camera)}))}},{key:"_voiceRecorder",value:function(e){var t=this;this.voice||n.import("./9b1def34.js").then((function(e){return e.bd})).then((function(){t.voice=globalThis.document.createElement("voice-recorder"),t.voice.addEventListener("voice-recorder-recording-blob",t.__newAudioShowedUp.bind(t)),t.voice.recording=!0,t.shadowRoot.querySelector("#voicerecorder").appendChild(t.voice)}))}},{key:"_resolveObjectPath",value:function(e,t){return e.split(".").reduce((function(e,t){return e?e[t]:null}),t||self)}}],[{key:"tag",get:function(){return"simple-fields-upload"}},{key:"styles",get:function(){return[l(c(t),"styles",this)].concat(m(ie),[g(wn||(wn=r(['\n        :host {\n          pointer-events: all;\n          overflow: visible;\n          --simple-login-camera-aspect: 1.777777777777;\n          --simple-camera-snap-color: var(--simple-fields-color, currentColor);\n          --simple-camera-snap-background: var(\n            --simple-fields-background-color,\n            unset\n          );\n          --simple-camera-snap-border-radius: 2px;\n          --lumo-font-family: var(--simple-fields-font-family, sans-serif);\n          --lumo-error-color: var(--simple-fields-error-color, #b40000);\n          --lumo-primary-font-color: var(--simple-fields-color, currentColor);\n          --lumo-base-color: var(--simple-fields-background-color, transparent);\n        }\n        :host([responsive-size="xs"]),\n        div[part="description"] {\n          font-size: 10px;\n          --simple-fields-font-size: 10px;\n          --simple-fields-button-font-size: 11px;\n          --simple-fields-legend-font-size: 11px;\n          --simple-fields-detail-font-size: 10px;\n        }\n        fieldset {\n          padding: 0px;\n          max-width: 100%;\n        }\n        #upload,\n        div[slot="drop-label"] {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          flex-wrap: wrap;\n          width: 100%;\n        }\n        #upload {\n          border-radius: var(--simple-fields-border-radius, 2px);\n          border: 1px dashed var(--simple-fields-border-color-light, #ccc);\n        }\n        #url {\n          flex: 1 1 100%;\n          margin: var(--simple-fields-margin-small, 8px) 0;\n          background-color: transparent;\n        }\n        #upload-options {\n          position: relative;\n        }\n        div[slot="drop-label"] > * {\n          flex: 0 1 auto;\n        }\n        simple-fields-url-combo[always-expanded]::part(listbox) {\n          background-color: transparent;\n        }\n        simple-toolbar-button {\n          font-family: var(--simple-fields-font-family, sans-serif);\n          color: var(--simple-fields-color, currentColor);\n          margin: calc(0.5 * var(--simple-fields-margin-small, 8px))\n            calc(0.25 * var(--simple-fields-margin-small, 8px));\n        }\n        simple-toolbar-button[part="cancel-media"] {\n          position: absolute;\n          right: 0;\n          top: 0;\n          z-index: 2;\n          --simple-fields-button-padding-sm: 0;\n          background-color: var(--simple-fields-background-color, white);\n          opacity: 0.7;\n        }\n        span[part="drop-area-text"] {\n          font-family: var(--simple-fields-button-font-family, sans-serif);\n          font-size: var(--simple-fields-button-font-size, 10px);\n          white-space: nowrap;\n          margin: calc(0.5 * var(--simple-fields-margin-small, 8px))\n            calc(0.25 * var(--simple-fields-margin-small, 8px));\n        }\n        vaadin-upload {\n          padding: var(--simple-fields-margin-small, 8px);\n          position: relative;\n          overflow: visible;\n          border: none !important;\n          --lumo-font-size-s: 10px;\n        }\n        vaadin-upload::part(file-list) {\n          max-height: 140px;\n          overflow-x: hidden;\n          overflow-y: auto;\n        }\n        vaadin-upload[dragover] {\n          border-color: var(\n            --simple-fields-secondary-accent-color,\n            var(--simple-colors-default-theme-accent-3, #77e2ff)\n          );\n        }\n        vaadin-upload::part(drop-label) {\n          font-family: var(--simple-fields-font-family, sans-serif);\n          color: var(--simple-fields-color, currentColor);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          flex-wrap: wrap;\n          padding: 0;\n          width: 100%;\n          margin-top: -16px;\n        }\n        vaadin-upload.option-selfie::part(drop-label) {\n          display: block;\n        }\n        vaadin-upload::part(drop-label-icon) {\n          display: none;\n        }\n        vaadin-upload-file {\n          --disabled-text-color: #var(--simple-fields-border-color, #999);\n        }\n        simple-camera-snap {\n          --simple-camera-snap-button-container-bottom: 2px;\n          --simple-camera-snap-button-container-z-index: 5;\n          --simple-camera-snap-button-border-radius: 100%;\n          --simple-camera-snap-button-opacity: 0.7;\n          max-width: 250px;\n          margin: 0 auto;\n        }\n\n        /** voice stuff which is in lite dom below */\n        .vmsg-button {\n          border: 1px solid #ccc;\n          border-radius: 0;\n          padding: 4px;\n          margin: 0 4px;\n        }\n        .vmsg-timer {\n          padding: 4px;\n        }\n        #add-hidden {\n          display: none;\n        }\n        /** account for mobile devices not sending this event accurately */\n        @media (max-width: 640px) {\n          #browse {\n            display: none;\n          }\n          #add-hidden {\n            display: block;\n            float: right;\n            width: 100%;\n            margin: 0 0 16px 0;\n          }\n          vaadin-upload::part(file-list) {\n            max-height: 48px;\n            font-size: 8px;\n          }\n        }\n      '])))])}},{key:"properties",get:function(){return s(s({},l(c(t),"properties",this)),{},{accept:{type:String},hideInput:{type:Boolean,attribute:"hide-input"},autocomplete:{type:String},autofocus:{type:Boolean},value:{type:String},option:{type:String},noCamera:{type:Boolean,attribute:"no-camera"},noVoiceRecord:{type:Boolean,attribute:"no-voice-record"},responsiveSize:{type:String,attribute:"responsive-size",reflect:!0},responsiveWidth:{type:Number,attribute:"responsive-width",reflect:!0},itemsList:{type:Object,attribute:"items-list"}})}}])}(k(V(h)));customElements.define(Nn.tag,Nn);var Tn=function(e){function t(){var e;return d(this,t),(e=u(this,t)).showSources=!0,e.autocomplete="on",e.__winEvents={"hax-app-picker-selection":"_haxAppPickerSelection"},e.t=e.t||{},e.t=s(s({},e.t),{},{whereUpload:"Where would you like to upload this",cantHandle:"Sorry, you don't have a storage location that can handle",uploads:"uploads",dropMediaHereOr:"drop media here or",selectMedia:"Select media",upload:"Upload",takePhoto:"Take photo",recordAudio:"Record audio",cancel:"Cancel",uploadMedia:"Upload media"}),e.registerLocalization({context:e,namespace:"hax"}),e}return o(t,e),i(t,[{key:"_canUpload",value:function(){return!this.__allowUpload&&ye}},{key:"_fileAboutToUpload",value:function(e){if(this._canUpload()){e.preventDefault(),e.stopPropagation();var t={source:e.detail.file.name,type:e.detail.file.type},n=ye.guessGizmoType(t),o=ye.getHaxAppStoreTargets(n);1===o.length?this._haxAppPickerSelection({detail:o[0]}):0!==o.length?ye.haxAppPicker.presentOptions(o,n,"".concat(this.t.whereUpload," ").concat(n,"?"),"app"):ye.toast("".concat(this.t.cantHandle," ").concat(n," ").concat(this.t.uploads,"!"),5e3)}else this.__allowUpload=!1}},{key:"_haxAppPickerSelection",value:function(e){var t=e.detail.connection;this.__appUsed=e.detail,this.shadowRoot.querySelector("#fileupload").method=t.operations.add.method;var n=t.protocol+"://"+t.url;"/"!=n.substr(n.length-1)&&(n+="/"),"undefined"!==R(t.operations.add.endPoint)&&(n+=t.operations.add.endPoint),null!=ye.connectionRewrites.appendUploadEndPoint&&(n+="?"+ye.connectionRewrites.appendUploadEndPoint),null!=ye.connectionRewrites.appendJwt&&(n+="&"+ye.connectionRewrites.appendJwt+"="+ae(ye.connectionRewrites.appendJwt)),this.shadowRoot.querySelector("#fileupload").headers=t.headers,this.shadowRoot.querySelector("#fileupload").target=n,this.__allowUpload=!0,this.shadowRoot.querySelector("#fileupload").uploadFiles()}},{key:"_fileUploadResponse",value:function(e){var t=JSON.parse(e.detail.xhr.response),n=this.__appUsed.connection.operations.add.resultMap,o={},i={};for(var a in"undefined"!==R(this._resolveObjectPath(n.item,t))&&(o=this._resolveObjectPath(n.item,t)),i.type=n.defaultGizmoType,n.gizmo)i[a]=this._resolveObjectPath(n.gizmo[a],o);"undefined"===R(i.url)&&"undefined"!==R(i.source)&&(i.url=i.source),"undefined"!==R(n.gizmo.type)&&(i.type=this._resolveObjectPath(n.gizmo.type,o)),this.shadowRoot.querySelector("#url").value=i.url}},{key:"sources",get:function(){return a(_n||(_n=r([' <simple-toolbar-button\n        ?disabled="','"\n        label="','.."\n        ?show-text-label="','"\n        icon="hax:multimedia"\n        show-text-label\n        @click="','"\n        controls="fieldset"\n        part="merlin"\n        ?hidden="','"\n      >\n      </simple-toolbar-button>\n      ',""])),this.disabled,this.t.selectMedia,this.responsiveSize.indexOf("s")<0,this._clickMediaButton,!this.showSources,l(c(t.prototype),"sources",this))}},{key:"_clickMediaButton",value:function(e){var t="sources";if(this.label.toLowerCase().includes("image"))t="image";else if(this.label.toLowerCase().includes("video"))t="video";else if(ye.haxTray.activeHaxElement){var n=ye.guessGizmoType(ye.haxTray.activeHaxElement.properties);"*"!=n&&(t=n)}z.runProgram(t),"hax-upload-field"==this.tagName.toLowerCase()&&(z.programTarget=this),z.open()}}],[{key:"tag",get:function(){return"hax-upload-field"}},{key:"properties",get:function(){return s(s({},l(c(t),"properties",this)),{},{showSources:{type:Boolean,reflect:!0,attribute:"show-sources"}})}}])}(re(k(Nn)));customElements.define(Tn.tag,Tn);var Cn,Ln=function(e){function t(){var e;return d(this,t),(e=u(this,t)).hideInput=!0,e.__winEvents=e.__winEvents||{},e.__winEvents=s(s({},e.__winEvents),{},{"place-holder-file-drop":"_placeHolderFileDrop","hax-file-upload":"_uploadFile"}),b((function(){e._editModeChanged(y(ye.editMode))})),e}return o(t,e),i(t,[{key:"updated",value:function(e){var n=this;l(c(t.prototype),"updated",this)&&l(c(t.prototype),"updated",this).call(this,e),e.forEach((function(e,t){"t"===t&&(n.label=n.t.uploadMedia)}))}},{key:"_editModeChanged",value:function(e){!e&&this.shadowRoot&&this.shadowRoot.querySelector("#fileupload")&&(this.shadowRoot.querySelector("#fileupload").files=[])}},{key:"_fileUploadResponse",value:function(e){l(c(t.prototype),"_fileUploadResponse",this).call(this,e),this.newAssetConfigure()}},{key:"_canUpload",value:function(){return!this.__allowUpload}},{key:"newAssetConfigure",value:function(){var e={source:this.shadowRoot.querySelector("#url").value,title:this.shadowRoot.querySelector("#url").value};ye.insertLogicFromValues(e,this)}},{key:"_placeHolderFileDrop",value:function(e){ye.activePlaceHolder=e.detail.placeHolderElement,this.shadowRoot.querySelector("#fileupload")._onDrop(e.detail)}},{key:"_uploadFile",value:function(e){ye.activePlaceHolder=e.detail.placeHolderElement,ye.activePlaceHolderOperationType=e.detail.operationType,this.shadowRoot.querySelector("#fileupload")._addFile(e.detail.file)}}],[{key:"tag",get:function(){return"hax-tray-upload"}}])}(Tn);customElements.define(Ln.tag,Ln);var Bn,Mn,zn=function(e){function t(){var e;return d(this,t),(e=u(this,t)).auto=!1,e.headers={},e.method="GET",e.loading=!1,e.requestData={},e.media=[],e.resultMap={},b((function(){ye.editMode&&(e.activeApp=y(ye.activeApp))})),ye.appSearch=e,e}return o(t,e),i(t,[{key:"loadAppData",value:(n=w(E().mark((function e(){var t,n=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,t=this.requestUrl(this.requestEndPoint,this.requestParams),e.next=4,fetch(t,{headers:this.headers,method:this.method}).then((function(e){if(e.ok)return e.json()})).then((function(e){return n._requestDataChanged(e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"updated",value:function(e){var t=this;e.forEach((function(e,n){["auto","method","headers","requestEndPoint","requestParams"].includes(n)&&(clearTimeout(t.__debounce),t.__debounce=setTimeout((function(){t.requestEndPoint&&t.loadAppData()}),100)),"activeApp"==n&&(t.requestParams={},t.searchSchema={},setTimeout((function(){t.searchSchema={properties:{}},t._resetAppSearch(t.activeApp)}),10))}))}},{key:"requestUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="";if(null!=ye.connectionRewrites.appendUploadEndPoint&&t.__HAXAPPENDUPLOADENDPOINT__&&(n=ye.connectionRewrites.appendUploadEndPoint+"&"),null!=ye.connectionRewrites.appendJwt&&t.__HAXJWT__&&(t[ye.connectionRewrites.appendJwt]=ae(ye.connectionRewrites.appendJwt)),n+=this.queryStringData(t)){var o=e.indexOf("?")>=0?"&":"?";return e+o+n}return e}},{key:"queryStringData",value:function(e){var t,n,o=[];for(t in e)if(n=e[t],"__HAXJWT__"==t||"__HAXAPPENDUPLOADENDPOINT__"==t);else if(Array.isArray(n))for(var i=0;i<n.length;i++)o.push(t+"="+globalThis.encodeURIComponent(n[i]));else null!==n?o.push(t+"="+globalThis.encodeURIComponent(n)):o.push(t);return o.join("&")}},{key:"updateSearchValues",value:function(e){var t=this.requestParams;for(var n in e)""!=e[n]&&(t[n]=e[n]);this.requestParams=s({},this.requestParams)}},{key:"_resetAppSearch",value:function(e){if(e&&e.details){var t=e,n={};this.auto=!1,this.media=[],"undefined"!==R(t.connection.data)&&(n=t.connection.data),"undefined"!==R(t.connection.operations.browse.data)&&(n=Object.assign(n,t.connection.operations.browse.data)),this.method=t.connection.operations.browse.method,this.headers={},"undefined"!==R(t.connection.headers)&&(this.headers=t.connection.headers),this.requestParams=s({},n);var o=t.connection.protocol+"://"+t.connection.url;"/"!=o.substr(o.length-1)&&(o+="/"),"undefined"!==R(t.connection.operations.browse.endPoint)&&(o+=t.connection.operations.browse.endPoint),this.requestEndPoint=o;var i={properties:{}};"undefined"!==R(t.connection.operations.browse.search)&&(i.properties=t.connection.operations.browse.search,this.searchSchema=s({},i)),this.resultMap=t.connection.operations.browse.resultMap,this.pagination={},"undefined"!==R(t.connection.operations.browse.pagination)&&(this.pagination=t.connection.operations.browse.pagination),"undefined"!==R(t.connection.auto)?this.auto=t.connection.auto:this.auto=!0}}},{key:"_requestDataChanged",value:function(e){if(this.resultMap&&R(e)!={}){var t=[],n=this.resultMap,o=[];if(this.resultMap.items?"undefined"!==R(this._resolveObjectPath(n.items,e))?o=this._resolveObjectPath(n.items,e):null!=e&&(o=e):o=e,null!=o){for(var i=0;i<o.length;i++){if(t[i]={title:this._resolveObjectPath(n.preview.title,o[i]),details:this._resolveObjectPath(n.preview.details,o[i]),type:n.defaultGizmoType,map:{}},"undefined"!==R(t[i].details)&&null!=t[i].details&&(t[i].details=t[i].details.replace(/(<([^>]+)>)/gi,"")),n.preview.id.constructor===Object){var a=this._resolveObjectPath(n.preview.id.property,o[i]);"split"===n.preview.id.op&&(a=a.split(n.preview.id.delimiter),t[i].id=a[n.preview.id.position])}else t[i].id=this._resolveObjectPath(n.preview.id,o[i]);for(var r in"undefined"!==R(n.preview.image)?t[i].image=this._resolveObjectPath(n.preview.image,o[i]):"undefined"!==R(n.image)?t[i].image=n.image:t[i].image="",n.gizmo)if("_url_source"===r){var s="";s="undefined"!==R(t[i].map.__id)?t[i].map.__id:this._resolveObjectPath(n.gizmo.id,o[i]),t[i].map.source=n.gizmo._url_source.replace("<%= id %>",s),t[i].map.url=t[i].map.source}else if(n.gizmo[r].constructor===Object){var l=this._resolveObjectPath(n.gizmo[r].property,o[i]);"split"===n.gizmo[r].op&&(l=l.split(n.gizmo[r].delimiter),t[i].map[r]=l[n.gizmo[r].position],"id"===r&&(t[i].map.__id=t[i].map[r]))}else t[i].map[r]=this._resolveObjectPath(n.gizmo[r],o[i]);"undefined"===R(t[i].map.url)&&"undefined"!==R(t[i].map.source)&&(t[i].map.url=t[i].map.source),"undefined"!==R(n.gizmo.type)?t[i].type=this._resolveObjectPath(n.gizmo.type,o[i]):"undefined"!==R(n.gizmo.mimetype)?t[i].type=ye.mimeTypeToGizmoType(this._resolveObjectPath(n.gizmo.mimetype,o[i])):"*"!=ye.guessGizmoType(n.gizmo)&&(t[i].type=ye.guessGizmoType(n.gizmo))}this.media=[].concat(t)}}return this.loading=!1,this.media}},{key:"_resolveObjectPath",value:function(e,t){return e.split(".").reduce((function(e,t){return e?e[t]:null}),t||self)}}],[{key:"styles",get:function(){return[g(Cn||(Cn=r(["\n        :host {\n          display: none;\n        }\n      "])))]}},{key:"tag",get:function(){return"hax-app-search"}},{key:"properties",get:function(){return{activeApp:{type:Object},tos:{type:Array},auto:{type:Boolean},searchSchema:{type:Object},headers:{type:Object},method:{type:String},loading:{type:Boolean},requestData:{type:Object},media:{type:Array},requestEndPoint:{type:String},requestParams:{type:Object},resultMap:{type:Object}}}}]);var n}(h);customElements.define(zn.tag,zn);var Pn=function(e){function t(){var e;return d(this,t),(e=u(this,t)).renderTag=null,e.activePickerSchema=-1,e}return o(t,e),i(t,[{key:"render",value:function(){return a(Bn||(Bn=r([' <div class="wrap">\n      <slot></slot>\n    </div>'])))}},{key:"updated",value:function(e){var n=this;l(c(t.prototype),"updated",this)&&l(c(t.prototype),"updated",this).call(this,e),e.forEach((function(e,t){if("renderTag"===t&&n[t]){n.innerHTML="";var o,i=ye.haxSchemaFromTag(n[t]);o=-1!==n.activePickerSchema&&globalThis.document.querySelector("hax-picker")&&globalThis.document.querySelector("hax-picker")._elements&&globalThis.document.querySelector("hax-picker")._elements.length>0?P(globalThis.document.querySelector("hax-picker")._elements[n.activePickerSchema]):i.gizmo.tag&&i.demoSchema&&i.demoSchema[0]?P(i.demoSchema[0]):globalThis.document.createElement(n[t]),n.appendChild(o)}}))}}],[{key:"tag",get:function(){return"hax-element-demo"}},{key:"properties",get:function(){return s(s({},l(c(t),"properties",this)),{},{renderTag:{type:String,attribute:"render-tag"},activePickerSchema:{type:Number,attribute:"active-picker-schema"}})}},{key:"styles",get:function(){return[g(Mn||(Mn=r(["\n        :host {\n          display: block;\n          overflow: hidden;\n          height: 150px;\n          width: 150px;\n        }\n        div ::slotted(*) {\n          transform: scale(0.4) translate(-75%, -75%);\n          width: 500px;\n          max-height: 300px;\n        }\n      "])))]}}])}(se(h));customElements.define(Pn.tag,Pn);var On,Hn,Rn=function(e){function t(){var e;return d(this,t),(e=u(this,t)).eventData=null,e}return o(t,e),i(t,[{key:"_voiceEvent",value:function(e){this._handleClick(e),this.click()}},{key:"_handleClick",value:function(e){this.dispatchEvent(new CustomEvent("hax-tray-button-click",{bubbles:!0,cancelable:!0,composed:!0,detail:{eventName:this.eventName,index:this.index,value:this.eventData}}))}},{key:"updated",value:function(e){var n=this;l(c(t.prototype),"updated",this)&&l(c(t.prototype),"updated",this).call(this,e),e.forEach((function(e,t){"voiceCommand"==t&&n.dispatchEvent(new CustomEvent("super-daemon-voice-command",{bubbles:!0,composed:!0,cancelable:!1,detail:{command:n[t],context:n,callback:"_voiceEvent"}}))}))}}],[{key:"tag",get:function(){return"hax-tray-button"}},{key:"properties",get:function(){return s(s({},l(c(t),"properties",this)),{},{voiceCommand:{type:String,attribute:"voice-command"},wide:{type:Boolean,reflect:!0},index:{type:Number},eventData:{type:String,attribute:"event-data"}})}}])}(We(h));customElements.define(Rn.tag,Rn);var Dn,Fn,In,Un=function(e){function t(){return d(this,t),u(this,t,arguments)}return o(t,e),i(t)}(function(e){return function(e){function t(){return d(this,t),u(this,t)}return o(t,e),i(t,[{key:"gridStyles",get:function(){var e=[];return this.columns&&e.push("--simple-button-grid-cols:".concat(100/this.columns,"%")),e.join(";")}},{key:"toolbarTemplate",get:function(){return a(On||(On=r(['\n        <div id="grid">\n          <div\n            id="buttons"\n            class="','"\n            style="','"\n            part="buttons"\n          >\n            <slot></slot>\n            ',"\n          </div>\n        </div>\n      "])),!this.alwaysExpanded&&this.collapsed?"collapsed":"",this.gridStyles,this.alwaysExpanded?"":this.moreButton)}},{key:"_bottom",value:function(e){return e&&e.offsetTop&&e.clientHeight?e.offsetTop+e.clientHeight:void 0}},{key:"resizeToolbar",value:function(){var e=this;if(!this.alwaysExpanded){var t=this.shadowRoot?this.shadowRoot.querySelector("#morebutton"):void 0;this._bottom(t);var n,o=this._bottom(this),i=m(this.children||[]),a=!0,r=[];i.forEach((function(t){if(t.removeAttribute&&t.removeAttribute("collapse-hide"),0==r.length)r.unshift(t.offsetTop);else{var i=t.offsetTop>r[0];i&&r.unshift(t.offsetTop),e.rows&&r.length>e.rows||!e.rows&&i&&e._bottom(t)>o?(t.setAttribute("collapse-hide",!0),a=!1):a?n=t:t.setAttribute("collapse-hide",!0)}})),this.collapseDisabled=a&&!(t&&n&&this._bottom(t)>o),!this.collapseDisabled&&n&&n.setAttribute("collapse-hide",!0)}}}],[{key:"tag",get:function(){return"simple-toolbar-grid"}},{key:"baseStyles",get:function(){return[g(Hn||(Hn=r(["\n          :host {\n            padding: 0;\n            margin: 0;\n            max-width: 100%;\n            display: flex;\n            overflow: hidden;\n            flex-direction: column;\n            align-items: stretch;\n            overflow: hidden !important;\n            --simple-button-grid-cols: var(\n              --simple-toolbar-button-min-width,\n              var(\n                --simple-toolbar-button-width,\n                var(--simple-toolbar-button-height, 24px)\n              )\n            );\n            transition: all 0.5s;\n            transition: z-index 0s;\n          }\n          :host([hidden]) {\n            z-index: -1;\n            visibility: hidden;\n            opacity: 0;\n            height: 0;\n          }\n          #grid {\n            flex: 1 1 auto;\n            max-width: 100%;\n            overflow: auto;\n          }\n\n          #buttons {\n            flex: 0 1 100%;\n            max-width: 100%;\n            display: flex;\n            flex-wrap: wrap;\n            --simple-toolbar-button-flex: var(\n              --simple-toolbar-button-grid-flex,\n              1 1 100%\n            );\n          }\n          #buttons {\n            display: grid;\n            overflow: visible;\n            grid-gap: var(--simple-button-grid-margin, 4px);\n            grid-template-columns: repeat(\n              auto-fill,\n              minmax(\n                calc(\n                  var(--simple-button-grid-cols) - 2 *\n                    var(--simple-button-grid-margin, 4px)\n                ),\n                1fr\n              )\n            );\n          }\n          :host([collapsed]:not([always-expanded]))\n            ::slotted(*[collapse-hide]) {\n            display: none !important;\n          }\n        "])))]}},{key:"properties",get:function(){return s(s({},l(c(t),"properties",this)),{},{columns:{type:Number,attribute:"columns"},rows:{type:Number,attribute:"rows"},disableAutogrow:{type:Boolean,attribute:"disable-autogrow",reflect:!0}})}}])}(N(e))}(h));customElements.define("simple-button-grid",Un);var qn,Gn,jn,Vn,Wn,Xn,Yn,Qn,Kn,Jn=function(e){function t(){var e;return d(this,t),(e=u(this,t)).opened=!1,e.disabled=!1,e.event="click",e}return o(t,e),i(t,[{key:"openedToggle",value:function(e){this.disabled||(this.opened=!this.opened)}},{key:"openedChanged",value:function(e){var t=this;if(e){var n=globalThis.SimplePopoverManager.requestAvailability();M(globalThis.document.createElement("div"),n);var o,i=globalThis.document.createElement("div"),s=this.querySelectorAll('[slot="options"]');for(var l in 1===s.length&&s[0].children&&1===s[0].children.length&&"SLOT"===s[0].children[0].tagName&&(s=s[0].children[0].assignedNodes({flatten:!0})),s)if(s[l].cloneNode&&s[l].tagName){var c=s[l].cloneNode(!0);c.removeAttribute("slot"),i.appendChild(c)}if(this.querySelector('[slot="style"]')){var d=this.querySelector('[slot="style"]').cloneNode(!0),u=globalThis.document.createElement("style");u.innerHTML=d.innerHTML,o=a(Dn||(Dn=r(["","",""])),le(i.innerHTML),le(u.outerHTML))}else o=a(Fn||(Fn=r(["",""])),le(i.innerHTML));var h=globalThis.document.createElement("div");h.setAttribute("slot","body"),n.appendChild(h),M(o,h),setTimeout((function(){var e=globalThis.SimplePopoverManager.requestAvailability().querySelectorAll("*");for(var n in e)e[n].addEventListener&&e[n].addEventListener("click",t.itemSelect.bind(t));globalThis.SimplePopoverManager.requestAvailability().querySelector("[data-simple-popover-selection-active]")?globalThis.SimplePopoverManager.requestAvailability().querySelector("[data-simple-popover-selection-active]").focus():globalThis.SimplePopoverManager.requestAvailability()&&globalThis.SimplePopoverManager.requestAvailability().querySelector(":first-child")&&globalThis.SimplePopoverManager.requestAvailability().querySelector(":first-child").focus()}),0)}globalThis.SimplePopoverManager.requestAvailability().setPopover(this,this.querySelector('[slot="button"]'),e)}},{key:"managerReset",value:function(){this.opened=!1}},{key:"updated",value:function(e){var t=this;e.forEach((function(e,n){"opened"==n&&t.shadowRoot&&void 0!==e&&(t.openedChanged(t[n]),t.dispatchEvent(new CustomEvent("".concat(n,"-changed"),{detail:t})))}))}},{key:"itemSelect",value:function(e){var t=this;this.dispatchEvent(new CustomEvent("simple-popover-selection-changed",{bubbles:!0,detail:e.target})),this.opened=!1,setTimeout((function(){globalThis.SimplePopoverManager.requestAvailability().setPopover(t,t.querySelector('[slot="button"]'),!1),t.querySelector('[slot="button"]').focus()}),0)}},{key:"firstUpdated",value:function(){"click"===this.event?this.addEventListener("click",this.openedToggle.bind(this)):"hover"===this.event&&(this.addEventListener("mouseenter",this.openPopover.bind(this)),this.addEventListener("focusin",this.openPopover.bind(this)),this.addEventListener("focusout",this.closePopover.bind(this)),this.addEventListener("mouseleave",this.closePopover.bind(this)),this.addEventListener("mouseout",this.closePopover.bind(this)))}},{key:"openPopover",value:function(){var e=this;this.disabled||setTimeout((function(){e.opened=!0}),0)}},{key:"closePopover",value:function(){var e=this;setTimeout((function(){e.opened=!1}),0)}},{key:"render",value:function(){return a(In||(In=r(['<slot name="button"></slot>'])))}}],[{key:"properties",get:function(){return{opened:{type:Boolean,reflect:!0},disabled:{type:Boolean,reflect:!0},event:{type:String}}}}])}(h);customElements.define("simple-popover-selection",Jn);var Zn=function(e){function t(){var e;return d(this,t),(e=u(this,t)).activePreview=null,e.daemonKeyCombo=null,b((function(){e.daemonKeyCombo=y(ye.daemonKeyCombo)})),e.items=[],e.categories=[],e.like="",e.value="",e.where="index",e.recentGizmoList=[],e.t={filterContentTypes:"Filter Content Types",recent:"Recent"},e.registerLocalization({context:e,namespace:"hax"}),e.addEventListener("mouseleave",e.closePopover.bind(e)),e.addEventListener("mouseout",e.closePopover.bind(e)),b((function(){if(ye.editMode){var t=y(ye.recentGizmoList),n=[],o=[];t.forEach((function(e){e&&e.tag&&(o.includes(e.tag)||(o.push(e.tag),n.push(e),n.length>5&&(o.shift(),n.shift())))})),e.recentGizmoList=n}})),e}return o(t,e),i(t,[{key:"closePopover",value:function(){this.activePreview=null,globalThis.SimplePopoverManager.requestAvailability().opened=!1}},{key:"render",value:function(){var e=this;return a(qn||(qn=r(["",""])),this.hidden?"":a(Gn||(Gn=r(['<div class="toolbar-inner" part="toolbar">\n            <simple-fields-field\n              id="inputfilter"\n              @value-changed="','"\n              aria-controls="filter"\n              label="','"\n              type="text"\n              auto-validate=""\n              part="filter"\n            ></simple-fields-field>\n          </div>\n          <a11y-collapse\n            id="recent"\n            heading="','"\n            heading-button\n            expanded\n          >\n            <simple-button-grid columns="5" always-expanded part="grid">\n              ',"\n            </simple-button-grid>\n          </a11y-collapse>\n          "," "])),this.inputfilterChanged,this.t.filterContentTypes,this.t.recent,this.recentGizmoList.map((function(t,n){return a(jn||(jn=r([' <simple-popover-selection\n                    data-index="','"\n                    @opened-changed="','"\n                    event="hover"\n                  >\n                    <hax-tray-button\n                      small\n                      show-text-label\n                      voice-command="insert ','"\n                      draggable="true"\n                      @dragstart="','"\n                      index="','"\n                      is-current-item\n                      label="','"\n                      event-name="insert-tag"\n                      event-data="','"\n                      data-demo-schema="true"\n                      icon-position="top"\n                      icon="','"\n                      part="grid-button"\n                      slot="button"\n                    ></hax-tray-button>\n                    ',"\n                  </simple-popover-selection>"])),n,e._hoverForPreviewChange,t.title,e._dragStart,n,t.title,t.tag,t.icon,e.activePreview===parseInt(n)?a(Vn||(Vn=r(['\n                          <hax-element-demo\n                            render-tag="','"\n                            slot="options"\n                          ></hax-element-demo>\n                        '])),t.tag):"")})),this.categories.map((function(t){return a(Wn||(Wn=r([' <a11y-collapse\n                heading="','"\n                heading-button\n              >\n                <simple-button-grid columns="3" always-expanded part="grid">\n                  ',"\n                </simple-button-grid>\n              </a11y-collapse>"])),e.ucfirst(t),e.filtered.map((function(n,o){return a(Xn||(Xn=r(["",""])),n&&n.tags&&n.tags.includes(t)?a(Yn||(Yn=r([' <simple-popover-selection\n                            data-index="','"\n                            @opened-changed="','"\n                            event="hover"\n                          >\n                            <hax-tray-button\n                              show-text-label\n                              is-current-item\n                              voice-command="insert ','"\n                              draggable="true"\n                              @dragstart="','"\n                              index="','"\n                              label="','"\n                              event-name="insert-tag"\n                              event-data="','"\n                              data-demo-schema="true"\n                              icon-position="top"\n                              icon="','"\n                              part="grid-button"\n                              slot="button"\n                            ></hax-tray-button>\n                            ',"\n                          </simple-popover-selection>"])),o,e._hoverForPreviewChange,n.title,e._dragStart,o,n.title,n.tag,n.icon,e.activePreview===parseInt(o)?a(Qn||(Qn=r(['\n                                  <hax-element-demo\n                                    render-tag="','"\n                                    slot="options"\n                                  ></hax-element-demo>\n                                '])),n.tag):""):"")})))}))))}},{key:"_hoverForPreviewChange",value:function(e){var t=e.detail;t.opened&&(this.activePreview=parseInt(t.dataset.index),setTimeout((function(){e.detail.openedChanged(!0)}),10))}},{key:"_dragStart",value:function(e){var t,n=ye.haxSchemaFromTag(e.target.eventData);t=n.gizmo.tag&&n.demoSchema&&n.demoSchema[0]?P(n.demoSchema[0]):globalThis.document.createElement(e.target.eventData),ye.recentGizmoList.push(n.gizmo),ye.__dragTarget=t,e.dataTransfer&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move"),e.stopPropagation(),e.stopImmediatePropagation()}},{key:"inputfilterChanged",value:function(e){this.like=e.target.value,""==this.like?this.collapseAll():this.expandAll()}},{key:"expandAll",value:function(){this.shadowRoot.querySelectorAll("a11y-collapse").forEach((function(e){e.expanded=!0}))}},{key:"collapseAll",value:function(){this.shadowRoot.querySelectorAll("a11y-collapse:not(#recent)").forEach((function(e){e.expanded=!1}))}},{key:"updated",value:function(e){var n=this;l(c(t.prototype),"updated",this)&&l(c(t.prototype),"updated",this).call(this,e),e.forEach((function(e,t){"filtered"==t&&n.requestUpdate(),"items"==t&&n[t]&&n[t].length>0&&(n.categories=m(n.updateCategories(n.items)))}))}},{key:"ucfirst",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"updateCategories",value:function(e){var t=[];return e.forEach((function(e){e.tags&&e.tags[0]&&(t.includes(e.tags[0])||t.push(e.tags[0]))})),t.sort(),t}},{key:"firstUpdated",value:function(e){var n=this;l(c(t.prototype),"firstUpdated",this)&&l(c(t.prototype),"firstUpdated",this).call(this,e),b((function(){ye.editMode&&n.resetList(y(ye.gizmoList))}))}},{key:"resetList",value:function(e){if(e){this.like="",this.value="";var t=e.filter((function(e,t){return!(e&&e.meta&&(e.meta.inlineOnly||e.meta.hidden||e.requiresParent))}));t.map((function(e,n){t[n].index=e.title+" "+e.tag,e.tags&&(t[n].index+=" "+e.tags.join(" ")),e.meta&&e.meta.author&&(t[n].index+=" "+e.meta.author)})),this.items=m(t)}}}],[{key:"styles",get:function(){return[g(Kn||(Kn=r(["\n        :host {\n          display: flex;\n          flex-direction: column;\n          align-items: stretch;\n          flex: 0 1 auto;\n          overflow-y: auto;\n        }\n        :host > * {\n          max-width: 100%;\n        }\n        simple-popover-selection {\n          display: flex;\n        }\n        hax-tray-button {\n          flex: auto;\n          font-size: 12px;\n          --hax-ui-font-size-sm: 12px;\n          --simple-toolbar-button-height: 22px;\n          --simple-toolbar-button-width: 22px;\n        }\n        hax-tray-button[small] {\n          font-size: 8px;\n          --hax-ui-font-size-sm: 8px;\n          --simple-toolbar-button-height: 16px;\n          --simple-toolbar-button-width: 16px;\n        }\n        .toolbar-inner {\n          max-width: 96%;\n        }\n        hax-tray-button::part(button) {\n          font-size: var(hax-ui-font-size-xs);\n        }\n        simple-button-grid {\n          --simple-button-grid-margin: 2px;\n        }\n        simple-fields-field {\n          margin-top: 0;\n          margin-bottom: 8px;\n        }\n        simple-fields-field::part(option-input) {\n          padding: 0px 2px;\n          font-size: 12px;\n        }\n        a11y-collapse {\n          margin: 0;\n          --a11y-collapse-margin: 0;\n          --a11y-collapse-vertical-padding: 8px;\n          --a11y-collapse-horizontal-padding: 4px;\n        }\n        a11y-collapse::part(heading) {\n          margin: 8px 0px;\n        }\n      "])))]}},{key:"properties",get:function(){return s(s({},l(c(t),"properties",this)),{},{categories:{type:Array},hidden:{type:Boolean,reflect:!0},recentGizmoList:{type:Array},activePreview:{type:Number}})}},{key:"tag",get:function(){return"hax-gizmo-browser"}}])}(k(ce(h)));customElements.define(Zn.tag,Zn);var $n,eo,to,no,oo,io,ao,ro,so,lo,co,uo,ho,po,mo,vo=function(e){function t(){var e;return d(this,t),(e=u(this,t)).t={updateHTML:"Update HTML",copyHTML:"Copy HTML",downloadContent:"Download content",downloadHTML:"Download HTML",fileDownloaded:"File downloaded",downloadDOCX:"Download DOCX",downloadMD:"Download Markdown",downloadPDF:"Download PDF",PrettifyHtml:"Prettify HTML",cleanFormatting:"Clean Formatting",haxSchema:"HAXSchema",revisionHistory:"Revision history"},e.registerLocalization({context:e,namespace:"hax"}),b((function(){e.globalPreferences=y(ye.globalPreferences),e.haxUiTheme=(e.globalPreferences||{}).haxUiTheme||"hax"})),e}return o(t,e),i(t,[{key:"render",value:function(){return a($n||($n=r([""," "])),this.hidden?"":a(eo||(eo=r([' <hax-toolbar>\n            <hax-tray-button\n              label="','"\n              icon="icons:check"\n              @click="','"\n              show-text-label\n              icon-position="top"\n              class="updatecontent"\n            >\n            </hax-tray-button>\n            <hax-tray-button\n              @click="','"\n              icon="editor:format-clear"\n              label="','"\n              show-text-label\n              icon-position="top"\n            >\n            </hax-tray-button>\n            ','\n            <hax-tray-button\n              @click="','"\n              icon="hax:html-code"\n              label="','"\n              show-text-label\n              icon-position="top"\n            >\n            </hax-tray-button>\n            ','\n\n            <simple-toolbar-menu\n              icon="icons:file-download"\n              icon-position="top"\n              label="','"\n              @dblclick="','"\n              show-text-label\n            >\n              <simple-toolbar-menu-item>\n                <hax-tray-button\n                  icon="hax:file-html"\n                  icon-position="top"\n                  label="','"\n                  @click="','"\n                  show-text-label\n                >\n                </hax-tray-button>\n              </simple-toolbar-menu-item>\n              <simple-toolbar-menu-item>\n                ',"\n              </simple-toolbar-menu-item>\n              ","\n              ",'\n              <simple-toolbar-menu-item>\n                <hax-tray-button\n                  @click="','"\n                  label="','"\n                  icon="hax:code-json"\n                  show-text-label\n                  icon-position="top"\n                ></hax-tray-button>\n              </simple-toolbar-menu-item>\n            </simple-toolbar-menu>\n          </hax-toolbar>\n          <div id="wrapper">\n            <div id="spacer"></div>\n            <textarea id="hiddentextarea" hidden></textarea>\n            <code-editor\n              id="textarea"\n              theme="','"\n              language="html"\n              font-size="13"\n              word-wrap\n            ></code-editor>\n          </div>'])),this.t.updateHTML,this.updateBodyFromHTML,this.scrubContent,this.t.cleanFormatting,de.has("@core/prettyHtml")?a(to||(to=r(['\n                  <hax-tray-button\n                    label="','"\n                    icon="hax:format-textblock"\n                    @click="','"\n                    show-text-label\n                    icon-position="top"\n                  >\n                  </hax-tray-button>\n                '])),this.t.PrettifyHtml,this.prettifyContent):a(no||(no=r([""]))),this.selectBody,this.t.copyHTML,ye.revisionHistoryLink?a(oo||(oo=r([' <hax-tray-button\n                  @click="','"\n                  icon="hax:git"\n                  label="','"\n                  show-text-label\n                  icon-position="top"\n                >\n                </hax-tray-button>'])),this.revisionHistoryClick,this.t.revisionHistory):"",this.t.downloadContent,this.download,this.t.downloadHTML,this.download,de.has("@core/htmlToDocx")?a(io||(io=r(['\n                      <hax-tray-button\n                        label="','"\n                        icon="hax:file-docx"\n                        @click="','"\n                        show-text-label\n                        icon-position="top"\n                      >\n                      </hax-tray-button>\n                    '])),this.t.downloadDOCX,this.downloadDOCXviaMicro):a(ao||(ao=r(['\n                      <hax-tray-button\n                        label="','"\n                        icon="hax:file-docx"\n                        @click="','"\n                        show-text-label\n                        icon-position="top"\n                      >\n                      </hax-tray-button>\n                    '])),this.t.downloadDOCX,this.downloadDOCX),de.has("@core/htmlToMd")?a(ro||(ro=r(['\n                    <simple-toolbar-menu-item>\n                      <hax-tray-button\n                        label="','"\n                        icon="hax:format-textblock"\n                        @click="','"\n                        show-text-label\n                        icon-position="top"\n                      >\n                      </hax-tray-button>\n                    </simple-toolbar-menu-item>\n                  '])),this.t.downloadMD,this.downloadMDviaMicro):a(so||(so=r([""]))),de.has("@core/htmlToPdf")?a(lo||(lo=r(['\n                    <simple-toolbar-menu-item>\n                      <hax-tray-button\n                        label="','"\n                        icon="lrn:pdf"\n                        @click="','"\n                        show-text-label\n                        icon-position="top"\n                      >\n                      </hax-tray-button>\n                    </simple-toolbar-menu-item>\n                  '])),this.t.downloadPDF,this.downloadPDFviaMicro):a(co||(co=r([""]))),this.htmlToHaxElements,this.t.haxSchema,"hax"==this.haxUiTheme?"vs":"haxdark"==this.haxUiTheme?"vs-dark":"auto"))}},{key:"refreshHTMLEditor",value:function(e){this.updateEditor()}},{key:"download",value:(N=w(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contentToFile(!1);case 2:n=e.sent,this.downloadFromData(n,"html","my-new-code"),ye.toast(this.t.fileDownloaded),this.close();case 6:case"end":return e.stop()}}),e,this)}))),function(e){return N.apply(this,arguments)})},{key:"downloadDOCX",value:(S=w(E().mark((function e(t){var o=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.import("./e1e8b72f.js").then(function(){var e=w(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye.activeHaxBody.haxToContent();case 2:n=e.sent,globalThis.DOCXFileSystemBroker.requestAvailability().HTMLToDOCX(n,globalThis.document.title),ye.toast(o.t.fileDownloaded),o.close();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)}))),function(e){return S.apply(this,arguments)})},{key:"downloadDOCXviaMicro",value:(_=w(E().mark((function e(t){var n,o,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye.activeHaxBody.haxToContent();case 2:return n=e.sent,e.next=5,de.call("@core/htmlToDocx",{html:n});case 5:200==(o=e.sent).status&&((i=globalThis.document.createElement("a")).href=globalThis.URL.createObjectURL(pe("".concat(o.data),"application/vnd.openxmlformats-officedocument.wordprocessingml.document")),i.download="PageContents.docx",i.target="_blank",this.appendChild(i),i.click(),this.removeChild(i),ye.toast(this.t.fileDownloaded),this.close());case 7:case"end":return e.stop()}}),e,this)}))),function(e){return _.apply(this,arguments)})},{key:"downloadMDviaMicro",value:(k=w(E().mark((function e(t){var n,o,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye.activeHaxBody.haxToContent();case 2:return n=e.sent,e.next=5,de.call("@core/htmlToMd",{html:n});case 5:200==(o=e.sent).status&&o.data&&((i=globalThis.document.createElement("a")).href=globalThis.URL.createObjectURL(pe(btoa(o.data),"text/markdown")),i.download="PageContents.md",i.target="_blank",this.appendChild(i),i.click(),this.removeChild(i),ye.toast(this.t.fileDownloaded),this.close());case 7:case"end":return e.stop()}}),e,this)}))),function(e){return k.apply(this,arguments)})},{key:"downloadPDFviaMicro",value:(A=w(E().mark((function e(t){var n,o,i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye.activeHaxBody.haxToContent();case 2:return n=e.sent,o="",globalThis.document.querySelector("base")&&(o=globalThis.document.querySelector("base").href),e.next=7,de.call("@core/htmlToPdf",{base:o,html:n});case 7:200==(i=e.sent).status&&i.data&&((a=globalThis.document.createElement("a")).href=globalThis.URL.createObjectURL(pe(i.data,"application/pdf")),a.download="PageContents.pdf",a.target="_blank",this.appendChild(a),a.click(),this.removeChild(a),ye.toast(this.t.fileDownloaded),this.close());case 9:case"end":return e.stop()}}),e,this)}))),function(e){return A.apply(this,arguments)})},{key:"downloadfull",value:(x=w(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contentToFile(!0);case 2:n=e.sent,this.downloadFromData(n,"html","my-new-webpage"),ye.toast(this.t.fileDownloaded),this.close();case 6:case"end":return e.stop()}}),e,this)}))),function(e){return x.apply(this,arguments)})},{key:"updateBodyFromHTML",value:(f=w(E().mark((function e(t){var n,o,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.shadowRoot.querySelector("#textarea").value,!((o="slot"===ye.activeHaxBody.shadowRoot.querySelector("#body").localName?ye.activeHaxBody.shadowRoot.querySelector("#body").assignedNodes({flatten:!0}):[]).length>0&&"PAGE-BREAK"===o[0].tagName)||n.includes("<page-break")){e.next=7;break}return e.next=5,ye.nodeToContent(o[0]);case 5:i=e.sent,n=i+"\n"+n;case 7:ye.activeHaxBody.importContent(n),ye.haxTray.trayDetail="";case 9:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"scrubContent",value:function(e){var t=this.shadowRoot.querySelector("#textarea").value;ye.toast("Scrubbed, Content updated"),ye.activeHaxBody.importContent(ue(t)),this.close()}},{key:"prettifyContent",value:(v=w(E().mark((function e(t){var n,o,i,a=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye.activeHaxBody.haxToContent();case 2:return n=e.sent,e.next=5,de.call("@core/prettyHtml",{html:n});case 5:200==(o=e.sent).status&&(this.shadowRoot.querySelector("#textarea").editorValue="",setTimeout((function(){var e=o.data.replace(/^\s+|\s+$/gm,"");a.shadowRoot.querySelector("#textarea").editorValue=e}),0)),i=this.shadowRoot.querySelector("#textarea").value,ye.toast("Formatting updated, Content updated"),ye.activeHaxBody.importContent(i);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"openSource",value:function(){var e=this;globalThis.customElements.get("code-editor")?setTimeout((function(){e.updateEditor()}),1e3):n.import("./9b1def34.js").then((function(e){return e.b8})).then((function(){e.updateEditor(),setTimeout((function(){e.updateEditor()}),1e3)}))}},{key:"revisionHistoryClick",value:function(){ye.revisionHistoryLink&&globalThis.open(ye.revisionHistoryLink,"_blank")}},{key:"selectBody",value:function(e){var t=this.shadowRoot.querySelector("#hiddentextarea");t.value=this.shadowRoot.querySelector("#textarea").value,t.removeAttribute("hidden"),t.focus(),t.select(),globalThis.document.execCommand("copy"),t.setAttribute("hidden","hidden"),ye.toast(this.t.copiedToClipboard)}},{key:"htmlToHaxElements",value:(p=w(E().mark((function e(t){var n,o,i,a,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye.activeHaxBody.haxToContent();case 2:return n=e.sent,e.next=5,ye.htmlToHaxElements(n);case 5:(o=e.sent).shift(),i=JSON.stringify(o,null,2),a=this.shadowRoot.querySelector("#textarea").value,(r=this.shadowRoot.querySelector("#hiddentextarea")).removeAttribute("hidden"),r.value=i,r.focus(),r.select(),globalThis.document.execCommand("copy"),r.value=a,r.setAttribute("hidden","hidden"),ye.toast(this.t.copiedToClipboard),this.close();case 19:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"close",value:function(){ye.haxTray.trayDetail=""}},{key:"updateEditor",value:function(){var e=this;ye.activeHaxBody&&this.shadowRoot&&this.shadowRoot.querySelector("#textarea")&&(this.shadowRoot.querySelector("#textarea").editorValue="",setTimeout(w(E().mark((function t(){var n;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=he,t.next=3,ye.activeHaxBody.haxToContent();case 3:t.t1=t.sent,n=(0,t.t0)(t.t1),e.shadowRoot.querySelector("#textarea").editorValue=n;case 6:case"end":return t.stop()}}),t)}))),0))}},{key:"contentToFile",value:(h=w(E().mark((function e(t){var n,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye.activeHaxBody.haxToContent();case 2:return n=e.sent,o=n,t&&(o='\n        <!DOCTYPE html>\n        <html lang="en">\n          <head>\n            <meta charset="utf-8" />\n            <meta\n              name="viewport"\n              content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes"\n            />\n            <title>hax-body demo</title>\n            <script>globalThis.WCGlobalCDNPath="https://cdn.webcomponents.psu.edu/cdn/"; <\/script> <script src="https://cdn.webcomponents.psu.edu/cdn/build.js"><\/script> \n            <style>\n              body {\n                padding: 32px;\n              }\n            </style>\n          </head>\n          <body>\n          '.concat(n,"\n          </body>\n        </html>\n      ")),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),function(e){return h.apply(this,arguments)})}],[{key:"styles",get:function(){return[].concat(m(Se),[g(uo||(uo=r(["\n        :host {\n          display: block;\n          height: calc(100vh - 120px);\n        }\n        #wrapper {\n          margin: 0;\n          padding: 0;\n          display: flex;\n          flex-direction: column;\n          align-items: stretch;\n          position: relative;\n          flex: 1 1 100%;\n        }\n        #spacer {\n          flex: 1 1 100%;\n          z-index: -1;\n        }\n        #textarea {\n          position: absolute;\n          top: 0;\n          bottom: 0;\n          margin: 0;\n          padding: 0;\n          height: calc(100vh - 200px);\n        }\n        .updatecontent {\n          background-color: var(--simple-colors-default-theme-green-1);\n          color: var(--simple-colors-default-theme-green-8);\n        }\n        hax-toolbar {\n          flex: 0 0 auto;\n          background-color: var(--hax-ui-background-color);\n        }\n        hax-toolbar::part(buttons) {\n          display: flex;\n          justify-content: center;\n          align-items: stretch;\n          margin: 0 auto;\n        }\n        hax-tray-button {\n          flex: 1 1 auto;\n        }\n        simple-toolbar-menu {\n          --simple-toolbar-button-border-color: var(--hax-ui-border-color);\n        }\n        /** This is mobile layout for controls */\n        @media screen and (max-width: 800px) {\n          hax-tray-button {\n            flex: 0 1 auto;\n          }\n        }\n      "])))])}},{key:"tag",get:function(){return"hax-view-source"}},{key:"properties",get:function(){return s(s({},l(c(t),"properties",this)),{},{globalPreferences:{type:Object},hidden:{type:Boolean,reflect:!0},theme:{type:String}})}}]);var h,p,v,f,x,A,k,_,S,N}(k(function(e){return function(e){function t(){return d(this,t),u(this,t,arguments)}return o(t,e),i(t,[{key:"downloadFromData",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"download",o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=this.fileTypes[t.toUpperCase()],a=new Blob([decodeURIComponent(encodeURI(e))],{type:i}),r=n+"."+t.toLowerCase();if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(a,r);else{var s=document.createElement("a");s.href=(window.URL||window.webkitURL).createObjectURL(a),s.download=r,s.target=o?"_blank":"_self",this.appendChild(s),s.click(),this.removeChild(s)}}},{key:"downloadFromURI",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return window.open(e,t?"_blank":"_self"),!0}}],[{key:"properties",get:function(){return l(c(t),"properties",this)?Object.assign({fileTypes:{type:Object,value:function(){return{CSV:"text/csv",JSON:"text/json",PDF:"application/pdf",TXT:"text/plain",HTML:"text/html"}}}},l(c(t),"properties",this)):{fileTypes:{type:Object,value:function(){return{CSV:"text/csv",JSON:"text/json",PDF:"application/pdf",TXT:"text/plain",HTML:"text/html"}}}}}}])}(e)}(h)));customElements.define(vo.tag,vo);var go,fo,bo,yo,xo,Ao,ko,wo=function(e){function t(){var e;return d(this,t),(e=u(this,t)).staxList=[],e.label="Templates",e}return o(t,e),i(t,[{key:"render",value:function(){return a(ho||(ho=r(['\n      <a11y-collapse heading="','" heading-button>\n        <simple-button-grid columns="2" rows="1" always-expanded>\n          ',"\n        </simple-button-grid>\n      </a11y-collapse>\n    "])),this.label,this.staxList.map((function(e){return a(po||(po=r(['\n              <hax-tray-button\n                icon-position="top"\n                show-text-label\n                index="','"\n                label="','"\n                .stax="','"\n                icon="hax:templates"\n                color="green"\n                event-name="insert-stax"\n              ></hax-tray-button>\n            '])),e.index,e.details.title,e.stax)})))}}],[{key:"styles",get:function(){return[g(mo||(mo=r(["\n        :host {\n          display: flex;\n          flex-direction: column;\n          align-items: stretch;\n          flex: 0 0 auto;\n          overflow-y: auto;\n        }\n        hax-tray-button {\n          flex: auto;\n          font-size: 12px;\n          --hax-ui-font-size-sm: 12px;\n          --simple-toolbar-button-height: 22px;\n          --simple-toolbar-button-width: 22px;\n        }\n        hax-tray-button[small] {\n          font-size: 8px;\n          --hax-ui-font-size-sm: 8px;\n          --simple-toolbar-button-height: 16px;\n          --simple-toolbar-button-width: 16px;\n        }\n        hax-tray-button::part(button) {\n          font-size: var(hax-ui-font-size-xs);\n        }\n        simple-button-grid {\n          overflow: auto;\n          --simple-button-grid-margin: 2px;\n        }\n        a11y-collapse {\n          margin: 0;\n          --a11y-collapse-margin: 0;\n          --a11y-collapse-vertical-padding: 8px;\n          --a11y-collapse-horizontal-padding: 4px;\n        }\n        a11y-collapse::part(heading) {\n          margin: 8px 0px;\n        }\n      "])))]}},{key:"tag",get:function(){return"hax-stax-browser"}},{key:"properties",get:function(){return{staxList:{type:Array},label:{type:String}}}}])}(h);customElements.define(wo.tag,wo);var Eo,_o,So,No,To,Co,Lo,Bo,Mo,zo,Po,Oo,Ho,Ro,Do,Fo,Io=function(t){function n(){var e;return d(this,n),(e=u(this,n)).elementList=[],e.t={contentStatistics:"Content Statistics",words:"Words",headings:"Headings",paragraphs:"Paragraphs",widgets:"Widgets",characters:"Characters",listView:"List view"},e.registerLocalization({context:e,namespace:"hax"}),b((function(){ye.editMode&&(e.activeNode=y(ye.activeNode),setTimeout((function(){e.requestUpdate()}),0))})),e}return o(n,t),i(n,[{key:"updateHAXMap",value:(h=w(E().mark((function e(t){var n,o,i,a,r,s,l,c;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],o=0;case 2:if(!(o<ye.activeHaxBody.childNodes.length)){e.next=25;break}return i=ye.activeHaxBody.childNodes[o],e.next=6,O(i,null);case 6:if((a=e.sent).parent=null,a.node=i,n.push(a),!(i.children&&i.children.length>0)){e.next=22;break}r=0;case 12:if(!(r<i.children.length)){e.next=22;break}return e.next=15,O(i.children[r],null);case 15:(s=e.sent).parent=a.tag,s.node=i.children[r],["span","strong","b","sup","sub","i","em","div","strike"].includes(s.tag)||n.push(s);case 19:r++,e.next=12;break;case 22:o++,e.next=2;break;case 25:for(this.calcStats(n),l=[],o=0;o<n.length;o++)(c=ye.haxSchemaFromTag(n[o].tag)).gizmo?l.push({node:n[o].node,tag:n[o].tag,parent:n[o].parent,icon:c.gizmo.icon,name:c.gizmo.title}):n[o].tag&&n[o].tag.includes("-")?l.push({tag:n[o].tag,parent:n[o].parent,icon:"hax:templates",name:"Widget"}):l.push({tag:n[o].tag,parent:n[o].parent,icon:"hax:paragraph",name:"HTML block"});this.elementList=[].concat(l);case 29:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"calcStats",value:function(e){if(e&&ye.activeHaxBody.innerText){var t={c:ye.activeHaxBody.innerText.length,w:parseInt(ye.activeHaxBody.innerText.split(/\s+/g).length-1),h:0,b:0,p:0,e:0};for(var n in e.forEach((function(e){switch(e.tag){case"blockquote":case"div":case"span":case"p":case"ul":case"ol":case"strong":case"em":t.p++;break;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":t.h++;break;default:t.e++}})),t)this["".concat(n,"Count")]=t[n]}}},{key:"render",value:function(){var e=this;return a(go||(go=r([""," "])),this.hidden?"":a(fo||(fo=r([" <h5>",'</h5>\n          <div class="stats">\n            <div class="stat">\n              <span>',"</span>\n              <span>",'</span>\n            </div>\n            <div class="stat">\n              <span>',"</span>\n              <span>",'</span>\n            </div>\n            <div class="stat">\n              <span>',"</span>\n              <span>",'</span>\n            </div>\n            <div class="stat">\n              <span>',"</span>\n              <span>",'</span>\n            </div>\n            <div class="stat">\n              <span>',"</span>\n              <span>","</span>\n            </div>\n          </div>\n          <h5>","</h5>\n          <ul>\n            ","\n          </ul>"])),this.t.contentStatistics,this.wCount,this.t.words,this.pCount,this.t.paragraphs,this.cCount,this.t.characters,this.hCount,this.t.headings,this.eCount,this.t.widgets,this.t.listView,this.indentedElements(this.elementList).map((function(t,n){return a(bo||(bo=r(['\n                <li\n                  class="'," ",'"\n                >\n                  <hax-toolbar-item\n                    align-horizontal="left"\n                    @click="','"\n                    @dblclick="','"\n                    data-index="','"\n                    ?data-active-item="','"\n                    icon="','"\n                    label="','"\n                    show-text-label\n                  >\n                  </hax-toolbar-item>\n                  ',"\n                </li>\n              "])),t.parent?"parent-".concat(t.parent):"no-parent",["h1","h2","h3","h4","h5","h6",t.tag].includes(t.parent)?"":"is-child",(function(t){return e.goToItem(n)}),(function(t){return e.editItem(n)}),n,t.node===e.activeNode,t.icon,t.name,"page-break"!=t.tag?a(yo||(yo=r(['\n                        <simple-icon-button-lite\n                          icon="','"\n                          @click="','"\n                          title="Lock / Unlock"\n                        ></simple-icon-button-lite>\n                        ','\n                        <simple-icon-button-lite\n                          icon="hax:keyboard-arrow-up"\n                          @click="','"\n                          title="Move up"\n                          ?disabled="','"\n                        ></simple-icon-button-lite>\n                        <simple-icon-button-lite\n                          icon="hax:keyboard-arrow-down"\n                          @click="','"\n                          title="Move down"\n                          ?disabled="','"\n                        ></simple-icon-button-lite>\n                        <simple-icon-button-lite\n                          class="del"\n                          icon="delete"\n                          @click="','"\n                          title="Delete"\n                          ?disabled="','"\n                        ></simple-icon-button-lite>\n                      '])),e.isLocked(n)?"icons:lock":"icons:lock-open",(function(t){return e.itemOp(n,"lock")}),ye.isTextElement(t.node)||"grid-plate"==t.tag?a(xo||(xo=r([""]))):a(Ao||(Ao=r(['\n                              <simple-icon-button-lite\n                                icon="image:transform"\n                                @click="','"\n                                title="Change to.."\n                              ></simple-icon-button-lite>\n                            '])),(function(t){return e.itemOp(n,"transform")})),(function(t){return e.itemOp(n,"up")}),e.isLocked(n),(function(t){return e.itemOp(n,"down")}),e.isLocked(n),(function(t){return e.itemOp(n,"delete")}),e.isLocked(n)):"")}))))}},{key:"editItem",value:function(e){!1!==e&&this.elementList[e].node&&this.dispatchEvent(new CustomEvent("hax-context-item-selected",{bubbles:!0,cancelable:!0,composed:!0,detail:{target:this.elementList[e].node,eventName:"content-edit",value:!0}}))}},{key:"isLocked",value:function(e){if(!1!==e&&this.elementList[e].node){var t=this.elementList[e].node;return!!(null!=t.getAttribute("data-hax-lock")||t.parentNode&&null!=t.parentNode.getAttribute("data-hax-lock"))}}},{key:"itemOp",value:function(e,t){var n=this;if(!1!==e&&this.elementList[e].node&&t){var o=this.elementList[e].node;if(null==o.getAttribute("data-hax-lock")&&o.parentNode&&null==o.parentNode.getAttribute("data-hax-lock"))switch(t){case"transform":this.dispatchEvent(new CustomEvent("hax-context-item-selected",{bubbles:!0,cancelable:!0,composed:!0,detail:{target:o,eventName:"hax-transform-node",value:!0}}));break;case"lock":o.setAttribute("data-hax-lock","data-hax-lock");break;case"delete":ye.activeHaxBody.haxDeleteNode(o);break;case"down":o.nextElementSibling&&ye.activeHaxBody.haxMoveGridPlate(o);break;case"up":o.previousElementSibling&&"PAGE-BREAK"!==o.previousElementSibling.tagName&&ye.activeHaxBody.haxMoveGridPlate(o,-1)}else"lock"===t&&o.removeAttribute("data-hax-lock");setTimeout((function(){n.requestUpdate()}),0)}}},{key:"indentedElements",value:function(e){var t="h1";return e.map((function(e){var n=e;return null===n.parent&&(n.parent=t),["h1","h2","h3","h4","h5","h6"].includes(n.tag)&&(n.parent=n.tag,t=n.tag),n}))}},{key:"goToItem",value:function(e){if(!1!==e&&this.elementList[e].node){var t=this.elementList[e].node;ye.activeNode=t,t.classList.add("blinkfocus"),"function"==typeof t.scrollIntoViewIfNeeded?t.scrollIntoViewIfNeeded(!1):t.scrollIntoView({behavior:"smooth",inline:"center"}),setTimeout((function(){t.classList.remove("blinkfocus")}),500)}}},{key:"scrollInMap",value:function(){var t=T(e)[0];this.goToItem(t.getAttribute("data-index"))}}],[{key:"styles",get:function(){return[l(c(n),"styles",this)].concat(m(Ne),[g(ko||(ko=r(['\n        :host {\n          display: block;\n        }\n        .container {\n          text-align: left;\n        }\n        .stats {\n          display: flex;\n          align-items: stretch;\n          flex-wrap: wrap;\n        }\n        .stat {\n          flex: 1 1 auto;\n          text-align: center;\n          border: 1px solid var(--hax-ui-border-color);\n          font-weight: normal;\n          font-size: var(--hax-ui-font-size-xs);\n          line-height: 140%;\n          padding: var(--hax-ui-spacing-sm);\n        }\n        .stat > * {\n          display: block;\n        }\n        .stat *:first-child {\n          font-weight: bold;\n          font-size: 150%;\n        }\n        ul {\n          list-style: none;\n          padding: 0;\n          margin: 0;\n        }\n        ul li {\n          margin: 0;\n          padding: 0;\n          display: flex;\n          height: 38px;\n        }\n        li hax-toolbar-item {\n          display: inline-flex;\n          max-width: 60%;\n          height: 38px;\n          margin-right: 8px;\n          overflow: hidden;\n        }\n        li simple-icon-button-lite {\n          display: inline-flex;\n          opacity: 0;\n          visibility: hidden;\n          --simple-icon-width: 14px;\n          --simple-icon-height: 14px;\n          height: 38px;\n          margin: 0 4px;\n          color: var(--simple-colors-default-theme-grey-12, black);\n          background-color: var(--simple-colors-default-theme-grey-1, white);\n        }\n        li simple-icon-button:hover {\n          background-color: var(--simple-colors-default-theme-grey-2, white);\n        }\n        li simple-icon-button.del {\n          margin-left: 16px;\n        }\n        li:hover simple-icon-button-lite {\n          visibility: visible;\n          opacity: 1;\n        }\n        hax-toolbar-item[data-active-item]::part(button) {\n          color: var(--hax-ui-color);\n          background-color: var(--hax-ui-background-color-accent);\n          border-color: var(--hax-ui-color-accent);\n        }\n        li.is-child {\n          margin-left: 8px;\n        }\n\n        li hax-toolbar-item,\n        li.parent-h2 hax-toolbar-item[icon="hax:h2"] {\n          margin-left: 0px;\n          cursor: pointer;\n        }\n        li.parent-h2 hax-toolbar-item,\n        li.parent-h2 + li.is-child hax-toolbar-item,\n        li.parent-h2 + li.is-child ~ li.is-child hax-toolbar-item,\n        li.parent-h3 hax-toolbar-item[icon="hax:h3"] {\n          margin-left: 8px;\n        }\n        li.parent-h3 hax-toolbar-item,\n        li.parent-h3 + li.is-child hax-toolbar-item,\n        li.parent-h3 + li.is-child ~ li.is-child hax-toolbar-item,\n        li.parent-h4 hax-toolbar-item[icon="hax:h4"] {\n          margin-left: 8px;\n        }\n        li.parent-h4 hax-toolbar-item,\n        li.parent-h4 + li.is-child hax-toolbar-item,\n        li.parent-h4 + li.is-child ~ li.is-child hax-toolbar-item,\n        li.parent-h5 hax-toolbar-item[icon="hax:h5"] {\n          margin-left: 12px;\n        }\n        li.parent-h5 hax-toolbar-item,\n        li.parent-h5 + li.is-child hax-toolbar-item,\n        li.parent-h5 + li.is-child ~ li.is-child hax-toolbar-item,\n        li.parent-h6 hax-toolbar-item[icon="hax:h6"],\n        li.parent-h6 hax-toolbar-item,\n        li.parent-h6 + li.is-child hax-toolbar-item,\n        li.parent-h6 + li.is-child ~ li.is-child hax-toolbar-item {\n          margin-left: 12px;\n        }\n      '])))])}},{key:"tag",get:function(){return"hax-map"}},{key:"properties",get:function(){return s(s({},l(c(n),"properties",this)),{},{opened:{type:Boolean},hidden:{type:Boolean,reflect:!0},elementList:{type:Array},cCount:{type:String},wCount:{type:String},bCount:{type:String},hCount:{type:String},pCount:{type:String},eCount:{type:String},activeNode:{type:Object}})}}]);var h}(k(I));customElements.define(Io.tag,Io);var Uo,qo,Go=function(e){function t(){var e,n;return d(this,t),(n=u(this,t)).tourController=new AbortController,n.dragController=new AbortController,n.tourName="hax",n.__winEvents={"can-redo-changed":"_redoChanged","can-undo-changed":"_undoChanged","hax-drop-focus-event":"_expandSettingsPanel"},n.trayIcon="settings",n.resizeDrag=!1,n.hideToolbar=!1,n.dark=!1,n.__moveX=0,n.t=(ge(ge(ge(ge(ge(ge(ge(ge(ge(ge(e={structure:"Outline",htmlSource:"HTML Source",structureTip:"View Page Structure",edit:"Edit",save:"Save",move:"Move",close:"Close"},"move","Move"),"menuAlignment","Menu Alignment"),"menuLeft","Move"),"menuRight","Move"),"menuPosition","Menu position"),"changeSideVisually","Change which side of the screen the menu is affixed to visually."),"expand","Expand"),"collapse","Collapse"),"menuSize","Menu size"),"menuSizeDescription","Expand or collapse the menu visually."),ge(ge(ge(ge(ge(ge(ge(ge(ge(ge(e,"merlin","Merlin"),"summonMerlin","Summon Merlin"),"settings","Settings"),"source","Source"),"undo","Undo"),"redo","Redo"),"media","Media"),"blocks","Blocks"),"cancel","Cancel"),"cancelWithoutSaving","Cancel without saving"),ge(ge(ge(ge(ge(ge(ge(ge(ge(ge(e,"configure","Configure"),"advanced","Advanced"),"developer","Developer"),"alignment","Alignment"),"left","Left"),"center","Center"),"right","Right"),"search","Search"),"templates","Templates"),"width","Width")),n.registerLocalization({context:n,namespace:"hax",updateCallback:"_updateTrayDetail"}),n._initial=!0,n.activeValue={settings:{configure:{},advanced:{},developer:{}}},n.collapsed=!0,n.activeSchema=[{property:"settings",inputMethod:"collapse",properties:[]}],n.canUndo=!1,n.canRedo=!1,n.trayDetail="content-edit",n.activeTagName="",n.traySizeIcon="hax:arrow-expand-right",n.__setup=!1,n.addEventListener("hax-tray-button-click",n._processTrayEvent.bind(n)),b((function(){n.activeGizmo=y(ye.activeGizmo)})),b((function(){n.activeNode=y(ye.activeNode)})),b((function(){n.elementAlign=y(ye.elementAlign)})),b((function(){n.tourOpened=y(ye.tourOpened)})),b((function(){n.loading=!y(ye.appStoreLoaded)})),b((function(){n.globalPreferences=y(ye.globalPreferences),n.haxUiTheme=(n.globalPreferences||{}).haxUiTheme||"hax",n.dark="haxdark"===n.haxUiTheme,globalThis.document.body.setAttribute("hax-ui-theme",n.haxUiTheme)})),b((function(){n.editMode=y(ye.editMode)})),n}return o(t,e),i(t,[{key:"_expandSettingsPanel",value:function(e){this.hideToolbar||this.shadowRoot.querySelector("#content-edit").click()}},{key:"_redoChanged",value:function(e){this.canRedo=e.detail.value}},{key:"_undoChanged",value:function(e){this.canUndo=e.detail.value}},{key:"trayStatus",get:function(){var e=this.collapsed?"collapsed":"view-source"==this.trayDetail?"full-panel":"side-panel";return ye.trayStatus=e,ye.trayDetail=this.trayDetail,e}},{key:"render",value:function(){return a(Eo||(Eo=r(["\n      ",'\n      <div class="wrapper ','">\n        ','\n        <div class="detail">\n          <loading-indicator ?loading="','"></loading-indicator>\n          ','\n        </div>\n        <div\n          class="resize"\n          id="resize"\n          @mousedown="','"\n          @dblclick="','"\n        >\n          <div class="resize-visual"></div>\n        </div>\n      </div>\n    '])),this.panelOpsTemplate,this.trayStatus,this.hideToolbar?"":a(_o||(_o=r(["",""])),this.menuToolbarTemplate),this.loading,this.trayDetailTemplate,this.resizeDown,this.resetSize)}},{key:"resetSize",value:function(e){var t=this;this.resizeDrag=!1,this.dragController.abort(),setTimeout((function(){t.shadowRoot.querySelector(".detail").style.removeProperty("width")}),10)}},{key:"resizeDown",value:function(e){var t=this;this.resizeDrag=!0,this.__moveX=e.x,this.dragController=new AbortController,this.addEventListener("mousemove",(function(e){if(0===e.which&&(t.resizeDrag=!1,t.dragController.abort()),t.resizeDrag){t.__moveX=e.x;var n=44;t.hideToolbar&&(n=0),"right"===t.elementAlign?t.shadowRoot.querySelector(".detail").style.width=globalThis.innerWidth-t.__moveX-n+"px":t.shadowRoot.querySelector(".detail").style.width=t.__moveX-n+"px"}}),{signal:this.dragController.signal}),this.addEventListener("mouseup",(function(e){t.resizeDrag=!1,t.dragController.abort()}),{signal:this.dragController.signal})}},{key:"panelOpsTemplate",get:function(){return this.hidePanelOps?"":a(So||(So=r(['\n          <hax-tray-button\n            large\n            voice-command="edit page"\n            .data-opened="','"\n            @click="','"\n            icon="create"\n            id="button"\n            feature\n            show-text-label\n            show-tooltip\n            label="','"\n          ></hax-tray-button>\n        '])),this.editMode,this._clickEditButton,this.editMode?this.t.save:this.t.edit)}},{key:"toolbarsTemplate",get:function(){return a(No||(No=r(["","",""])),this.opsToolbarTemplate,this.trayToolbarTemplate)}},{key:"menuToolbarTemplate",get:function(){return a(To||(To=r([' <div id="menubar" class="collapse-menu">\n      '," "," ",'\n      <slot name="tray-buttons-pre"></slot>\n      ',"\n    </div>"])),this.saveButtons,this.doButtons,this.contentButtons,this.moreButtons)}},{key:"menuButtons",get:function(){return a(Co||(Co=r(['\n      <hax-tray-button\n        show-tooltip\n        align-horizontal="','"\n        id="haxMenuAlign"\n        event-name="toggle-element-align"\n        icon="arrow-','"\n        label="','"\n        index="','"\n        tooltip="'," ",'"\n      >\n      </hax-tray-button>\n    '])),this.collapsed?"left":"center","left"==this.elementAlign?"forward":"back","left"==this.elementAlign?this.t.menuRight:this.t.menuLeft,"left"==this.elementAlign?"1":"0",this.t.move,"left"==this.elementAlign?this.t.right:this.t.left)}},{key:"saveButtons",get:function(){return this.hidePanelOps?"":a(Lo||(Lo=r(['\n          <hax-tray-button\n            @click="','"\n            icon="save"\n            icon-position="left"\n            id="haxsavebutton"\n            label="','"\n            event-name="save"\n            voice-command="save page"\n            show-text-label\n            show-tooltip\n            align-horizontal="','"\n          ></hax-tray-button>\n          <hax-tray-button\n            icon="cancel"\n            id="haxcancelbutton"\n            label="','"\n            icon-position="left"\n            show-text-label\n            show-tooltip\n            align-horizontal="','"\n          ></hax-tray-button>\n        '])),this._clickSaveButton,this.editMode?this.t.save:this.t.edit,this.collapsed?"left":"center",this.t.cancel,this.collapsed?"left":"center")}},{key:"doButtons",get:function(){return a(Bo||(Bo=r([' <hax-tray-button\n        icon="icons:undo"\n        ?disabled="','"\n        label="','"\n        event-name="undo"\n        voice-command="undo"\n        data-simple-tour-stop\n        data-stop-title="label"\n        icon-position="left"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n      >\n        <div slot="tour" data-stop-content>\n          Undo the previous operation in the content, whether typing or adding a\n          widget.\n        </div>\n      </hax-tray-button>\n      <hax-tray-button\n        icon="icons:redo"\n        ?disabled="','"\n        label="','"\n        event-name="redo"\n        voice-command="redo"\n        data-simple-tour-stop\n        data-stop-title="label"\n        icon-position="left"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n      >\n        <div slot="tour" data-stop-content>\n          Redo the last action that you hit Undo on.\n        </div>\n      </hax-tray-button>'])),!this.canUndo,this.t.undo,this.collapsed?"left":"center",!this.canRedo,this.t.redo,this.collapsed?"left":"center")}},{key:"contentButtons",get:function(){return a(Mo||(Mo=r([' <hax-tray-button\n        event-name="content-edit"\n        icon="settings"\n        id="content-edit"\n        label="','"\n        ?disabled="','"\n        voice-command="(modify)(configure)(edit) selected"\n        data-simple-tour-stop\n        data-stop-title="label"\n        controls="tray-detail"\n        tooltip="'," ",'"\n        toggles\n        ?toggled="','"\n        icon-position="left"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n      >\n        <div slot="tour" data-stop-content>\n          When you want to add any content to the page from text, to images, to\n          anything more advanced; you can always find items to add under the Add\n          content menu. Click to expand, then either drag and drop items into\n          the page or click and have them placed near whatever you are actively\n          working on.\n        </div>\n      </hax-tray-button>\n      <hax-tray-button\n        event-name="content-add"\n        icon="hax:add-brick"\n        id="content-add"\n        label="','"\n        voice-command="select blocks (menu)"\n        data-simple-tour-stop\n        data-stop-title="label"\n        controls="tray-detail"\n        toggles\n        ?toggled="','"\n        icon-position="left"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n      >\n        <div slot="tour" data-stop-content>\n          When you want to add any content to the page from text, to images, to\n          anything more advanced; you can always find items to add under the Add\n          content menu. Click to expand, then either drag and drop items into\n          the page or click and have them placed near whatever you are actively\n          working on.\n        </div>\n      </hax-tray-button>\n      <hax-tray-button\n        icon="hax:multimedia"\n        label="','"\n        voice-command="select media (menu)"\n        data-simple-tour-stop\n        data-stop-title="label"\n        controls="tray-detail"\n        toggles\n        icon-position="left"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n        @click="','"\n      >\n        <div slot="tour" data-stop-content>\n          Search for media and content anywhere that your copy of HAX has access\n          to. Pick what to search, perform the search and then click or drag the\n          item into the contnet.\n        </div>\n      </hax-tray-button>\n      <hax-tray-button\n        event-name="content-map"\n        icon="icons:toc"\n        id="content-map"\n        label="','"\n        voice-command="select structure (menu)"\n        data-simple-tour-stop\n        data-stop-title="label"\n        controls="tray-detail"\n        toggles\n        ?toggled="','"\n        icon-position="left"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n      >\n        <div data-stop-content>\n          This is a simple list of all the block areas of the page that are\n          clickable to jump through items quickly as well as review some simple\n          overview stats.\n        </div>\n      </hax-tray-button>'])),this.t.edit,!this.activeTagName||""==this.activeTagName||!this.activeNode||!this.activeNode.tagName,this.t.edit,this.activeTagName,!this.collapsed&&"content-edit"===this.trayDetail,this.collapsed?"left":"center",this.t.blocks,!this.collapsed&&"content-add"===this.trayDetail,this.collapsed?"left":"center",this.t.media,this.collapsed?"left":"center",this._clickMediaButton,this.t.structure,!this.collapsed&&"content-map"===this.trayDetail,this.collapsed?"left":"center")}},{key:"_clickMediaButton",value:function(e){z.runProgram("sources"),z.open()}},{key:"moreButtons",get:function(){return a(zo||(zo=r(['<hax-tray-button\n        id="exportbtn"\n        icon="hax:html-code"\n        label="','"\n        event-name="view-source"\n        voice-command="view (page) source"\n        data-simple-tour-stop\n        data-stop-title="label"\n        icon-position="left"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n      >\n        <div data-stop-content>\n          Every change you make in HAX is ultimately writing HTML. Know HTML?\n          Awesome, pop open the source view and make any changes you like. HTML\n          is always behind the scenes ensuring that content is portable, well\n          formatted and easy to read.\n        </div>\n      </hax-tray-button>\n      <hax-tray-button\n        event-name="super-daemon"\n        icon="hax:wizard-hat"\n        label="','"\n        voice-command="','"\n        toggles\n        ?toggled="','"\n        icon-position="left"\n        tooltip="','"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n      ></hax-tray-button> '])),this.t.source,this.collapsed?"left":"center",this.t.merlin,this.t.merlin,!this.collapsed&&this.tourOpened,this.t.summonMerlin,this.collapsed?"left":"center")}},{key:"trayDetailTemplate",get:function(){return a(Po||(Po=r([' <div\n      id="tray-detail"\n      aria-live="polite"\n      aria-disabled="','"\n      tabindex="','"\n      selected-detail="','"\n    >\n      <h4 class="tray-detail-titlebar">\n        <simple-icon-lite\n          class="tray-detail-titlebar-icon"\n          icon="','"\n        ></simple-icon-lite>\n        <div class="tray-detail-titlebar-label">\n          ','\n        </div>\n        <div class="tray-detail-titlebar-actions">',"</div>\n      </h4>\n      "," ","\n      "," ","\n    </div>"])),this.collapsed?"true":"false",this.collapsed?"-1":"0",this.trayDetail,this.trayIcon,this.trayLabel||"".concat(this.activeTagName),this.menuButtons,this.viewSourceTemplate,this.contentMapTemplate,this.contentEditTemplate,this.contentAddTemplate)}},{key:"viewSourceTemplate",get:function(){return a(Oo||(Oo=r([' <hax-view-source\n      id="view-source"\n      ?hidden="','"\n    ></hax-view-source>'])),"view-source"!==this.trayDetail)}},{key:"contentEditTemplate",get:function(){return a(Ho||(Ho=r([' <simple-fields\n      id="settingsform"\n      ?dark="','"\n      disable-responsive\n      code-theme="','"\n      ?hidden="','"\n    ></simple-fields>'])),"haxdark"==this.haxUiTheme,"system"==this.haxUiTheme?"auto":"haxdark"==this.haxUiTheme?"vs-dark":"vs","content-edit"!==this.trayDetail)}},{key:"contentAddTemplate",get:function(){var e="content-add"!==this.trayDetail;return a(Ro||(Ro=r(['<div class="block-add-wrapper">\n      <hax-tray-upload ?hidden="','" show-sources></hax-tray-upload>\n      <hax-gizmo-browser\n        id="gizmobrowser"\n        ?hidden="','"\n      ></hax-gizmo-browser>\n      <hax-stax-browser\n        id="staxbrowser"\n        ?hidden="','"\n        label="','"\n      ></hax-stax-browser>\n      <hax-app-search ?hidden="','" id="haxappsearch"></hax-app-search>\n    </div>'])),e,e,e,this.t.templates,e)}},{key:"contentMapTemplate",get:function(){return a(Do||(Do=r(['<hax-map\n      controls="content-map"\n      ?hidden="','"\n    ></hax-map>'])),"content-map"!==this.trayDetail)}},{key:"_refreshAddData",value:function(){this.shadowRoot.querySelector("#gizmobrowser").resetList(y(ye.gizmoList)),this.shadowRoot.querySelector("#staxbrowser").staxList=m(y(ye.staxList))}},{key:"_processTrayEvent",value:function(e){var t=T(e)[0],n=e.detail.eventName;switch("HAX-TRAY-BUTTON"==t.tagName&&e.detail.eventName===this.trayDetail?this.collapsed=!this.collapsed:this.collapsed=!1,n){case"insert-stax":this.dispatchEvent(new CustomEvent("hax-insert-content-array",{bubbles:!0,cancelable:!0,composed:!0,detail:t.stax}));break;case"insert-tag":var o,i={tag:e.detail.value},a=ye.haxSchemaFromTag(e.detail.value);if(ye.recentGizmoList.push(a.gizmo),(t.getAttribute("data-demo-schema")||e.detail.demoSchema)&&a&&a.demoSchema&&a.demoSchema[0])o=a.demoSchema[0];else{var r=JSON.parse(t.getAttribute("event-properties")),s=t.getAttribute("event-content");e.detail.properties&&(r=e.detail.properties),null==r&&(r={}),e.detail.content&&(s=e.detail.content),null==s&&(s=""),o=ye.haxElementPrototype(i,r,s)}this.dispatchEvent(new CustomEvent("hax-insert-content",{bubbles:!0,cancelable:!0,composed:!0,detail:o}));break;case"toggle-element-align":var l=["left","right"],c=l[e.detail.index]?l[e.detail.index]:"left";this.style.setProperty("--hax-tray-custom-y",null),this.style.setProperty("--hax-tray-custom-x",null),ye.elementAlign=c,me("hax-tray-elementAlign",c);break;case"super-daemon":z.open(),this.collapsed=!1;break;case"content-map":case"content-edit":case"content-add":this.trayDetail=e.detail.eventName;break;case"start-tour":this.startTour();break;case"stop-tour":globalThis.SimpleTourManager.requestAvailability().stopTour("hax");break;case"undo":ye.activeHaxBody.undo();break;case"redo":ye.activeHaxBody.redo();break;case"view-source":this.trayDetail=e.detail.eventName,this.shadowRoot.querySelector("#view-source").openSource(),this.collapsed=!1}}},{key:"startTour",value:function(){this.__tour=this.__tour||globalThis.SimpleTourManager.requestAvailability(),this.tourController=new AbortController,globalThis.addEventListener("tour-changed",this._handleTourChanged.bind(this),{signal:this.tourController.signal}),this.__tour.startTour("hax")}},{key:"stopTour",value:function(){this.__tour=this.__tour||globalThis.SimpleTourManager.requestAvailability(),this.__tour.stopTour("hax"),this.tourController.abort()}},{key:"_handleTourChanged",value:function(e){this.tourOpened=e.detail.active==this.tourName}},{key:"firstUpdated",value:function(e){var n=this;l(c(t.prototype),"firstUpdated",this)&&l(c(t.prototype),"firstUpdated",this).call(this,e),this.__setup||(this.shadowRoot.querySelector("#settingsform").schematizer=xe,this.shadowRoot.querySelector("#settingsform").elementizer=Ae,setTimeout((function(){n.shadowRoot.querySelector(".wrapper").style.margin=n.offsetMargin}),1e3),this.__setup=!0,this.shadowRoot.querySelector("#settingsform").addEventListener("value-changed",this.__valueChangedEvent.bind(this)),this.dispatchEvent(new CustomEvent("hax-register-core-piece",{bubbles:!0,cancelable:!0,composed:!0,detail:{piece:"haxTray",object:this}})))}},{key:"updated",value:(h=w(E().mark((function e(n){var o=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l(c(t.prototype),"updated",this)&&l(c(t.prototype),"updated",this).call(this,n),n.forEach(function(){var e=w(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("editMode"!=n){e.next=5;break}if(!o.editMode){e.next=4;break}return e.next=4,ye.refreshActiveNodeForm();case 4:o._editModeChanged(o.editMode);case 5:if("offsetMargin"==n&&setTimeout((function(){o.shadowRoot.querySelector(".wrapper").style.margin=o.offsetMargin}),0),"trayDetail"==n&&o._updateTrayDetail(o[n]),"collapsed"==n&&o[n]&&o._editModeChanged(o.editMode),"activeGizmo"==n&&"view-source"!==o.trayDetail&&(o.activeGizmo?(o.activeTagName=o.activeGizmo.title,t&&["content-map","content-edit","content-add"].includes(o.trayDetail)||(o.trayDetail="content-edit")):["content-add","content-map"].includes(o.trayDetail)||(o.trayDetail="content-add")),"activeNode"!=n){e.next=14;break}if(!o.activeNode||!o.activeNode.tagName){e.next=14;break}if(!o.editMode){e.next=14;break}return e.next=14,ye.refreshActiveNodeForm();case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"_setupForm",value:(n=w(E().mark((function e(){var t,n,o,i,a,r,l,c=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loading=!0,t=this.activeNode,this._initial=!0,this.activeValue={settings:{configure:{},advanced:{},developer:{}}},!(t&&t.tagName&&ye.elementList[t.tagName.toLowerCase()])){e.next=35;break}n=s({},ye.elementList[t.tagName.toLowerCase()]),"undefined"===R(n.gizmo.title)?this.humanName=t.tagName.replace("-"," ").toLowerCase():this.humanName=n.gizmo.title,o=E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.settings.configure.forEach((function(e){e.property===t&&(c.activeValue.settings.configure[t]=c.activeHaxElement.properties[t]),e.attribute===t&&(c.activeValue.settings.configure[t]=c.activeHaxElement.properties[t]),e.slot===t&&(c.activeValue.settings.configure[t]=c.activeHaxElement.properties[t])})),n.settings.advanced.forEach((function(e){e.property===t&&(c.activeValue.settings.advanced[t]=c.activeHaxElement.properties[t]),e.attribute===t&&(c.activeValue.settings.advanced[t]=c.activeHaxElement.properties[t]),e.slot===t&&(c.activeValue.settings.advanced[t]=c.activeHaxElement.properties[t])})),n.settings.developer.forEach((function(e){e.property===t&&(c.activeValue.settings.developer[t]=c.activeHaxElement.properties[t]),e.attribute===t&&(c.activeValue.settings.developer[t]=c.activeHaxElement.properties[t]),e.slot===t&&(c.activeValue.settings.developer[t]=c.activeHaxElement.properties[t])}));case 3:case"end":return e.stop()}}),e)})),e.t0=E().keys(this.activeHaxElement.properties);case 9:if((e.t1=e.t0()).done){e.next=14;break}return i=e.t1.value,e.delegateYield(o(i),"t2",12);case 12:e.next=9;break;case 14:if((a=globalThis.document.createElement("div")).innerHTML=this.activeHaxElement.content,a.childNodes.forEach((function(e){1===e.nodeType&&"undefined"!==e.innerHTML&&(n.settings.configure.forEach((function(t){t.slot===e.getAttribute("slot")?c.activeValue.settings.configure[t.slot]=e.innerHTML:""!=t.slot||null!=e.getAttribute("slot")&&"null"!=e.getAttribute("slot")||(c.activeValue.settings.configure[t.slot]=e.innerHTML)})),n.settings.advanced.forEach((function(t){t.slot===e.getAttribute("slot")?c.activeValue.settings.advanced[t.slot]=e.innerHTML:""!=t.slot||null!=e.getAttribute("slot")&&"null"!=e.getAttribute("slot")||(c.activeValue.settings.advanced[t.slot]=e.innerHTML)})),n.settings.developer.forEach((function(t){t.slot===e.getAttribute("slot")?c.activeValue.settings.developer[t.slot]=e.innerHTML:""!=t.slot||null!=e.getAttribute("slot")&&"null"!=e.getAttribute("slot")||(c.activeValue.settings.developer[t.slot]=e.innerHTML)})))})),r=!!n.type&&"grid"===n.type,n.settings.configure.forEach((function(e,t){n.settings.configure[t].attribute&&(n.settings.configure[t].property=n.settings.configure[t].attribute),n.settings.configure[t].slot&&(n.settings.configure[t].property=n.settings.configure[t].slot)})),n.settings.advanced.forEach((function(e,t){n.settings.advanced[t].attribute&&(n.settings.advanced[t].property=n.settings.advanced[t].attribute),n.settings.advanced[t].slot&&(n.settings.advanced[t].property=n.settings.advanced[t].slot)})),n.settings.developer.forEach((function(e,t){n.settings.developer[t].attribute&&(n.settings.developer[t].property=n.settings.developer[t].attribute),n.settings.developer[t].slot&&(n.settings.developer[t].property=n.settings.developer[t].slot)})),this.activeSchema=[{property:"settings",inputMethod:"collapse",properties:[]}],l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=r?n.filter((function(e){return!(""===e.slot||e.slot||e.attribute&&"slot"==e.attribute)})):n;c.activeSchema[0].properties.push({property:e,title:t,properties:o.length>0?o:void 0,disabled:o.length<1,expanded:"configure"===e&&(!ye.isTextElement(c.activeNode)||ye.isInlineElement(c.activeNode)),accordion:!0})},!ye.testHook(t,"setupActiveElementForm")){e.next=26;break}return e.next=26,ye.runHook(t,"setupActiveElementForm",[n]);case 26:l("configure",this.t.configure,n.settings.configure),l("advanced",this.t.advanced,n.settings.advanced),l("developer",this.t.developer,n.settings.developer),this.__activePropSchema=n,this.shadowRoot.querySelector("#settingsform").fields=[],this.shadowRoot.querySelector("#settingsform").value={},this.shadowRoot.querySelector("#settingsform").fields=this.activeSchema,this.shadowRoot.querySelector("#settingsform").value=this.activeValue,this.loading=!1;case 35:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"_toArray",value:function(e){return null==e?[]:Object.keys(e).map((function(t){return e[t]}))}},{key:"updateMap",value:function(){this.shadowRoot&&this.shadowRoot.querySelector("hax-map")&&"content-map"==this.trayDetail&&this.shadowRoot.querySelector("hax-map").updateHAXMap()}},{key:"_updateTrayDetail",value:function(e){e&&this.shadowRoot&&this.shadowRoot.querySelector(".detail")&&(this.shadowRoot.querySelector(".detail").style.width="",this.shadowRoot.querySelector(".detail").style.height=""),"content-add"==e?(this.trayIcon="hax:add-brick",this.trayLabel=this.t.blocks,this._refreshAddData()):"content-map"==e?(this.trayIcon="hax:newspaper",this.trayLabel=this.t.structure,this.shadowRoot.querySelector("hax-map").updateHAXMap()):"content-edit"!=e||this.activeTagName&&""!=this.activeTagName&&this.activeNode&&this.activeNode.tagName?e&&""!=e?"content-edit"==e?(this.trayIcon="settings",this.trayLabel=null):"view-source"==e?(this.trayIcon="hax:html-code",this.trayLabel=this.t.htmlSource):(this.trayIcon="settings",this.trayLabel=null):(this.trayDetail="content-edit",this.trayIcon="settings"):(this.trayIcon="hax:add-brick",this.trayDetail="content-add"),this.requestUpdate()}},{key:"__valueChangedEvent",value:function(e){var t=this;if(this.editMode&&e.detail.value&&e.detail.value.settings){var n,o=e.detail.value.settings,i="grid"==s({},ye.elementList[this.activeNode.tagName.toLowerCase()]).type,a={configure:"configure",advanced:"advanced",developer:"developer"};clearTimeout(this.__contextPropDebounce),this.__contextPropDebounce=setTimeout((function(){for(var e in a)for(var r in o[e])if(n=!1,null==o[e][r]||o[e][r].readOnly)"data-hax-lock"===r&&(t.dispatchEvent(new CustomEvent("hax-toggle-active-node-lock",{bubbles:!0,composed:!0,cancelable:!0,detail:{lock:!1,node:t.activeNode}})),t.__lockAllSettings(!1)),t.activeNode.removeAttribute(ve(r));else{if("prefix"===r&&""!=o[e][r])t.activeNode.setAttribute("prefix",o[e][r]),n=!0;else if("data-hax-lock"===r)t.dispatchEvent(new CustomEvent("hax-toggle-active-node-lock",{bubbles:!0,composed:!0,cancelable:!0,detail:{lock:o[e][r],node:t.activeNode}})),t.__lockAllSettings(o[e][r]);else if("innerText"===r)t.activeNode.innerText=o[e][r],n=!0;else if(t.activeNode.hasOwnProperty(r)||t.activeNode.properties&&t.activeNode.properties.hasOwnProperty(r)||null!=o[e][r]&&o[e][r].constructor===Array||null!=o[e][r]&&o[e][r].constructor===Object)try{o[e][r].constructor===Array?t.activeNode[r]=m(o[e][r]):o[e][r].constructor===Object?t.activeNode[r]=s({},o[e][r]):t.activeNode[r]=o[e][r],n=!0}catch(e){console.warn(e),n=!1}else if(!i){var l,c=function(){if(t.__activePropSchema.settings[e][d].slot==r){var i="span";if(t.__activePropSchema.settings[e][d].slotWrapper)i=t.__activePropSchema.settings[e][d].slotWrapper;else if(t.__activePropSchema.settings[e][d].allowedSlotWrappers&&t.__activePropSchema.settings[e][d].allowedSlotWrappers[0])i=t.__activePropSchema.settings[e][d].allowedSlotWrappers[0];else if("code-editor"===t.activeNode.tagName.toLowerCase())i="template";else{var a=["span","div","p"],s=t.__activePropSchema.settings[e][d].excludedSlotWrappers||[];s&&(a=a.filter((function(e){return!s.includes(e)})))}if(l=globalThis.document.createElement(i),t.__activePropSchema.settings[e][d].slotAttributes)for(var c in t.__activePropSchema.settings[e][d].slotAttributes)l.setAttribute(c,t.__activePropSchema.settings[e][d].slotAttributes[c]);""!==t.__activePropSchema.settings[e][d].slot&&(l.slot=t.__activePropSchema.settings[e][d].slot),l.innerHTML=o[e][r];var u=l.cloneNode(!0);n=!0,ye.isTextElement(t.activeNode)?t.activeNode.innerHTML=l.innerHTML:(C(t.activeNode,t.__activePropSchema.settings[e][d].slot),t.activeNode.appendChild(u))}};for(var d in t.__activePropSchema.settings[e])c()}if(!n&&""!=ve(r))try{!0===o[e][r]?t.activeNode.setAttribute(ve(r),ve(r)):!1===o[e][r]||""===o[e][r]?t.activeNode.removeAttribute(ve(r)):t.activeNode.setAttribute(ve(r),o[e][r])}catch(t){console.warn(t),console.warn(r,o[e][r])}}}),100)}setTimeout((function(){t._initial&&(t._initial=!1)}),51)}},{key:"__lockAllSettings",value:function(e){this.shadowRoot.querySelectorAll("simple-fields-tab *[is-simple-field-type]:not([name='settings.advanced.data-hax-lock'])").forEach((function(t){t.disabled=e}))}},{key:"_editModeChanged",value:function(e){!this.hidePanelOps&&this.shadowRoot&&this.shadowRoot.querySelector("#button")&&(this.shadowRoot.querySelector("#button").icon=e?"save":"create"),e?this.removeAttribute("tabindex"):this.setAttribute("tabindex","-1")}},{key:"_clickEditButton",value:function(e){ye.editMode=!0,globalThis.dispatchEvent(new CustomEvent("simple-modal-hide",{bubbles:!0,cancelable:!0,detail:{}}))}},{key:"_clickSaveButton",value:function(e){ye.editMode=!1,this.dispatchEvent(new CustomEvent("hax-save",{bubbles:!0,cancelable:!0,composed:!0,detail:e.detail})),globalThis.dispatchEvent(new CustomEvent("simple-modal-hide",{bubbles:!0,cancelable:!0,detail:{}}))}}],[{key:"tag",get:function(){return"hax-tray"}},{key:"styles",get:function(){return[].concat(m(l(c(t),"styles",this)||[]),m(Te),m(Se),[g(Fo||(Fo=r(['\n        :host {\n          --simple-fields-detail-font-family: var(--hax-ui-font-family);\n          --simple-fields-font-family: var(--hax-ui-font-family);\n          z-index: var(--hax-ui-focus-z-index - 1);\n          top: 0;\n          font-family: var(--hax-ui-font-family);\n          font-size: var(--hax-ui-font-size);\n          color: var(--hax-ui-color);\n        }\n\n        .tray-detail-titlebar-icon {\n          --simple-icon-height: 36px;\n          --simple-icon-width: 36px;\n        }\n        .wrapper {\n          position: fixed;\n          align-items: stretch;\n          flex-direction: row-reverse;\n          opacity: 0;\n          visibility: visible;\n          pointer-events: none;\n          overflow: hidden;\n          top: 0;\n          bottom: 0;\n          min-width: calc(var(--hax-tray-width) - 100px);\n          max-width: 70vw;\n          height: calc(100vh - 48px);\n          max-height: calc(100vh - 48px);\n          z-index: var(--hax-ui-focus-z-index);\n          transition:\n            height 0.6s ease-in-out,\n            width 0.6s ease-in-out,\n            opacity 0.6s ease-in-out,\n            visibility 0.6s ease-in-out;\n        }\n        :host([collapsed]) #resize {\n          display: none;\n        }\n        :host([resize-drag]) {\n          cursor: col-resize;\n          -webkit-user-select: none; /* Safari */\n          -ms-user-select: none; /* IE 10 and IE 11 */\n          user-select: none; /* Standard syntax */\n          opacity: 1;\n        }\n        #resize {\n          cursor: col-resize;\n          background-color: transparent;\n          height: 100%;\n          padding: 0 12px 0 0;\n          flex-shrink: 0;\n          position: relative;\n          z-index: var(--hax-ui-focus-z-index);\n        }\n        :host([element-align="right"]) #resize {\n          padding: 0 0 0 12px;\n        }\n        #resize .resize-visual:hover {\n          cursor: col-resize;\n        }\n        #resize .resize-visual {\n          background-color: black;\n          height: 100%;\n          width: 6px;\n        }\n        :host(:hover) .wrapper {\n          overflow: visible;\n        }\n        :host([element-align="left"]) .wrapper {\n          left: -1000px;\n          flex-direction: row;\n          transition: left 0.6s ease-in-out;\n        }\n        :host([element-align="right"]) .wrapper {\n          right: -1000px;\n          flex-direction: row;\n          transition: right 0.6s ease-in-out;\n        }\n        :host([tray-detail="view-source"]) .detail {\n          width: 50vw;\n          min-height: 300px;\n          min-width: calc(var(--hax-tray-width) - 100px);\n          resize: both;\n          flex: unset;\n        }\n        :host([tray-detail="view-source"]) #resize {\n          display: none;\n        }\n        :host([edit-mode]) .wrapper {\n          opacity: 1;\n          visibility: visible;\n          pointer-events: all;\n          display: flex;\n        }\n        :host([edit-mode][element-align="left"]) .wrapper {\n          left: 0px;\n        }\n        :host([edit-mode][element-align="right"]) .wrapper {\n          right: 0px;\n          flex-direction: row-reverse;\n        }\n        :host([edit-mode][collapsed]) .wrapper {\n          width: unset;\n        }\n        :host([edit-mode]) .wrapper.full-panel {\n          width: unset;\n          left: 0;\n          right: 0;\n        }\n\n        #menubar {\n          display: inline-flex;\n          flex-direction: column;\n          align-items: stretch;\n          overflow: visible;\n          flex: 0 0 auto;\n          z-index: 6;\n          background-color: var(--hax-ui-background-color);\n        }\n        :host([collapsed]) #menubar {\n          width: unset;\n        }\n        #menubar > * {\n          background-color: var(--hax-ui-background-color);\n        }\n        #menubar > *::part(button) {\n          padding: var(--hax-ui-spacing-xs);\n        }\n        #menubar > *::part(label) {\n          margin: 0px;\n          font-size: 10px;\n          display: inline-block;\n          text-align: left;\n          opacity: 1;\n          visibility: visible;\n          padding: 0px var(--hax-ui-spacing-sm);\n          overflow: unset;\n        }\n        loading-indicator {\n          --loading-indicator-background-color: var(\n            --simple-colors-default-theme-accent-2,\n            grey\n          );\n          --loading-indicator-color: var(\n            --simple-colors-default-theme-accent-10,\n            black\n          );\n        }\n        #haxMenuAlign {\n          --simple-toolbar-button-width: 18px;\n          --simple-toolbar-button-height: 18px;\n          margin: 4px 0px 0px;\n          height: 24px;\n          width: 24px;\n        }\n        .detail {\n          resize: horizontal;\n          visibility: visible;\n          pointer-events: all;\n          background-color: var(--hax-ui-background-color);\n          max-height: calc(100vh - 48px);\n          width: calc(\n            var(--hax-tray-width) - var(--hax-tray-menubar-min-width)\n          );\n          max-width: 70vw;\n          min-width: 200px;\n          overflow-x: auto;\n          opacity: 1;\n        }\n        .detail::-webkit-scrollbar-track {\n          border-radius: 0;\n          background-color: var(--ddd-theme-default-coalyGray);\n        }\n\n        .detail::-webkit-scrollbar {\n          width: 8px;\n          background-color: var(--ddd-theme-default-coalyGray);\n        }\n        .detail::-webkit-scrollbar-thumb {\n          border-radius: 4px;\n          -webkit-box-shadow: inset 0 0 4px\n            var(--ddd-theme-default-limestoneGray);\n\n          box-shadow: inset 0 0 4px var(--ddd-theme-default-limestoneGray);\n          background-color: var(--ddd-theme-default-limestoneGray);\n        }\n        :host([collapsed]) .detail {\n          width: 0px;\n          overflow: hidden;\n          opacity: 0;\n          visibility: hidden;\n          pointer-events: none;\n          max-height: 100vh;\n          overflow-y: auto;\n        }\n        #tray-detail {\n          width: auto;\n          padding: 0 var(--hax-ui-spacing) var(--hax-ui-spacing);\n          transition: opacity 0.3s ease-in-out;\n          opacity: 1;\n          overflow: hidden;\n        }\n        .wrapper:focus #tray-detail,\n        .wrapper:focus-within #tray-detail,\n        .wrapper:hover #tray-detail,\n        #tray-detail:hover,\n        #tray-detail:focus,\n        #tray-detail:focus-within {\n          opacity: 1;\n        }\n        #haxcancelbutton::part(dropdown-icon) {\n          display: none;\n        }\n        .tray-detail-titlebar {\n          background-color: black;\n        }\n        .tray-detail-titlebar .tray-detail-titlebar-label {\n          display: inline-flex;\n        }\n        #settingsform {\n          margin: 0 -8px 0 -8px;\n          --a11y-collapse-padding-bottom: 100px;\n          --simple-fields-field-margin: 12px;\n          --a11y-collapse-heading-color: var(\n            --simple-colors-default-theme-accent-12\n          );\n          overflow-y: auto;\n        }\n        .block-add-wrapper {\n          overflow-y: auto;\n        }\n        a11y-collapse {\n          margin: 0px;\n          --a11y-collapse-margin: 0;\n          --a11y-collapse-vertical-padding: 12px;\n          --a11y-collapse-horizontal-padding: 12px;\n        }\n        a11y-collapse span[slot="heading"] {\n          --a11y-collapse-heading-color: var(\n            --simple-colors-default-theme-accent-12\n          ) !important;\n        }\n        simple-fields-field::part(label) {\n          font-size: var(--hax-ui-font-size-sm);\n          font-weight: var(--ddd-font-weight-medium);\n        }\n        simple-fields-field:hover::part(label) {\n          font-weight: var(--ddd-font-weight-bold);\n        }\n        a11y-collapse span[slot="heading"] {\n          line-height: 24px;\n          height: 24px;\n          display: block;\n          margin: 8px 0;\n        }\n        a11y-collapse-group {\n          margin: 0;\n          padding: 0;\n        }\n        hax-tray-button,\n        hax-gizmo-browser {\n          visibility: visible;\n          --a11y-collapse-heading-color: var(\n            --simple-colors-default-theme-accent-12\n          );\n        }\n        hax-tray-button:not(:defined),\n        hax-gizmo-browser:not(:defined) {\n          visibility: hidden;\n        }\n        hax-tray-upload {\n          flex: 0 0 auto;\n        }\n        *[hidden] {\n          display: none;\n        }\n        :host([element-align="right"]) #button {\n          right: 0;\n        }\n        :host([element-align="left"]) #button {\n          left: 0;\n        }\n\n        #button {\n          position: fixed;\n          top: 0;\n          visibility: visible;\n          margin: var(--hax-ui-spacing-xs);\n        }\n        :host([edit-mode]) #button {\n          visibility: hidden;\n          opacity: 0;\n        }\n        #button:hover {\n          opacity: 1;\n        }\n        /** This is mobile layout for controls */\n        @media screen and (max-width: 800px) {\n          :host {\n            width: 100%;\n          }\n          #resize {\n            display: none;\n          }\n          :host([edit-mode]) .wrapper.full-panel .detail {\n            max-width: 70vw;\n            max-height: unset;\n          }\n          .detail {\n            max-width: 70vw;\n          }\n          #tray-detail {\n            max-width: 70vw;\n            max-height: unset;\n          }\n          .wrapper {\n            width: unset;\n            top: -1000px;\n            left: 0px;\n            right: 0px;\n            flex-direction: column;\n          }\n          :host([edit-mode]) .wrapper {\n            top: 0;\n            pointer-events: none;\n          }\n          :host([collapsed]) .wrapper {\n            height: var(--hax-tray-menubar-min-height);\n          }\n          :host([element-align="left"]) .wrapper {\n            left: -1000px;\n            flex-direction: column;\n          }\n          #menubar {\n            position: sticky;\n            flex-direction: row;\n            left: 0;\n            top: 0;\n            height: auto;\n            flex: 0 0 auto;\n            width: 100%;\n            pointer-events: all;\n          }\n          #menubar > * {\n            flex: 1 0 auto;\n            min-width: var(--hax-tray-menubar-min-width);\n          }\n          #menubar > *::part(button) {\n            min-width: var(--hax-tray-menubar-min-width);\n            justify-content: space-around;\n          }\n          #menubar > *::part(label) {\n            display: none;\n          }\n          #haxMenuAlign {\n            display: none;\n          }\n          :host([tray-detail="view-source"]) .detail {\n            width: 100%;\n            resize: unset;\n            height: 100vh;\n          }\n          :host([tray-detail="view-source"]) #tray-detail {\n            overflow: hidden;\n          }\n          .detail {\n            position: relative;\n            flex: 1 1 100%;\n            pointer-events: all;\n          }\n          :host([collapsed]) .detail {\n            flex: 0 0 0px;\n          }\n        }\n        @media screen and (max-width: 600px) {\n          :host([edit-mode]) .hide-small {\n            display: none;\n          }\n        }\n      '])))])}},{key:"properties",get:function(){return s(s({},l(c(t),"properties",this)),{},{offsetMargin:{type:String,attribute:"offset-margin"},trayIcon:{type:String},resizeDrag:{type:Boolean,attribute:"resize-drag",reflect:!0},collapsed:{type:Boolean,reflect:!0},traySizeIcon:{type:String},loading:{type:Boolean,reflect:!0},activeValue:{type:Object},activeSchema:{type:Array},elementAlign:{type:String,reflect:!0,attribute:"element-align"},light:{type:Boolean,reflect:!0},canUndo:{type:Boolean,attribute:"can-undo"},canRedo:{type:Boolean,attribute:"can-redo"},haxUiTheme:{type:String},hidePanelOps:{type:Boolean,reflect:!0,attribute:"hide-panel-ops"},hideToolbar:{type:Boolean,reflect:!0,attribute:"hide-toolbar"},globalPreferences:{type:Object},activeNode:{type:Object},activeTagName:{type:String},activeGizmo:{type:Object},editMode:{type:Boolean,reflect:!0,attribute:"edit-mode"},trayDetail:{type:String,reflect:!0,attribute:"tray-detail"},trayLabel:{type:String},tourOpened:{type:String},__tour:{type:Object}})}}]);var n,h}(k(f(re(I))));customElements.define(Go.tag,Go);var jo,Vo,Wo,Xo,Yo,Qo={url:new URL("./elements/hax-body/lib/hax-autoloader.js",document.baseURI).href},Ko=function(e){function t(){var e;return d(this,t),(e=u(this,t)).processedList={},e}return o(t,e),i(t,[{key:"render",value:function(){return a(Uo||(Uo=r(["<slot></slot>"])))}},{key:"firstUpdated",value:function(e){this.dispatchEvent(new CustomEvent("hax-register-core-piece",{bubbles:!0,cancelable:!0,composed:!0,detail:{piece:"haxAutoloader",object:this}}))}},{key:"connectedCallback",value:function(){var e=this;l(c(t.prototype),"connectedCallback",this).call(this),this.observer=new MutationObserver((function(t){t.forEach((function(t){t.addedNodes.forEach((function(t){e.processNewElements(t)}))}))})),this.observer.observe(this,{childList:!0})}},{key:"disconnectedCallback",value:function(){this.observer.disconnect(),l(c(t.prototype),"disconnectedCallback",this).call(this)}},{key:"processNewElements",value:function(e){for(var t=this,o=this.childNodes,i=function(){if("undefined"!==R(o[a].tagName)&&"undefined"===R(t.processedList[o[a].tagName]))try{var e=o[a].tagName.toLowerCase();if("function"==typeof o[a].getHaxProperties){var i=new CustomEvent("hax-register-properties",{bubbles:!0,composed:!0,cancelable:!0,detail:{tag:e,properties:o[a].getHaxProperties(),polymer:!0}});context.dispatchEvent(i)}else if("function"==typeof o[a].HAXWiring){var r=new CustomEvent("hax-register-properties",{bubbles:!0,cancelable:!0,composed:!0,detail:{tag:e,properties:o[a].HAXWiring.getHaxProperties(),polymer:!1}});context.dispatchEvent(r)}else if(globalThis.customElements.get(e)){var s=globalThis.customElements.get(e);s?"function"==typeof s.getHaxProperties?t.setHaxProperties(s.getHaxProperties(),e):"function"==typeof s.HAXWiring?t.setHaxProperties(s.HAXWiring.getHaxProperties(),e):s.haxProperties?t.setHaxProperties(s.haxProperties,e):(console.warn("".concat(e," didn't have hax wiring so HAX guessed as best it can. See https://haxtheweb.org/documentation-1/hax-development/hax-schema for documentation on adding custom wiring for better UX.")),t.guessHaxWiring(e)):console.error("".concat(e," was not a valid custom element yet a load was attempted"))}else{var l;if(globalThis.WCAutoload&&globalThis.WCAutoload.requestAvailability()&&globalThis.WCAutoload.requestAvailability().registry.getPathToTag(e))l=globalThis.WCAutoload.requestAvailability().registry.getPathToTag(e);else{var c=fe(ye,"__appStoreData.autoloader.".concat(e,".import"),fe(ye,"__appStoreData.autoloader.".concat(e),"@haxtheweb/".concat(e,"/").concat(e,".js")));l="".concat(new URL("./hax-autoloader.js",Qo.url).href+"/../../../../").concat(c)}n.import(l).then((function(n){var o=globalThis.customElements.get(e);o?"function"==typeof o.getHaxProperties?t.setHaxProperties(o.getHaxProperties(),e):"function"==typeof o.HAXWiring?t.setHaxProperties(o.HAXWiring.getHaxProperties(),e):o.haxProperties?t.setHaxProperties(o.haxProperties,e):fe(ye,"__appStoreData.autoloader.".concat(e,".haxProperties"),!1)?t.setHaxProperties(fe(ye,"__appStoreData.autoloader.".concat(e,".haxProperties"),!1),e):(console.warn("".concat(e," didn't have hax wiring so HAX guessed as best it can. See https://haxtheweb.org/documentation-1/hax-development/hax-schema for documentation on adding custom wiring for better UX.")),t.guessHaxWiring(e)):console.error("".concat(e," was not a valid custom element yet a load was attempted"))})).catch((function(e){console.warn(e)}))}t.processedList[e]=e}catch(e){}o[a].remove()},a=0;a<o.length;a++)i()}},{key:"guessHaxWiring",value:function(e){try{var t=new ke,n=t.prototypeHaxProperties();n.gizmo.title=e.replace("-"," "),n.gizmo.tags=["Other","undefined",e.replace("-"," "),e],n.gizmo.handles=[],n.settings.configure=[],n.settings.advanced=[],n.settings.developer=[],(n=t.standardAdvancedProps(n,e)).saveOptions={},n.demoSchema=[];var o={};if(customElements.get(e)&&(o=customElements.get(e).properties),o){for(var i in o)if(o[i].type&&o[i].type.name)switch(o[i].type.name){case"String":n.settings.configure.push({property:i,title:i,description:"",inputMethod:"textfield"});break;case"Number":n.settings.configure.push({property:i,title:i,description:"",inputMethod:"number"});break;case"Boolean":n.settings.configure.push({property:i,title:i,description:"",inputMethod:"boolean"})}}else for(var a=globalThis.document.createElement(e).getAttributeNames(),r=0;r<a.length;r++)n.settings.configure.push({attribute:a[r],title:a[r],description:"",inputMethod:"textfield"});t.readyToFireHAXSchema(e,n,this)}catch(e){console.warn("HAX failed to create wiring that worked")}}}],[{key:"styles",get:function(){return[g(qo||(qo=r(["\n        :host {\n          display: none;\n        }\n      "])))]}},{key:"tag",get:function(){return"hax-autoloader"}},{key:"properties",get:function(){return s(s({},l(c(t),"properties",this)),{},{processedList:{type:Object}})}}])}(we(h));customElements.define(Ko.tag,Ko);var Jo,Zo,$o=function(e){function t(){var e;return d(this,t),(e=u(this,t))._elements=[],e.selectionList=[],e.activePreview=null,e.pickerType="gizmo",e}return o(t,e),i(t,[{key:"render",value:function(){var e=this;return a(jo||(jo=r(["\n      ",'\n      <simple-button-grid columns="4" always-expanded>\n        ',"\n      </simple-button-grid>\n    "])),this.keywords?a(Vo||(Vo=r([' <div id="filters">\n            <simple-icon-button-lite\n              icon="editable-table:filter','"\n              label="Toggle Filters"\n              tooltip-position="right"\n              @click="','"\n            >\n            </simple-icon-button-lite>\n            <simple-fields-field\n              ?hidden="','"\n              id="hax-gizmo-filters"\n              label="Filters"\n              type="checkbox"\n              .options="','"\n              @value-changed="','"\n            >\n            </simple-fields-field>\n          </div>'])),this.filterOn?"-off":"",(function(t){return e.filterOn=!e.filterOn}),!this.filterOn,this.keywords,this._handleFilters):"",this.selectionList.map((function(t,n){return e._isFiltered(t.keywords)?a(Wo||(Wo=r(['\n                <simple-popover-selection\n                  data-index="','"\n                  @opened-changed="','"\n                  event="hover"\n                >\n                  <hax-tray-button\n                    show-text-label\n                    id="picker-item-','"\n                    @click="','"\n                    data-selected="','"\n                    ?disabled="','"\n                    label="','"\n                    icon="','"\n                    icon-position="top"\n                    slot="button"\n                  ></hax-tray-button>\n                  ',"\n                </simple-popover-selection>\n              "])),n,e._hoverForPreviewChange,n,e._selected,n,ye.activeGizmo&&ye.activeGizmo.tag==t.tag,t.title,t.icon,e.activePreview===parseInt(n)?a(Xo||(Xo=r(['\n                        <hax-element-demo\n                          render-tag="','"\n                          slot="options"\n                          active-picker-schema="','"\n                        ></hax-element-demo>\n                      '])),t.tag,n):""):""})))}},{key:"_hoverForPreviewChange",value:function(e){var t=e.detail;t.opened&&(this.activePreview=parseInt(t.dataset.index),setTimeout((function(){e.detail.openedChanged(!0)}),10))}},{key:"buildOptions",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"element",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"gizmo";this.pickerType=o;var i=[],a=function(n){"gizmo"===o?e[n].gizmo.keywords.forEach((function(e){(e=(e||"").toLowerCase()).replace(/[\s\W]*/,"").length>0&&(t.keywords[e]=e)})):"app"===o&&e[n].details.tag.forEach((function(e){(e=(e||"").toLowerCase()).replace(/[\s\W]*/,"").length>0&&(t.keywords[e]=e)}))};switch(this.keywords={},o){case"gizmo":for(var r in e)e[r].__type=n,i.push({icon:e[r].gizmo.icon,title:e[r].gizmo.title,color:e[r].gizmo.color,tag:e[r].gizmo.tag,keywords:e[r].gizmo.keywords}),a(r);break;case"app":for(var r in e)i.push({icon:e[r].details.icon,title:e[r].details.title,color:e[r].details.color,tag:e[r].details.tags||[],keywords:e[r].details.tags||[]}),a(r);break;default:i=e}this._elements=e,this.selectionList=m(i),setTimeout((function(){t.shadowRoot.querySelector("#picker-item-0").focus()}),50)}},{key:"_handleFilters",value:function(e){var t=this.shadowRoot&&this.shadowRoot.querySelector("#hax-gizmo-filters")?this.shadowRoot.querySelector("#hax-gizmo-filters"):void 0;t&&(this.filters=t.value)}},{key:"_isFiltered",value:function(e){for(var t=0,n=!this.filterOn||!this.filters||this.filters.length<1;!n&&t<this.filters.length;)e.includes(this.filters[t])&&(n=!0),t++;return n}},{key:"_selected",value:function(e){this.activePreview=null;var t=e.target.getAttribute("data-selected");e.preventDefault(),e.stopPropagation(),"undefined"!==R(this._elements[t])&&("gizmo"==this.pickerType?(this._elements[t].replace=!0,this.dispatchEvent(new CustomEvent("hax-insert-content",{bubbles:!0,cancelable:!0,composed:!0,detail:this._elements[t]}))):this.dispatchEvent(new CustomEvent("hax-app-picker-selection",{bubbles:!0,cancelable:!0,composed:!0,detail:this._elements[t]}))),this.close()}},{key:"close",value:function(){this.activePreview=null,globalThis.dispatchEvent(new CustomEvent("simple-modal-hide",{bubbles:!0,cancelable:!0,detail:{}}))}}],[{key:"styles",get:function(){return[].concat(m(Se),[g(Yo||(Yo=r(["\n        simple-button-grid {\n          overflow-y: auto;\n          margin: var(--hax-ui-spacing-sm);\n        }\n        #filters {\n          min-height: 24px;\n        }\n        simple-icon-button-lite {\n          float: right;\n          margin-left: -24px;\n        }\n        hax-tray-button {\n          display: block;\n        }\n        simple-fields-field::part(fieldset-legend) {\n          line-height: 24px;\n        }\n        simple-fields-field::part(fieldset-options) {\n          display: grid;\n          grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n        }\n        simple-fields-field::part(option) {\n          display: flex;\n          flex-wrap: no-wrap;\n          align-items: center;\n          justify-content: space-between;\n          margin: 0 var(--simple-fields-margin-small, 8px);\n          flex-direction: row-reverse;\n        }\n        simple-fields-field::part(option-inner) {\n          flex: 0 0 auto;\n          margin: 0 calc(var(--simple-fields-margin-small, 8px) * 0.5) 0 0;\n        }\n        simple-fields-field::part(option-label) {\n          flex: 1 1 auto;\n          margin: 0;\n          font-size: var(--hax-ui-font-size-sm, 13px);\n        }\n        :host([filter-on]) simple-button-grid {\n          margin-bottom: var(--simple-fields-margin-small, 8px);\n        }\n        :host([filter-on]) #hax-gizmo-filters {\n          margin-bottom: 0;\n        }\n        :host([filter-on]) ::part(fieldset-options) {\n          padding-bottom: var(--simple-fields-margin-small, 8px);\n        }\n      "])))])}},{key:"tag",get:function(){return"hax-picker"}},{key:"properties",get:function(){return{_elements:{type:Array},activePreview:{type:Number},keywords:{type:Object},selectionList:{type:Array},pickerType:{type:String,attribute:"picker-type"},filters:{type:Array},filterOn:{type:Boolean,attribute:"filter-on",reflect:!0}}}}])}(h);customElements.define($o.tag,$o);var ei,ti,ni=function(e){function t(){var e;return d(this,t),(e=u(this,t)).windowControllers=new AbortController,e.title="Select an option",e}return o(t,e),i(t,[{key:"connectedCallback",value:function(){l(c(t.prototype),"connectedCallback",this).call(this),globalThis.addEventListener("simple-modal-show",this.modalToggle.bind(this),{signal:this.windowControllers.signal})}},{key:"disconnectedCallback",value:function(){this.windowControllers.abort(),l(c(t.prototype),"disconnectedCallback",this).call(this)}},{key:"modalToggle",value:function(e){"hax-picker"==e.detail.id&&e.detail.elements.content.children[0].buildOptions(this.elements,this.type,this.title,this.pickerType,this.target)}},{key:"presentOptions",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"element",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Select an option",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"gizmo",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window;this.elements=e,this.type=n,this.title=o,this.pickerType=i,this.target=a,setTimeout((function(){t.shadowRoot.querySelector('[modal-id="hax-picker"]').openModal(a)}),0)}},{key:"render",value:function(){return a(Jo||(Jo=r(['\n      <simple-modal-template\n        .title="','"\n        modal-id="hax-picker"\n        mode="hax-ui"\n      >\n        <hax-picker slot="content"></hax-picker>\n      </simple-modal-template>\n    '])),this.title)}},{key:"firstUpdated",value:function(){this.dispatchEvent(new CustomEvent("hax-register-core-piece",{bubbles:!0,cancelable:!0,composed:!0,detail:{piece:"haxAppPicker",object:this}}))}}],[{key:"styles",get:function(){return[].concat(m(Se),[g(Zo||(Zo=r(["\n        :host {\n          display: none;\n        }\n      "])))])}},{key:"properties",get:function(){return{title:{type:String}}}},{key:"tag",get:function(){return"hax-app-picker"}}])}(h);customElements.define(ni.tag,ni);var oi=function(e){function t(){var e;return d(this,t),(e=u(this,t)).t={cancelTitle:"Confirm Cancel",cancelWithoutSaving:"Any changes since your last save will be lost. Cancel anyway?",cancelYes:"Yes",cancelNo:"No"},e.registerLocalization({context:e,namespace:"hax"}),e}return o(t,e),i(t,[{key:"render",value:function(){return a(ei||(ei=r(['\n      <simple-modal-template\n        modal-id="hax-cancel"\n        mode="hax-ui"\n        id="dialog"\n        .title="','"\n      >\n        <div slot="content">','</div>\n        <hax-toolbar id="hax-cancel-buttons" always-expanded slot="buttons">\n          <hax-tray-button\n            id="hax-cancel-no"\n            label="','"\n            dialog-dismiss\n            show-text-label\n          >\n          </hax-tray-button>\n          <hax-tray-button\n            id="hax-cancel-yes"\n            dialog-confirm\n            @click="','"\n            label="','"\n            show-text-label\n          >\n          </hax-tray-button>\n        </hax-toolbar>\n      </simple-modal-template>\n    '])),this.t.cancelTitle,this.t.cancelWithoutSaving,this.t.cancelNo,(function(e){return console.log(e)}),this.t.cancelYes)}},{key:"firstUpdated",value:function(){this.dispatchEvent(new CustomEvent("hax-register-core-piece",{bubbles:!0,cancelable:!0,composed:!0,detail:{piece:"haxCancel",object:this}}))}}],[{key:"styles",get:function(){return[].concat(m(Se),[g(ti||(ti=r(["\n        :host {\n          display: none;\n          --simple-modal-resize: none;\n          --simple-modal-width: 200px;\n          --simple-modal-height: auto;\n          margin: 0;\n          padding: 0;\n        }\n      "])))])}},{key:"tag",get:function(){return"hax-cancel-dialog"}}])}(k(h));customElements.define(oi.tag,oi);var ii=t("HAX",function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return d(this,t),(e=u(this,t)).windowControllers=new AbortController,e.windowControllersLoaded=new AbortController,e.windowControllersReady=new AbortController,e.__rendered=!1,e.tag=t.tag,e.template=document.createElement("template"),e.attachShadow({mode:"open"}),globalThis.document.adoptedStyleSheets&&globalThis.document.adoptedStyleSheets.map((function(t){t.hax&&e.shadowRoot.adoptedStyleSheets.push(t)})),n||e.render(),window.addEventListener("hax-store-ready",e.storeReady.bind(e),{once:!0,passive:!0,signal:e.windowControllersReady.signal}),window.addEventListener("hax-store-app-store-loaded",e.appStoreReady.bind(e),{once:!0,passive:!0,signal:e.windowControllersLoaded.signal}),window.addEventListener("hax-cancel",e.cancelEvent.bind(e),{signal:e.windowControllers.signal}),window.addEventListener("hax-save",e.saveEvent.bind(e),{signal:e.windowControllers.signal}),e}return o(t,e),i(t,[{key:"html",get:function(){return"\n    <style>\n    ".concat(be.map((function(e){return e.cssText.replace(/:host/g,"hax-body table")})).join(" "),'\n\n    :host,h-a-x {\n      display: block;\n    }\n\n    :host([hidden]),h-a-x([hidden]) {\n      display: none;\n    }\n\n    :host img, h-a-x img {\n      max-width: 100%;\n      max-width: -moz-available;\n      max-width: -webkit-fill-available;\n      max-width: fill-available;\n    }\n\n    hax-body[edit-mode] page-break[data-hax-active],\n    hax-body[edit-mode] [data-hax-active][contenteditable] {\n      outline-offset: 8px;\n      outline: var(--hax-body-active-outline, 2px solid var(--hax-ui-color-focus, #000)) !important;\n      caret-color: var(--hax-ui-caret-color, auto);\n    }\n\n  :host([edit-mode])\n    #bodycontainer\n    ::slotted([contenteditable][data-hax-ray][data-hax-active]:empty:not([data-instructional-action]))::before {\n    content: "Type / to add blocks";\n    opacity: 0.4;\n  }\n    </style>\n    <hax-body>\n        <slot></slot>\n    </hax-body>')}},{key:"cancelEvent",value:function(e){this.importSlotToHaxBody()}},{key:"saveEvent",value:(n=w(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye.activeHaxBody.haxToContent();case 2:n=e.sent,this.innerHTML=n,this.dispatchEvent(new CustomEvent("hax-save-body-value",{composed:!0,bubbles:!0,cancelable:!0,detail:{value:n}}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"connectedCallback",value:function(){l(c(t.prototype),"connectedCallback",this)&&l(c(t.prototype),"connectedCallback",this).call(this),this.__HAXApplied||window.__HAXApplied||(window.__HAXApplied=this.__HAXApplied=this.applyHAX())}},{key:"storeReady",value:function(e){var t=this;e.detail&&(setTimeout((function(){try{var e=s({},JSON.parse(t.getAttribute("app-store")));"object"===R(e)&&(ye.appStore=e)}catch(e){console.warn(e)}"hide-panel-ops"===t.hidePanelOps&&(t.hidePanelOps=!0),ye.haxTray.hidePanelOps=t.hidePanelOps,"hide-toolbar"===t.hideToolbar&&(t.hideToolbar=!0),ye.haxTray.hideToolbar=t.hideToolbar,ye.haxTray.offsetMargin=t.offsetMargin,ye.elementAlign=t.elementAlign}),0),this.windowControllersReady.abort())}},{key:"importSlotToHaxBody",value:function(){var e=[];e=this.shadowRoot.querySelector("slot")?this.shadowRoot.querySelector("slot").assignedNodes():this.children;var t="";for(var n in e)"undefined"!==R(e[n].outerHTML)&&(t+=e[n].outerHTML);ye.activeHaxBody.importContent(t)}},{key:"appStoreReady",value:function(e){e.detail&&(this.importSlotToHaxBody(),this.windowControllersLoaded.abort())}},{key:"render",value:function(){this.__rendered=!0,this.shadowRoot.innerHTML=null,this.template.innerHTML=this.html,this.shadowRoot.appendChild(this.template.content.cloneNode(!0))}},{key:"applyHAX",value:function(){var e=window.HaxStore.requestAvailability(),t=document.createElement("hax-tray");return t.hidePanelOps=this.hidePanelOps,t.hideToolbar=this.hideToolbar,this.elementAlign=ae("hax-tray-elementAlign"),this.elementAlign&&null!=this.elementAlign&&""!=this.elementAlign||(this.elementAlign="left"),e.elementAlign=this.elementAlign,document.body.appendChild(t),document.body.appendChild(document.createElement("hax-app-picker")),document.body.appendChild(document.createElement("hax-autoloader")),document.body.appendChild(document.createElement("hax-cancel-dialog")),!0}},{key:"disconnectedCallback",value:function(){this.windowControllers.abort(),l(c(t.prototype),"disconnectedCallback",this)&&l(c(t.prototype),"disconnectedCallback",this).call(this)}},{key:"elementAlign",get:function(){return this.getAttribute("element-align")},set:function(e){this.__rendered&&(this.setAttribute("element-align",e),ye.elementAlign=e)}},{key:"offsetMargin",get:function(){return this.getAttribute("offset-margin")},set:function(e){this.setAttribute("offset-margin",e),this.__rendered&&(ye.haxTray.offsetMargin=e)}},{key:"hideToolbar",get:function(){return this.getAttribute("hide-toolbar")},set:function(e){e&&(this.setAttribute("hide-toolbar","hide-toolbar"),this.__rendered&&(ye.haxTray.hideToolbar=e))}},{key:"hidePanelOps",get:function(){return this.getAttribute("hide-panel-ops")},set:function(e){e&&(this.setAttribute("hide-panel-ops","hide-panel-ops"),this.__rendered&&(ye.haxTray.hidePanelOps=e))}},{key:"appStore",get:function(){return this.getAttribute("app-store")},set:function(e){this.setAttribute("app-store",e),this.__rendered&&(ye.appStore=s({},JSON.parse(this.getAttribute("app-store"))))}},{key:"attributeChangedCallback",value:function(e,t,n){}}],[{key:"tag",get:function(){return"h-a-x"}},{key:"observedAttributes",get:function(){return["element-align","offset-margin","app-store","hide-panel-ops"]}}]);var n}(Y(HTMLElement)));customElements.define("h-a-x",ii)}}}));
