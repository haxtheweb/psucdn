System.register(["./dfe87471.js","./5027ac64.js","./2d996427.js","./a65f452b.js","./e55b49f4.js","./4d146b06.js","./7bee5e0f.js"],(function(e){"use strict";var n,t,i,o,a,s,r,l,d,h,c,u,p,g,m,v,f,w,b,y,x,k,E,I,M,D;return{setters:[function(e){n=e._,t=e.a,i=e.f,o=e.g,a=e.i,s=e.b,r=e.e,l=e.x,d=e.aZ,h=e.c,c=e.d,u=e.o,p=e.t,g=e.j,m=e.k,v=e.aA,f=e.u,w=e.M,b=e.N,y=e.aE,x=e.aF,k=e.p,E=e.b7,I=e.b6,M=e.s},function(e){D=e.HAXCMSSiteEditorUI},function(){},function(){},function(){},function(){},function(){}],execute:function(){var A,S,C,L,H,q={url:new URL("./elements/chat-agent/lib/chat-button.js",document.baseURI).href},T=function(e){function d(){var e;return h(this,d),(e=c(this,d)).buttonIcon=null,e.isFullView=null,e.isInterfaceHidden=null,u((function(){e.buttonIcon=p(he.buttonIcon),e.isFullView=p(he.isFullView),e.isInterfaceHidden=p(he.isInterfaceHidden)})),e}return n(d,e),t(d,[{key:"render",value:function(){return l(A||(A=s(['\n      <div\n        class="chat-button-wrapper"\n        @click=',"\n        @keypress=",'\n        tabindex="0"\n        aria-label="','"\n      >\n        <div class="icon-wrapper">\n          <simple-icon-lite\n            icon="','"\n          ></simple-icon-lite>\n        </div>\n        <div class="label-wrapper">\n          <slot name="label">',"</slot>\n        </div>\n      </div>\n    "])),this.handleChatButton,this.keyPress,this.isInterfaceHidden?"Open Interface":"Close Interface",he.buttonIcon,he.buttonLabel)}},{key:"keyPress",value:function(e){"Enter"===e.key&&(e.preventDefault(),he.developerModeEnabled&&console.info("HAX-DEV-MODE: Chat button pressed using Enter key."),this.handleChatButton())}},{key:"handleChatButton",value:function(){he.developerModeEnabled&&console.info("HAX-DEV-MODE: Chat button pressed."),he.isInterfaceHidden=!this.isInterfaceHidden}}],[{key:"tag",get:function(){return"chat-button"}},{key:"styles",get:function(){return[i(o(d),"styles",this),a(S||(S=s(["\n        /* https://oer.hax.psu.edu/bto108/sites/haxcellence/documentation/ddd */\n\n        :host {\n          display: block;\n          z-index: 999998;\n        }\n\n        .chat-button-wrapper {\n          background-color: var(--data-theme-primary, var(--ddd-primary-1));\n          display: flex;\n          width: 96px;\n          height: 96px;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          border-radius: var(--ddd-radius-lg);\n          cursor: pointer;\n          box-shadow: 0 4px red;\n        }\n\n        .chat-button-wrapper:hover,\n        .chat-button-wrapper:focus-visible {\n          box-shadow: 0 5px red;\n          transform: translateY(-1px);\n        }\n\n        /* TODO Figure out how to get this to work with enter key */\n        .chat-button-wrapper:active {\n          box-shadow: 0 1px red;\n          transform: translateY(3px);\n        }\n\n        :host([is-full-view]:not([is-interface-hidden])) .chat-button-wrapper {\n          display: none;\n        }\n\n        .chat-button-wrapper:hover .label-wrapper,\n        .chat-button-wrapper:focus-visible .label-wrapper {\n          text-decoration: underline;\n        }\n\n        .icon-wrapper {\n          width: 56px;\n          height: 56px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          background-color: var(--ddd-theme-default-white);\n          border-radius: var(--ddd-radius-circle);\n          margin-bottom: var(--ddd-spacing-1);\n        }\n\n        simple-icon-lite {\n          color: var(--data-theme-primary, var(--ddd-primary-13));\n          --simple-icon-height: var(--ddd-icon-md);\n          --simple-icon-width: var(--ddd-icon-md);\n        }\n\n        .label-wrapper {\n          padding: var(--ddd-spacing-1);\n          background-color: var(--ddd-theme-default-white);\n          color: var(--ddd-theme-default-potentialMidnight);\n          border-radius: var(--ddd-radius-xs);\n          font-size: var(--ddd-font-size-4xs);\n          font-weight: var(--ddd-font-weight-medium);\n          max-width: var(--ddd-spacing-19);\n          text-align: center;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n        }\n      "])))]}},{key:"properties",get:function(){return r(r({},i(o(d),"properties",this)),{},{buttonIcon:{type:String,attribute:"button-icon"},buttonLabel:{type:String,attribute:"button-label"},isFullView:{type:Boolean,attribute:"is-full-view",reflect:!0},isInterfaceHidden:{type:Boolean,attribute:"is-interface-hidden",reflect:!0}})}},{key:"haxProperties",get:function(){return new URL("./lib/".concat(this.tag,".haxProperties.json"),q.url).href}}])}(d);globalThis.customElements.define(T.tag,T);var V,j,P={url:new URL("./elements/chat-agent/lib/chat-control-bar.js",document.baseURI).href},R=function(e){function d(){var e;return h(this,d),(e=c(this,d)).isFullView=null,e.isInterfaceHidden=null,e.dataCollectionEnabled=null,u((function(){e.isFullView=p(he.isFullView),e.isInterfaceHidden=p(he.isInterfaceHidden),e.dataCollectionEnabled=p(he.dataCollectionEnabled)})),e}return n(d,e),t(d,[{key:"render",value:function(){return l(C||(C=s(['\n      \x3c!-- https://open-apis.hax.cloud/?path=/story/media-icons--hax-iconset-story --\x3e\n\n      <div class="chat-control-bar-wrapper">\n        <div class="left-side">\n          \x3c!-- https://stackoverflow.com/questions/72654466/how-do-i-make-a-button-that-will-download-a-file --\x3e\n          <button\n            id="download-button"\n            @click=','\n            aria-label="Download Log as txt"\n          >\n            <simple-icon-lite icon="icons:file-download"></simple-icon-lite>\n          </button>\n          <simple-tooltip for="download-button" position="right"\n            >Download Chat Log</simple-tooltip\n          >\n\n          <button\n            id="reset-button"\n            @click=','\n            aria-label="Reset Chat"\n          >\n            <simple-icon-lite icon="icons:refresh"></simple-icon-lite>\n          </button>\n          <simple-tooltip for="reset-button" position="right"\n            >Reset Chat</simple-tooltip\n          >\n\n          <button\n            id="data-collection-button"\n            @click=','\n            aria-label="Toggle Data Collection"\n          >\n            <simple-icon-lite\n              icon="lrn:data_usage"\n              class="data-collection-icon"\n            ></simple-icon-lite>\n            <span class="data-collection-label">Data Collection</span>\n          </button>\n          <simple-tooltip for="data-collection-button" position="right"\n            >Toggle Data Collection</simple-tooltip\n          >\n\n          <button\n            id="dev-mode-button"\n            @click=','\n            aria-label="Toggle Developer Mode"\n          >\n            <simple-icon-lite icon="hax:console-line"></simple-icon-lite>\n          </button>\n          <simple-tooltip for="dev-mode-button" position="right"\n            >Toggle Developer Mode</simple-tooltip\n          >\n        </div>\n        <div class="right-side">\n          <button\n            id="view-button"\n            @click=','\n            aria-label="','"\n          >\n            <simple-icon-lite\n              icon="','"\n            ></simple-icon-lite>\n          </button>\n          <simple-tooltip for="view-button" position="left"\n            >',"</simple-tooltip\n          >\n\n          ","\n        </div>\n      </div>\n    "])),this.handleDownloadLogButton,this.handleResetButton,this.handleDataCollectionButton,this.handleDevModeButton,this.handleViewButton,this.isFullView?"Exit Full View":"Enter Full View",this.isFullView?"icons:fullscreen-exit":"icons:fullscreen",this.isFullView?"Exit Full View":"Enter Full View",this.isFullView?l(L||(L=s(['\n                <button\n                  id="hide-button"\n                  @click=','\n                  aria-label="Hide Interface"\n                >\n                  <simple-icon-lite icon="remove"></simple-icon-lite>\n                </button>\n                <simple-tooltip for="hide-button" position="left"\n                  >Hide Interface</simple-tooltip\n                >\n              '])),this.handleHideButton):"")}},{key:"handleDownloadLogButton",value:function(){he.developerModeEnabled&&console.info("HAX-DEV-MODE: Download log button pressed."),this.downloadChatLog()}},{key:"handleResetButton",value:function(){he.developerModeEnabled&&console.info("HAX-DEV-MODE: Reset button pressed."),confirm("Reset the chat?")&&(confirm("Download the chat log before you reset?")?(he.developerModeEnabled&&console.info("HAX-DEV-MODE: Download chat log before reset confirmed."),this.downloadChatLog()):he.developerModeEnabled&&console.info("HAX-DEV-MODE: Download chat log before reset denied."),this.resetChat())}},{key:"handleDataCollectionButton",value:function(){he.dataCollectionEnabled=!he.dataCollectionEnabled,this.dataCollectionEnabled?alert("Your conversations will be used to train our AI models"):alert("Your conversations will not be used to train our AI models")}},{key:"handleDevModeButton",value:function(){he.developerModeEnabled=!he.developerModeEnabled}},{key:"handleViewButton",value:function(){he.developerModeEnabled&&console.info("HAX-DEV-MODE: View switch button pressed."),he.isFullView=!this.isFullView,this.requestUpdate(),he.developerModeEnabled&&console.info("HAX-DEV-MODE: View switched to: "+(he.isFullView?"full":"standard"))}},{key:"handleHideButton",value:function(){he.developerModeEnabled&&console.info("HAX-DEV-MODE: Hide button pressed."),this.isInterfaceHidden||(he.isInterfaceHidden=!0)}},{key:"downloadChatLog",value:function(){he.developerModeEnabled&&console.info("HAX-DEV-MODE: Downloading chat log..."),he.handleDownload("txt")}},{key:"resetChat",value:function(){he.developerModeEnabled&&console.info("HAX-DEV-MODE: Resetting chat..."),he.chatLog=[],he.merlinIndex=0,he.messageIndex=0,he.userIndex=0,he.startAI()}}],[{key:"tag",get:function(){return"chat-control-bar"}},{key:"styles",get:function(){return[i(o(d),"styles",this),a(H||(H=s(["\n        /* https://oer.hax.psu.edu/bto108/sites/haxcellence/documentation/ddd */\n\n        :host {\n          display: block;\n          container-type: inline-size;\n        }\n\n        .chat-control-bar-wrapper {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: var(--ddd-spacing-2) var(--ddd-spacing-0);\n        }\n\n        button {\n          background-color: #2b2a33;\n          color: var(--ddd-theme-default-white);\n          border-radius: var(--ddd-radius-sm);\n        }\n\n        button:hover,\n        button:focus-visible {\n          background-color: #52525e;\n        }\n\n        button > simple-icon-lite {\n          --simple-icon-color: var(--ddd-theme-default-white);\n        }\n\n        .data-collection-icon {\n          --simple-icon-color: var(--ddd-theme-default-original87Pink);\n        }\n\n        :host([data-collection-enabled]) .data-collection-icon {\n          --simple-icon-color: var(--ddd-theme-default-futureLime);\n        }\n\n        /* Phones */\n        @media only screen and (max-width: 425px),\n          only screen and (max-height: 616px) {\n          #view-button {\n            display: none;\n          }\n        }\n\n        /* TODO Does not work */\n        @container (max-width: 330px) {\n          .data-collection-label {\n            display: none;\n          }\n        }\n      "])))]}},{key:"properties",get:function(){return r(r({},i(o(d),"properties",this)),{},{dataCollectionEnabled:{type:Boolean,attribute:"data-collection-enabled",reflect:!0}})}},{key:"haxProperties",get:function(){return new URL("./lib/".concat(this.tag,".haxProperties.json"),P.url).href}}])}(d);globalThis.customElements.define(R.tag,R);var O,B,U={url:new URL("./elements/chat-agent/lib/chat-developer-panel.js",document.baseURI).href},F=function(e){function d(){var e;return h(this,d),(e=c(this,d)).chatLog=[],e.engine=null,u((function(){e.chatLog=p(he.chatLog),e.engine=p(he.engine)})),e}return n(d,e),t(d,[{key:"render",value:function(){return l(V||(V=s(['\n      <div class="chat-developer-panel-wrapper">\n        <div class="console-table">\n          \x3c!-- Maybe convert buttons to simple-cta --\x3e\n          <button\n            id="console-table-user"\n            @click=','\n            aria-label="Console table user chat log"\n          >\n            <div class="button-icon">\n              <simple-icon-lite icon="hax:console-line"></simple-icon-lite>\n              <simple-icon-lite icon="lrn:user"></simple-icon-lite>\n            </div>\n            <div class="button-text">\n              <span class="btn-txt">console.table() user chat log</span>\n            </div>\n          </button>\n          <simple-tooltip for="console-table-user" position="left"\n            >Print User Chat Log as Table to Console</simple-tooltip\n          >\n\n          <button\n            id="console-table-merlin"\n            @click=','\n            aria-label="Console table merlin chat log"\n          >\n            <div class="button-icon">\n              <simple-icon-lite icon="hax:console-line"></simple-icon-lite>\n              <simple-icon-lite icon="hax:wizard-hat"></simple-icon-lite>\n            </div>\n            <div class="button-text">\n              <span class="btn-txt">console.table() merlin chat log</span>\n            </div>\n          </button>\n          <simple-tooltip for="console-table-merlin" position="left"\n            >Print Merlin Chat Log as Table to Console</simple-tooltip\n          >\n\n          <button\n            id="console-table-all"\n            @click=','\n            aria-label="Console table entire chat log"\n          >\n            <div class="button-icon">\n              <simple-icon-lite icon="hax:console-line"></simple-icon-lite>\n              <simple-icon-lite icon="book"></simple-icon-lite>\n            </div>\n            <div class="button-text">\n              <span class="btn-txt">console.table() entire chat log</span>\n            </div>\n          </button>\n          <simple-tooltip for="console-table-all" position="left"\n            >Print Entire Chat Log as Table to Console</simple-tooltip\n          >\n\n          <button\n            id="download-as-json"\n            @click=','\n            aria-label="Download chat log as .json"\n          >\n            <div class="button-icon">\n              <simple-icon-lite icon="icons:file-download"></simple-icon-lite>\n              <simple-icon-lite icon="hax:code-json"></simple-icon-lite>\n            </div>\n            <div class="button-text">\n              <span class="btn-txt">Download chat log as .json</span>\n            </div>\n          </button>\n          <simple-tooltip for="download-as-json" position="left"\n            >Download Chat Log as .json</simple-tooltip\n          >\n        </div>\n\n        <div class="switch-engine-controls" aria-label="Switch LLM Engine">\n          <button id="switch-engine-btn">\n            <div class="button-icon">\n              <simple-icon-lite icon="hardware:memory"></simple-icon-lite>\n            </div>\n            <div class="button-text" @click=','>\n              <span class="btn-txt">Switch LLM Engine</span>\n              <span class="switch-engine-txt"\n                >(Current Engine = <em>',"</em>)</span\n              >\n            </div>\n          </button>\n        </div>\n      </div>\n    "])),this.handleConsoleTableButton,this.handleConsoleTableButton,this.handleConsoleTableButton,this.handleDownloadAsJsonButton,this.handleSwitchEngineButton,this.engine)}},{key:"handleConsoleTableButton",value:function(e){var n=e.currentTarget.id;switch(console.info("HAX-DEV-MODE: ".concat(n," button pressed.")),n){case"console-table-user":console.table(this.compileChatLog(he.userName));break;case"console-table-merlin":console.table(this.compileChatLog("merlin"));break;case"console-table-all":console.table(this.chatLog)}}},{key:"compileChatLog",value:function(e){console.info('HAX-DEV-MODE: Compiling "'.concat(e,'" chat log'));var n=[];return this.chatLog.forEach((function(t){t.author===e&&n.push(t)})),n}},{key:"handleDownloadAsJsonButton",value:function(){console.info("HAX-DEV-MODE: Downloading chat log as .json..."),he.handleDownload("json")}},{key:"handleSwitchEngineButton",value:function(){switch(this.engine){case"alfred":he.engine="robin";break;case"robin":he.engine="alfred"}console.info("HAX-DEV-MODE: Engine switched to ".concat(he.engine," (store) & ").concat(this.engine," (autorun)")),this.shadowRoot.querySelector(".switch-engine-txt").innerHTML="(Current Engine = <em>".concat(this.engine,"</em>)")}}],[{key:"tag",get:function(){return"chat-developer-panel"}},{key:"styles",get:function(){return[i(o(d),"styles",this),a(j||(j=s(["\n        /* https://oer.hax.psu.edu/bto108/sites/haxcellence/documentation/ddd */\n\n        :host {\n          display: block;\n          container-type: inline-size;\n        }\n\n        .chat-developer-panel-wrapper {\n          background-color: var(--ddd-theme-default-keystoneYellow);\n          padding: var(--ddd-spacing-1) var(--ddd-spacing-1);\n          border-radius: var(--ddd-radius-sm);\n          display: flex;\n          flex-direction: column;\n          gap: var(--ddd-spacing-2);\n        }\n\n        .console-table {\n          display: flex;\n          gap: var(--ddd-spacing-1);\n          justify-content: space-between;\n          align-items: center;\n        }\n\n        .switch-engine-controls {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n        }\n\n        button {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          cursor: pointer;\n          gap: var(--ddd-spacing-1);\n          background-color: #2b2a33;\n          color: var(--ddd-theme-default-white);\n          border-radius: var(--ddd-radius-sm);\n        }\n\n        button:hover,\n        button:focus-visible {\n          background-color: #52525e;\n        }\n\n        button > simple-icon-lite {\n          --simple-icon-color: var(--ddd-theme-default-white);\n        }\n\n        @container (max-width: 500px) {\n          .btn-txt {\n            display: none;\n          }\n        }\n\n        @container (max-width: 180px) {\n          .console-table {\n            flex-wrap: wrap;\n            justify-content: center;\n          }\n        }\n\n        @media only screen and (max-height: 575px) {\n          :host {\n            display: none;\n          }\n        }\n      "])))]}},{key:"properties",get:function(){return r({},i(o(d),"properties",this))}},{key:"haxProperties",get:function(){return new URL("./lib/".concat(this.tag,".haxProperties.json"),U.url).href}}])}(d);globalThis.customElements.define(F.tag,F);var X,N,W,z,Y={url:new URL("./elements/chat-agent/lib/chat-input.js",document.baseURI).href},K=function(e){function d(){var e;return h(this,d),(e=c(this,d)).chatLog=[],e.messageIndex=null,e.userIndex=null,e.previousMessageIndex=null,e.userName=null,u((function(){e.chatLog=p(he.chatLog),e.messageIndex=p(he.messageIndex),e.userIndex=p(he.userIndex),e.previousMessageIndex=p(e.messageIndex-1),e.userName=p(he.userName)})),e}return n(d,e),t(d,[{key:"render",value:function(){return l(O||(O=s(['\n      <div class="chat-input-wrapper">\n        <textarea name="prompt-input" id="user-input" placeholder="','" @keydown=','></textarea>\n        <div class="send-button" id="send-button" @click=',' tabindex="0" aria-label="Send Prompt">\n          <simple-icon-lite icon="icons:send"></simple-icon-lite>\n        </div>\n        <simple-tooltip for="send-button" position="top">Send Prompt to Merlin</simple-tooltip></simple-tooltip>\n      </div>\n    '])),he.promptPlaceholder,this.handleKeyPress,this.handleSendButton)}},{key:"handleKeyPress",value:function(e){var n=this.shadowRoot.querySelector("#user-input");switch(e.key){case"Enter":he.developerModeEnabled&&console.info("HAX-DEV-MODE: Enter key pressed."),e.preventDefault(),this.handleSendButton();break;case"ArrowUp":if(he.developerModeEnabled&&console.info("HAX-DEV-MODE: Arrow Up pressed. Previous message index = ".concat(this.previousMessageIndex," and message index = ").concat(this.messageIndex)),e.preventDefault(),this.previousMessageIndex>0){for(;this.chatLog[this.previousMessageIndex].author!==this.userName&&(this.previousMessageIndex--,0!==this.previousMessageIndex););n.value=this.chatLog[this.previousMessageIndex].message}break;case"ArrowDown":if(he.developerModeEnabled&&console.info("HAX-DEV-MODE: Arrow Down pressed. Previous message index = ".concat(this.previousMessageIndex," and message index = ").concat(this.messageIndex)),e.preventDefault(),this.previousMessageIndex<this.messageIndex-1){for(;this.chatLog[this.previousMessageIndex].author!==this.userName;)this.previousMessageIndex++;n.value=this.chatLog[this.previousMessageIndex].message,this.previousMessageIndex++}else n.value=""}}},{key:"handleSendButton",value:function(){var e=this.shadowRoot.querySelector("#user-input").value;he.promptCharacterLimit>0&&e.length>he.promptCharacterLimit&&alert("Please shorten your prompt to no more than ".concat(he.promptCharacterLimit," characters.")),""!==e?(he.developerModeEnabled&&console.info("HAX-DEV-MODE: Send button activated. Prompt to send: "+e),he.handleMessage(he.userName,e),this.shadowRoot.querySelector("#user-input").value=""):he.developerModeEnabled&&console.info("HAX-DEV-MODE: Send button activated. No prompt to send")}},{key:"firstUpdated",value:function(e){i(o(d.prototype),"firstUpdated",this)&&i(o(d.prototype),"firstUpdated",this).call(this,e),he.promptCharacterLimit>0&&this.shadowRoot.querySelector("#user-input").setAttribute("maxlength","".concat(he.promptCharacterLimit))}}],[{key:"tag",get:function(){return"chat-input"}},{key:"styles",get:function(){return[i(o(d),"styles",this),a(B||(B=s(["\n        /* https://oer.hax.psu.edu/bto108/sites/haxcellence/documentation/ddd */\n\n        :host {\n          display: block;\n          font-family: var(--ddd-font-primary);\n        }\n\n        .chat-input-wrapper {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          gap: var(--ddd-spacing-3);\n          padding: var(--ddd-spacing-2) var(--ddd-spacing-3);\n        }\n\n        #user-input {\n          border-radius: var(--ddd-radius-lg);\n          padding: var(--ddd-spacing-2) var(--ddd-spacing-3);\n          background-color: var(--ddd-theme-default-white);\n          color: #000;\n          resize: none;\n          scrollbar-width: none;\n          width: 85%;\n        }\n\n        /* TODO icon shifts slightly when doing the click sequence */\n        .send-button {\n          width: 52px;\n          height: 52px;\n          border-radius: var(--ddd-radius-circle);\n          background-color: var(--data-theme-primary, var(--ddd-primary-1));\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          cursor: pointer;\n          box-shadow: 0 4px red;\n        }\n\n        .send-button:hover,\n        .send-button:focus-visible {\n          box-shadow: 0 5px red;\n          transform: translateY(-1px);\n        }\n\n        .send-button:active {\n          box-shadow: 0 1px red;\n          transform: translateY(3px);\n        }\n\n        simple-icon-lite {\n          color: var(\n            --lowContrast-override,\n            var(--ddd-theme-bgContrast, white)\n          );\n        }\n      "])))]}},{key:"properties",get:function(){return r({},i(o(d),"properties",this))}},{key:"haxProperties",get:function(){return new URL("./lib/".concat(this.tag,".haxProperties.json"),Y.url).href}}])}(d);globalThis.customElements.define(K.tag,K);var _,J,Q,G,Z,$=function(e){function d(){var e;return h(this,d),(e=c(this,d)).chatLog=[],e.developerModeEnabled=null,e.isFullView=null,e.isInterfaceHidden=null,e.hasEditorUI=null,u((function(){e.chatLog=p(he.chatLog),e.developerModeEnabled=p(he.developerModeEnabled),e.isFullView=p(he.isFullView),e.isInterfaceHidden=p(he.isInterfaceHidden);var n=document.querySelector("#site");window.innerHeight>1e3?e.isFullView&&!e.isInterfaceHidden?n.style.width="65%":n.style.width="100%":e.isFullView&&!e.isInterfaceHidden?n.style.width="75%":n.style.width="100%",document.querySelector("haxcms-site-editor-ui")?e.hasEditorUI=!0:e.hasEditorUI=!1,console.log(hasEditorUI)})),e}return n(d,e),t(d,[{key:"render",value:function(){return l(X||(X=s(['\n      <div class="chat-interface-wrapper">\n        <div class="chat-wrapper">\n          ','\n          <div class="main-wrapper">\n            <chat-control-bar></chat-control-bar>\n            <div class="chat-container">\n              <div class="chat-messages">\n                ','\n              </div>\n              <chat-input\n                placeholder="','"\n              ></chat-input>\n            </div>\n          </div>\n        </div>\n      </div>\n    '])),he.developerModeEnabled?l(N||(N=s([" <chat-developer-panel></chat-developer-panel> "]))):"",this.chatLog.map((function(e){return l(W||(W=s(['\n                    <chat-message\n                      message="','"\n                      ?sent-prompt="','"\n                      ?suggested-prompts="','"\n                    ></chat-message>\n                  '])),e.message,e.author===he.userName,he.currentSuggestions.length>0)})),he.promptPlaceholder)}},{key:"updated",value:(v=g(m().mark((function e(n){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i(o(d.prototype),"updated",this)&&i(o(d.prototype),"updated",this).call(this,n),console.log(n),!n.has("chatLog")){e.next=6;break}return e.next=5,this.updateComplete;case 5:this.chatLog.length>1?(t=this.shadowRoot.querySelector(".chat-messages")).scrollTo(0,t.scrollHeight):SCROLLABLE_ELEMENT.scrollTop(0);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})}],[{key:"tag",get:function(){return"chat-interface"}},{key:"styles",get:function(){return[i(o(d),"styles",this),a(z||(z=s(["\n        /* https://oer.hax.psu.edu/bto108/sites/haxcellence/documentation/ddd */\n\n        :host {\n          display: block;\n          z-index: 999999;\n          width: 100%;\n        }\n\n        /* Chat Interface Wrapper */\n        .chat-interface-wrapper {\n          background-color: transparent;\n        }\n\n        :host([is-full-view]) .chat-interface-wrapper {\n          background-color: var(--ddd-theme-default-potentialMidnight);\n          padding: var(--ddd-spacing-3);\n          height: 100vh;\n        }\n\n        :host([is-interface-hidden]) .chat-interface-wrapper {\n          display: none;\n        }\n\n        /* Chat Wrapper */\n        .chat-wrapper {\n          background-color: var(--data-theme-primary, var(--ddd-primary-1));\n          padding: var(--ddd-spacing-0) var(--ddd-spacing-2)\n            var(--ddd-spacing-2) var(--ddd-spacing-2);\n          border-radius: var(--ddd-radius-sm);\n          box-shadow: var(--ddd-boxShadow-xl);\n        }\n\n        :host([is-full-view]) .chat-wrapper {\n          margin: var(--ddd-spacing-6) var(--ddd-spacing-0) var(--ddd-spacing-6)\n            var(--ddd-spacing-0);\n          height: 94%;\n        }\n\n        :host([is-full-view][has-editor-ui]) .chat-wrapper {\n          margin: var(--ddd-spacing-18) var(--ddd-spacing-0)\n            var(--ddd-spacing-0) var(--ddd-spacing-0);\n          height: 87%;\n        }\n\n        :host([developer-mode]),\n        .chat-wrapper {\n          padding-top: var(--ddd-spacing-1);\n        }\n\n        /* Main Wrapper */\n        .main-wrapper {\n          display: flex;\n          flex-direction: column;\n        }\n\n        :host([is-full-view]) .main-wrapper {\n          height: 100%;\n        }\n\n        :host([is-full-view][developer-mode]) .main-wrapper {\n          height: 88%;\n        }\n\n        /* Chat Container */\n        .chat-container {\n          width: 100%;\n          background-color: var(--ddd-theme-default-white);\n          border-radius: var(--ddd-radius-sm);\n          display: flex;\n          flex-direction: column;\n        }\n\n        :host([is-full-view]) .chat-container {\n          height: 92%;\n        }\n\n        :host([is-full-view][developer-mode]) .chat-container {\n          height: 90%;\n        }\n\n        /* Chat Messages */\n        .chat-messages {\n          max-height: 300px;\n          overflow-x: hidden;\n          overflow-y: auto;\n          scrollbar-width: thin;\n        }\n\n        :host([is-full-view]) .chat-messages {\n          max-height: 100%;\n          height: 100%;\n        }\n\n        /* TODO test the media queries for quality assurance, and test without editor ui & without developer mode */\n        /* This should cover a lot of horizontal monitors */\n        @media only screen and (min-width: 1081px) {\n          @media only screen and (min-height: 1201px) {\n            :host([is-full-view]) .chat-wrapper {\n              height: 98%;\n            }\n\n            :host([is-full-view][has-editor-ui]) .chat-wrapper {\n              height: 95%;\n            }\n\n            :host([is-full-view]) .main-wrapper {\n              height: 105.5%;\n            }\n\n            :host([is-full-view][developer-mode]) .main-wrapper {\n              height: 101%;\n            }\n          }\n\n          @media only screen and (max-height: 1200px) and (min-height: 1001px) {\n            :host([is-full-view]) .chat-wrapper {\n              height: 96%;\n            }\n\n            :host([is-full-view][has-editor-ui]) .chat-wrapper {\n              height: 91.5%;\n            }\n\n            :host([is-full-view]) .main-wrapper {\n              height: 102%;\n            }\n\n            :host([is-full-view][developer-mode]) .main-wrapper {\n              height: 94%;\n            }\n          }\n\n          @media only screen and (max-height: 1001px) and (min-height: 940px) {\n            /* Modify more for even bigger screen sizes -_- */\n            :host([is-full-view]) .chat-wrapper {\n              height: 96%;\n            }\n\n            :host([is-full-view][has-editor-ui]) .chat-wrapper {\n              height: 91.5%;\n            }\n\n            :host([is-full-view]) .main-wrapper {\n              height: 102%;\n            }\n\n            :host([is-full-view][developer-mode]) .main-wrapper {\n              height: 96%;\n            }\n          }\n\n          @media only screen and (max-height: 939px) and (min-height: 880px) {\n            :host([is-full-view]) .chat-wrapper {\n              height: 91%;\n            }\n\n            :host([is-full-view][has-editor-ui]) .chat-wrapper {\n              height: 91%;\n            }\n\n            :host([is-full-view]) .main-wrapper {\n              height: 99%;\n            }\n\n            :host([is-full-view][developer-mode]) .main-wrapper {\n              height: 95%;\n            }\n          }\n\n          @media only screen and (max-height: 879px) and (min-height: 780px) {\n            :host([is-full-view]) .chat-wrapper {\n              height: 90%;\n            }\n\n            :host([is-full-view][has-editor-ui]) .chat-wrapper {\n              height: 90%;\n            }\n\n            :host([is-full-view]) .main-wrapper {\n              height: 97%;\n            }\n\n            :host([is-full-view][developer-mode]) .main-wrapper {\n              height: 93%;\n            }\n          }\n\n          @media only screen and (max-height: 779px) and (min-height: 752px) {\n            :host([is-full-view]) .chat-wrapper {\n              height: 89%;\n            }\n\n            :host([is-full-view][has-editor-ui]) .chat-wrapper {\n              height: 89%;\n            }\n\n            :host([is-full-view]) .main-wrapper {\n              height: 96%;\n            }\n\n            :host([is-full-view][developer-mode]) .main-wrapper {\n              height: 92%;\n            }\n          }\n\n          @media only screen and (max-height: 751px) {\n            :host([is-full-view]) .chat-wrapper {\n              height: 88%;\n            }\n\n            :host([is-full-view][has-editor-ui]) .chat-wrapper {\n              height: 88%;\n            }\n\n            :host([is-full-view]) .main-wrapper {\n              height: 95%;\n            }\n\n            :host([is-full-view][developer-mode]) .main-wrapper {\n              height: 91%;\n            }\n          }\n\n          @media only screen and (max-height: 748px) {\n            :host([is-full-view]) .chat-wrapper {\n              height: 88%;\n            }\n\n            :host([is-full-view][has-editor-ui]) .chat-wrapper {\n              height: 88%;\n            }\n\n            :host([is-full-view]) .main-wrapper {\n              height: 100%;\n            }\n\n            :host([is-full-view][developer-mode]) .main-wrapper {\n              height: 89%;\n            }\n          }\n        }\n\n        /* This should cover a lot of vertical monitors */\n        @media only screen and (max-width: 1080px) {\n          @media only screen and (min-height: 1720px) {\n            :host([is-full-view]) .chat-wrapper {\n              height: 98%;\n            }\n\n            :host([is-full-view][has-editor-ui]) .chat-wrapper {\n              height: 95%;\n            }\n\n            :host([is-full-view]) .main-wrapper {\n              height: 105.5%;\n            }\n\n            :host([is-full-view][developer-mode]) .main-wrapper {\n              height: 103%;\n            }\n          }\n\n          @media only screen and (max-height: 1719px) and (min-height: 1600px) {\n            :host([is-full-view]) .chat-wrapper {\n              height: 97.5%;\n            }\n\n            :host([is-full-view][has-editor-ui]) .chat-wrapper {\n              height: 95%;\n            }\n\n            :host([is-full-view]) .main-wrapper {\n              height: 105%;\n            }\n\n            :host([is-full-view][developer-mode]) .main-wrapper {\n              height: 102.5%;\n            }\n          }\n\n          @media only screen and (max-height: 1599px) and (min-height: 1500px) {\n            :host([is-full-view]) .chat-wrapper {\n              height: 97%;\n            }\n\n            :host([is-full-view][has-editor-ui]) .chat-wrapper {\n              height: 95%;\n            }\n\n            :host([is-full-view]) .main-wrapper {\n              height: 104.5%;\n            }\n\n            :host([is-full-view][developer-mode]) .main-wrapper {\n              height: 102%;\n            }\n          }\n\n          @media only screen and (max-height: 1499px) and (min-height: 1440px) {\n            :host([is-full-view]) .chat-wrapper {\n              height: 96.5%;\n            }\n\n            :host([is-full-view][has-editor-ui]) .chat-wrapper {\n              height: 95%;\n            }\n\n            :host([is-full-view]) .main-wrapper {\n              height: 103.5%;\n            }\n\n            :host([is-full-view][developer-mode]) .main-wrapper {\n              height: 101.5%;\n            }\n          }\n\n          @media only screen and (max-height: 1439px) and (min-height: 1420px) {\n            :host([is-full-view]) .chat-wrapper {\n              height: 96%;\n            }\n\n            :host([is-full-view][has-editor-ui]) .chat-wrapper {\n              height: 95%;\n            }\n\n            :host([is-full-view]) .main-wrapper {\n              height: 103%;\n            }\n\n            :host([is-full-view][developer-mode]) .main-wrapper {\n              height: 101%;\n            }\n          }\n\n          @media only screen and (max-height: 1419px) and (min-height: 1400px) {\n            :host([is-full-view]) .chat-wrapper {\n              height: 96%;\n            }\n\n            :host([is-full-view][has-editor-ui]) .chat-wrapper {\n              height: 94.5%;\n            }\n\n            :host([is-full-view]) .main-wrapper {\n              height: 102.5%;\n            }\n\n            :host([is-full-view][developer-mode]) .main-wrapper {\n              height: 100.5%;\n            }\n          }\n\n          @media only screen and (max-height: 1399px) and (min-height: 1300px) {\n            :host([is-full-view]) .chat-wrapper {\n              height: 96%;\n            }\n\n            :host([is-full-view][has-editor-ui]) .chat-wrapper {\n              height: 94%;\n            }\n\n            :host([is-full-view]) .main-wrapper {\n              height: 101.5%;\n            }\n\n            :host([is-full-view][developer-mode]) .main-wrapper {\n              height: 100%;\n            }\n          }\n\n          @media only screen and (max-height: 1299px) and (min-height: 1220px) {\n            :host([is-full-view]) .chat-wrapper {\n              height: 96%;\n            }\n\n            :host([is-full-view][has-editor-ui]) .chat-wrapper {\n              height: 93.5%;\n            }\n\n            :host([is-full-view]) .main-wrapper {\n              height: 101%;\n            }\n\n            :host([is-full-view][developer-mode]) .main-wrapper {\n              height: 99.5%;\n            }\n          }\n\n          @media only screen and (max-height: 1219px) and (min-height: 1160px) {\n            :host([is-full-view]) .chat-wrapper {\n              height: 96%;\n            }\n\n            :host([is-full-view][has-editor-ui]) .chat-wrapper {\n              height: 93%;\n            }\n\n            :host([is-full-view]) .main-wrapper {\n              height: 100.5%;\n            }\n\n            :host([is-full-view][developer-mode]) .main-wrapper {\n              height: 99%;\n            }\n          }\n\n          @media only screen and (max-height: 1159px) and (min-height: 1100px) {\n            :host([is-full-view]) .chat-wrapper {\n              height: 96%;\n            }\n\n            :host([is-full-view][has-editor-ui]) .chat-wrapper {\n              height: 92.5%;\n            }\n\n            :host([is-full-view]) .main-wrapper {\n              height: 100%;\n            }\n\n            :host([is-full-view][developer-mode]) .main-wrapper {\n              height: 98%;\n            }\n          }\n\n          @media only screen and (max-height: 1099px) and (min-height: 1050px) {\n            :host([is-full-view]) .chat-wrapper {\n              height: 96%;\n            }\n\n            :host([is-full-view][has-editor-ui]) .chat-wrapper {\n              height: 92%;\n            }\n\n            :host([is-full-view]) .main-wrapper {\n              height: 99.5%;\n            }\n\n            :host([is-full-view][developer-mode]) .main-wrapper {\n              height: 97%;\n            }\n          }\n\n          @media only screen and (max-height: 1049px) and (min-height: 1000px) {\n            :host([is-full-view]) .chat-wrapper {\n              height: 96%;\n            }\n\n            :host([is-full-view][has-editor-ui]) .chat-wrapper {\n              height: 92%;\n            }\n\n            :host([is-full-view]) .main-wrapper {\n              height: 99.5%;\n            }\n\n            :host([is-full-view][developer-mode]) .main-wrapper {\n              height: 94%;\n            }\n          }\n\n          @media only screen and (max-height: 999px) and (min-height: 880px) {\n            :host([is-full-view]) .chat-wrapper {\n              height: 96%;\n            }\n\n            :host([is-full-view][has-editor-ui]) .chat-wrapper {\n              height: 91.5%;\n            }\n\n            :host([is-full-view]) .main-wrapper {\n              height: 99%;\n            }\n\n            :host([is-full-view][developer-mode]) .main-wrapper {\n              height: 88%;\n            }\n          }\n\n          @media only screen and (max-height: 879px) and (min-height: 800px) {\n            :host([is-full-view]) .chat-wrapper {\n              height: 96%;\n            }\n\n            :host([is-full-view][has-editor-ui]) .chat-wrapper {\n              height: 91%;\n            }\n\n            :host([is-full-view]) .main-wrapper {\n              height: 98.5%;\n            }\n\n            :host([is-full-view][developer-mode]) .main-wrapper {\n              height: 87%;\n            }\n          }\n\n          @media only screen and (max-height: 799px) and (min-height: 750px) {\n            :host([is-full-view]) .chat-wrapper {\n              height: 96%;\n            }\n\n            :host([is-full-view][has-editor-ui]) .chat-wrapper {\n              height: 90.5%;\n            }\n\n            :host([is-full-view]) .main-wrapper {\n              height: 98%;\n            }\n\n            :host([is-full-view][developer-mode]) .main-wrapper {\n              height: 86%;\n            }\n          }\n        }\n\n        @media only screen and (max-height: 749px) and (min-height: 720px) {\n          :host([is-full-view]) .chat-wrapper {\n            height: 96%;\n          }\n\n          :host([is-full-view][has-editor-ui]) .chat-wrapper {\n            height: 90%;\n          }\n\n          :host([is-full-view]) .main-wrapper {\n            height: 98%;\n          }\n\n          :host([is-full-view][developer-mode]) .main-wrapper {\n            height: 85%;\n          }\n        }\n      "])))]}},{key:"properties",get:function(){return r(r({},i(o(d),"properties",this)),{},{chatLog:{type:Array},developerModeEnabled:{type:Boolean,attribute:"developer-mode",reflect:!0},hasEditorUI:{type:Boolean,attribute:"has-editor-ui",reflect:!0},isFullView:{type:Boolean,attribute:"is-full-view",reflect:!0},isInterfaceHidden:{type:Boolean,attribute:"is-interface-hidden",reflect:!0}})}}]);var v}(d);globalThis.customElements.define($.tag,$);var ee,ne,te={url:new URL("./elements/chat-agent/lib/chat-message.js",document.baseURI).href},ie=function(e){function d(){var e;return h(this,d),(e=c(this,d)).hasSuggestedPrompts=!1,e.isSentPrompt=!1,e.message="",e.messageWasSuggestedPrompt=!1,e.suggestedPrompts=he.currentSuggestions,e}return n(d,e),t(d,[{key:"render",value:function(){return l(_||(_=s(['\n      <div class="chat-message-wrapper">\n        ',"\n      </div>\n    "])),this.isSentPrompt?this.renderSentMessage():this.renderReceivedMessage())}},{key:"renderReceivedMessage",value:function(){var e=this;return l(J||(J=s(['\n      <div class="received-chat-message">\n        <div class="message">\n          <div class="author-icon">\n            <simple-icon-lite icon="hax:wizard-hat"></simple-icon-lite>\n          </div>\n          <type-writer\n            class="message-content"\n            text="','"\n            speed="','"\n          ></type-writer>\n        </div>\n        <div class="suggested-prompts">\n          ',"\n        </div>\n      </div>\n    "])),this.message,he.merlinTypeWriterSpeed,this.suggestedPrompts.map((function(n){return l(Q||(Q=s(['\n              <chat-suggestion\n                suggestion="','"\n                prompt-type="','"\n                @click=',"\n                @keypress=","\n              ></chat-suggestion>\n            "])),n.suggestion,n.type,e.disableSuggestions,e.disableSuggestions)})))}},{key:"renderSentMessage",value:function(){return l(G||(G=s(['\n      <div class="sent-chat-message">\n        \x3c!-- <type-writer class="message-content" speed="','" text="','"></type-writer> --\x3e\n        <p class="message-content">','</p>\n        <div class="author-icon">\n          <rpg-character seed="','"></rpg-character>\n        </div>\n      </div>\n    '])),he.userTypeWriterSpeed,this.message,this.message,he.userName)}},{key:"disableSuggestions",value:function(e){var n=this.shadowRoot.querySelectorAll("chat-suggestion");if(n.forEach((function(e){e.hasAttribute("disabled")||e.setAttribute("disabled","")})),!e.currentTarget.hasAttribute("chosen-prompt")){var t=!1;n.forEach((function(e){e.hasAttribute("chosen-prompt")&&(t=!0)})),t||e.currentTarget.setAttribute("chosen-prompt","")}}}],[{key:"tag",get:function(){return"chat-message"}},{key:"styles",get:function(){return[i(o(d),"styles",this),a(Z||(Z=s(["\n        /* https://oer.hax.psu.edu/bto108/sites/haxcellence/documentation/ddd */\n\n        :host {\n          display: block;\n          container-type: inline-size;\n        }\n\n        .chat-message-wrapper {\n          padding: var(--ddd-spacing-2) var(--ddd-spacing-3);\n          border-bottom: var(--ddd-border-md);\n          border-bottom-style: dashed;\n        }\n\n        .sent-chat-message,\n        .message {\n          display: flex;\n          flex-direction: row;\n          gap: var(--ddd-spacing-3);\n          align-items: center;\n        }\n\n        .received-chat-message {\n          display: flex;\n          flex-direction: column;\n          /* gap: var(--ddd-spacing-1); */\n        }\n\n        .author-icon {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          border: var(--ddd-border-md);\n          border-color: var(--ddd-theme-default-potentialMidnight);\n          border-radius: var(--ddd-radius-circle);\n          width: var(--ddd-spacing-18);\n          height: var(--ddd-spacing-18);\n        }\n\n        .received-chat-message .author-icon {\n          border-radius: var(--ddd-radius-xl);\n        }\n\n        simple-icon-lite {\n          color: var(--data-theme-primary, var(--ddd-primary-13));\n          --simple-icon-height: var(--ddd-icon-md);\n          --simple-icon-width: var(--ddd-icon-md);\n        }\n\n        rpg-character {\n          width: var(--ddd-spacing-12);\n          height: var(--ddd-spacing-12);\n          margin-bottom: var(--ddd-spacing-3);\n        }\n\n        .message-content {\n          color: #000;\n          border: var(--ddd-border-md);\n          border-color: var(--ddd-theme-default-potentialMidnight);\n          border-radius: var(--ddd-radius-sm);\n          padding: var(--ddd-spacing-2);\n          margin: var(--ddd-spacing-0);\n          width: 80%;\n          font-family: var(--ddd-font-primary);\n          font-size: var(--ddd-font-size-4xs);\n        }\n\n        .suggested-prompts {\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          padding-top: var(--ddd-spacing-3);\n          gap: var(--ddd-spacing-2);\n        }\n\n        @container (max-width: 190px) {\n          .author-icon {\n            display: none;\n          }\n\n          .received-chat-message .message-content {\n            background: rgba(73, 29, 112, 0.1);\n          }\n\n          .message {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n          }\n        }\n      "])))]}},{key:"properties",get:function(){return r(r({},i(o(d),"properties",this)),{},{hasSuggestedPrompts:{type:Boolean,attribute:"suggested-prompts"},isSentPrompt:{type:Boolean,attribute:"sent-prompt"},message:{type:String},messageWasSuggestedPrompt:{type:Boolean,attribute:"suggested-message"},suggestedPrompts:{type:Array}})}},{key:"haxProperties",get:function(){return new URL("./lib/".concat(this.tag,".haxProperties.json"),te.url).href}}])}(d);globalThis.customElements.define(ie.tag,ie);var oe,ae,se={url:new URL("./elements/chat-agent/lib/chat-suggestion.js",document.baseURI).href},re=function(e){function d(){var e;return h(this,d),(e=c(this,d)).chosenPrompt=!1,e.disabled=!1,e.promptType="",e.suggestion="",e.messageIndex=null,e.userIndex=null,u((function(){e.messageIndex=p(he.messageIndex),e.userIndex=p(he.userIndex)})),e}return n(d,e),t(d,[{key:"render",value:function(){return l(ee||(ee=s(['\n      <div\n        class="chat-suggestion-wrapper"\n        @click=',"\n        @keypress=",'\n        tabindex="0"\n        aria-label=\'Send suggestion "','" to Merlin\'\n      >\n        <div class="suggestion-icon">\n          <div class="circle-wrapper">\n            <simple-icon-lite></simple-icon-lite>\n          </div>\n        </div>\n        <div class="suggestion-text">\n          <p class="chat-suggestion">',"</p>\n        </div>\n      </div>\n    "])),this.handleSuggestion,this.handleSuggestion,this.suggestion,this.suggestion)}},{key:"handleSuggestion",value:function(){this.disabled?he.developerModeEnabled&&console.info("HAX-DEV-MODE: Suggestion buttons disabled, ignoring request"):(he.developerModeEnabled&&console.info("HAX-DEV-MODE: Suggestion button pressed. Suggested prompt to send to Merlin: "+this.suggestion),he.handleMessage(he.userName,this.suggestion))}},{key:"firstUpdated",value:function(e){i(o(d.prototype),"firstUpdated",this)&&i(o(d.prototype),"firstUpdated",this).call(this,e);var n=this.shadowRoot.querySelector("simple-icon-lite");switch(this.promptType){case"suggestion":n.setAttribute("icon","question-answer"),n.style.color="var(--data-theme-primary, var(--ddd-primary-13))";break;case"network":n.setAttribute("icon","device:signal-cellular-connected-no-internet-0-bar"),n.style.color="var(--ddd-theme-default-coalyGray)";break;case"help":n.setAttribute("icon","help-outline"),n.style.color="var(--ddd-theme-default-original87Pink)";break;case"hax":n.setAttribute("icon","lrn:network"),n.style.color="var(--data-theme-primary, var(--ddd-primary-13))";break;default:n.setAttribute("icon","lrn:info"),n.style.color="var(--ddd-theme-default-skyBlue)"}}},{key:"updated",value:function(e){i(o(d.prototype),"updated",this)&&i(o(d.prototype),"updated",this).call(this,e),this.disabled&&this.shadowRoot.querySelector(".chat-suggestion-wrapper").removeAttribute("tabindex")}}],[{key:"tag",get:function(){return"chat-suggestion"}},{key:"styles",get:function(){return[i(o(d),"styles",this),a(ne||(ne=s(["\n        /* https://oer.hax.psu.edu/bto108/sites/haxcellence/documentation/ddd */\n\n        :host {\n          display: block;\n          container-type: inline-size;\n        }\n\n        .chat-suggestion-wrapper {\n          display: flex;\n          flex-direction: row;\n          justify-content: center;\n          align-items: center;\n          background-color: var(--ddd-theme-default-successLight);\n          border: var(--ddd-border-sm);\n          border-radius: var(--ddd-radius-xl);\n          border-color: var(--ddd-theme-default-potentialMidnight);\n          opacity: 1;\n          cursor: pointer;\n          box-shadow: var(--ddd-boxShadow-xl);\n        }\n\n        .suggestion-icon {\n          width: 20%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          border-right: var(--ddd-border-md);\n          border-right-style: solid;\n        }\n\n        .circle-wrapper {\n          background-color: white;\n          border-radius: var(--ddd-radius-circle);\n          padding: var(--ddd-spacing-2);\n        }\n\n        simple-icon-lite {\n          --simple-icon-height: var(--ddd-icon-xs);\n          --simple-icon-width: var(--ddd-icon-xs);\n        }\n\n        .suggestion-text {\n          width: 80%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        :host([disabled]) .chat-suggestion-wrapper {\n          background-color: var(--ddd-theme-default-discoveryCoral);\n          opacity: 0.6;\n          cursor: default;\n        }\n\n        :host([chosen-prompt]) .chat-suggestion-wrapper {\n          background-color: var(--ddd-theme-default-futureLime);\n        }\n\n        .chat-suggestion-wrapper:hover,\n        .chat-suggestion-wrapper:focus {\n          background-color: var(--ddd-theme-default-futureLime);\n        }\n\n        .chat-suggestion-wrapper:hover p,\n        .chat-suggestion-wrapper:focus p {\n          text-decoration: underline;\n        }\n\n        :host([disabled]) p {\n          text-decoration: none;\n        }\n\n        p {\n          color: var(--ddd-theme-default-potentialMidnight);\n          font-family: var(--ddd-font-primary);\n          font-size: var(--ddd-font-size-4xs);\n          width: 80%;\n          text-align: center;\n        }\n\n        @container (max-width: 270px) and (min-width: 216px) {\n          simple-icon-lite {\n            --simple-icon-height: var(--ddd-icon-xxs);\n            --simple-icon-width: var(--ddd-icon-xxs);\n          }\n        }\n\n        @container (max-width: 216px) {\n          .suggestion-icon {\n            display: none;\n          }\n        }\n      "])))]}},{key:"properties",get:function(){return r(r({},i(o(d),"properties",this)),{},{chosenPrompt:{type:Boolean,attribute:"chosen-prompt"},disabled:{type:Boolean},promptType:{type:String,attribute:"prompt-type"},suggestion:{type:String}})}},{key:"haxProperties",get:function(){return new URL("./lib/".concat(this.tag,".haxProperties.json"),se.url).href}}])}(d);globalThis.customElements.define(re.tag,re),v({enforceActions:!1}),f(["haxcms"]),w.add({endpoint:"/api/apps/haxcms/aiChat",name:"@haxcms/aiChat",title:"AI Chat",description:"AI based chat agent that can answer questions about a site",params:{site:"location of the HAXcms site OR site.json data",type:"site for site.json or link for remote loading",question:"Question to ask of the AI",engine:"which engine to use as we test multiple",context:"context to query based on. Course typical"}});var le=function(e){function d(){var e;return h(this,d),(e=c(this,d)).chatLog=[],e.engine="alfred",void 0!==b.userData.userName?e.userName=b.userData.userName:e.userName="guest",e.context="phys211",e.isLoading=null,e.dataCollectionEnabled=!0,e.buttonIcon="hax:wizard-hat",e.buttonLabel="Merlin-AI",e.developerModeEnabled=!1,e.promptCharacterLimit,e.promptPlaceholder="Enter your prompt here...",e.isFullView=!1,e.isInterfaceHidden=!1,e.merlinIndex=0,e.messageIndex=0,e.userIndex=0,e.userTypeWriterSpeed=0,e.merlinTypeWriterSpeed=2,e.currentSuggestions=[],e.isSiteEditorOpen=D.userMenuOpen,console.log(e.isSiteEditorOpen),y(e,{buttonIcon:x,chatLog:x,dataCollectionEnabled:x,developerModeEnabled:x,engine:x,isFullView:x,isInterfaceHidden:x,isLoading:x,merlinIndex:x,messageIndex:x,userIndex:x}),u((function(){p(e.buttonIcon),p(e.chatLog),p(e.dataCollectionEnabled),p(e.developerModeEnabled),p(e.engine);var n=p(e.isFullView),t=p(e.isInterfaceHidden),i=p(e.isLoading);p(e.merlinIndex),p(e.messageIndex),p(e.userIndex),n?e.setAttribute("is-full-view",""):e.hasAttribute("is-full-view")&&e.removeAttribute("is-full-view"),t?e.setAttribute("is-interface-hidden",""):e.hasAttribute("is-interface-hidden")&&e.removeAttribute("is-interface-hidden"),e.buttonIcon=i?"hax:loading":"hax:wizard-hat"})),e}return n(d,e),t(d,[{key:"render",value:function(){return l(oe||(oe=s(['\n      <div class="chat-agent-wrapper">\n        <div class="agent-interface-wrapper">\n          <chat-interface></chat-interface>\n        </div>\n        <div class="agent-button-wrapper">\n          <chat-button>\n            <span slot="label">',"</span>\n          </chat-button>\n        </div>\n      </div>\n    "])),this.buttonLabel)}},{key:"firstUpdated",value:function(e){i(o(d.prototype),"firstUpdated",this)&&i(o(d.prototype),"firstUpdated",this).call(this,e),this.startAI()}},{key:"startAI",value:function(){this.handleMessage("merlin","Hello! My name is Merlin. I am currently in beta, and may not yet be feature complete, so you may encounter some bugs. I can currently only answer questions related to physics. How can I assist you today?"),this.currentSuggestions=[{suggestion:"Who are you?",type:"hax"},{suggestion:"What can you do for me?",type:"help"},{suggestion:"How do I use you?",type:"help"}],this.shadowRoot.querySelector("chat-interface").shadowRoot.querySelector("chat-message").shadowRoot.querySelectorAll("chat-suggestion").forEach((function(e){e.hasAttribute("disabled")&&e.removeAttribute("disabled"),e.hasAttribute("chosen-prompt")&&e.removeAttribute("chosen-prompt")}))}},{key:"handleMessage",value:function(e,n){var t;switch(this.developerModeEnabled&&console.info('HAX-DEV-MODE: Writing message "'.concat(n,'" by ').concat(e," to chatLog.")),this.messageIndex++,e){case"merlin":this.merlinIndex++,t=this.merlinIndex;break;case this.userName:this.userIndex++,t=this.userIndex}var i=new Date,o={messageID:this.messageIndex,author:e,message:n,authorMessageIndex:t,timestamp:i.toString().replace(/\s/g,"-")};this.chatLog.push(o),e===this.userName&&this.handleInteraction(n)}},{key:"handleInteraction",value:function(e){var n=this;switch(this.developerModeEnabled&&console.info("HAX-DEV-MODE: Prompt sent to: ".concat(this.engine,". Prompt sent: ").concat(e)),this.currentSuggestions=[],e){case"Who are you?":this.currentSuggestions=[{suggestion:"What can you do for me?",type:"help"},{suggestion:"How do I use you?",type:"help"}],this.handleMessage("merlin","I am Merlin. I was created for use within HAX websites as an assistant to help you with your questions. How may I help you today?");break;case"What can you do for me?":this.currentSuggestions=[{suggestion:"Who are you?",type:"hax"},{suggestion:"How do I use you?",type:"help"}],this.handleMessage("merlin","I can answer questions and chat with you about information relevant to the website you are navigating. How can I help you?");break;case"How do I use you?":this.currentSuggestions=[{suggestion:"Who are you?",type:"hax"},{suggestion:"What can you do for me?",type:"help"}],this.handleMessage("merlin","I support numerous functions. You can ask me questions, as well as download our chat log and reset our chat. You can start asking me questions by clicking on one of the suggested prompts, or by typing a prompt in the input box below and pressing the send button or pressing the enter key on your keyboard. Here are some of the keyboard controls you can utilize: \n 1. Tab Key - Navigates you through the numerous usable buttons. \n 2. Enter Key (in text area) - Will submit the prompt you wrote. \n 3. Enter key (When focusing on a button) - Will act in the same way as clicking the button. \n 4. Up & Down Arrow Keys (in text area) - will navigate you through previously sent prompts so you can send them again.");break;case"Why can't you connect?":this.currentSuggestions=[{suggestion:"How do I fix this connection issue?",type:"network"}],this.handleMessage("merlin","I am either unable to connect to the internet, or a service I connect to is not available, meaning I cannot research how to respond to your prompt.");break;case"How do I fix this connection issue?":this.currentSuggestions=[{suggestion:"Why can't you connect?",type:"network"}],this.handleMessage("merlin","Please ensure you are connected to the internet. I cannot respond to (most of) your questions if you are not connected to the internet. If you are connected, it is likely one of my connected services is having an issue, I will try to fix that and be back to help you soon.");break;default:globalThis.document.querySelector("base")&&globalThis.document.querySelector("base").href;var t={site:{file:"https://haxtheweb.org/site.json"},type:"site",question:e,engine:this.engine,context:this.context};this.isLoading=!0,w.call("@haxcms/aiChat",t).then((function(e){200==e.status&&(n.answers=[e.data.answers],n.developerModeEnabled&&console.info(n.answers),n.question=e.data.question,n.currentSuggestions=[]),n.isLoading=!1,n.handleMessage("merlin",e.data.answers)})).catch((function(e){n.isLoading=!1,n.currentSuggestions=[{suggestion:"Why can't you connect?",type:"network"},{suggestion:"How do I fix this connection issue?",type:"network"}],n.handleMessage("merlin","I'm sorry, I'm having trouble connecting right now. Please try again soon. If you'd like to learn more, please click on one of the suggested prompts."),console.error(e)}))}}},{key:"handleDownload",value:function(e){if(this.developerModeEnabled&&console.info("HAX-DEV-MODE: Downloading chatlog as ".concat(e,".")),0!==this.chatLog.length){var n=JSON.stringify(this.chatLog,void 0,2),t=new Date,i="".concat(this.userName,"-chat-log-").concat(t.toString().replace(/\s/g,"-"),".").concat(e),o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(n)),o.setAttribute("download",i),o.click(),o.remove()}}}],[{key:"tag",get:function(){return"chat-agent"}},{key:"styles",get:function(){return[i(o(d),"styles",this),a(ae||(ae=s(["\n        /* https://oer.hax.psu.edu/bto108/sites/haxcellence/documentation/ddd */\n\n        :host {\n          display: block;\n          container-type: normal;\n        }\n\n        .chat-agent-wrapper {\n          display: flex;\n          flex-direction: column;\n          gap: var(--ddd-spacing-2);\n          position: fixed;\n          bottom: var(--ddd-spacing-2);\n          right: var(--ddd-spacing-2);\n          width: 35%;\n        }\n\n        :host([is-full-view]) .chat-agent-wrapper {\n          bottom: var(--ddd-spacing-0);\n          right: var(--ddd-spacing-0);\n          gap: var(--ddd-spacing-0);\n          width: 25%;\n          @media only screen and (min-height: 1000px) {\n            width: 35%;\n          }\n        }\n\n        :host([is-full-view]:host([is-interface-hidden])) .chat-agent-wrapper {\n          bottom: var(--ddd-spacing-2);\n          right: var(--ddd-spacing-2);\n          gap: var(--ddd-spacing-2);\n        }\n\n        .agent-interface-wrapper {\n          display: flex;\n          justify-content: right;\n        }\n\n        .agent-button-wrapper {\n          display: flex;\n          justify-content: right;\n        }\n\n        @container (max-width: 600px) {\n          .chat-agent-wrapper {\n            width: 30%;\n          }\n        }\n\n        /* TODO adjust all media queries for HAX environment, not demo environment */\n        @media only screen and (max-width: 425px) {\n          .chat-agent-wrapper {\n            width: 90%;\n          }\n        }\n      "])))]}},{key:"properties",get:function(){return r(r({},i(o(d),"properties",this)),{},{userName:{type:String,attribute:"user-name"},userPicture:{type:String,attribute:"user-picture"},promptCharacterLimit:{type:Number,attribute:"maxlength"},promptPlaceholder:{type:String,attribute:"placeholder"},merlinTypeWriterSpeed:{type:Number,attribute:"merlin-type-writer-speed"},userTypeWriterSpeed:{type:Number,attribute:"user-type-writer-speed"}})}}])}(d);customElements.define(le.tag,le),globalThis.ChatAgentModal=globalThis.ChatAgentModal||{},globalThis.ChatAgentModal.requestAvailability=function(){return globalThis.ChatAgentModal.instance||(globalThis.ChatAgentModal.instance=document.createElement("chat-agent"),document.body.appendChild(globalThis.ChatAgentModal.instance)),globalThis.ChatAgentModal.instance};var de,he=globalThis.ChatAgentModal.requestAvailability();f(["haxcms"]),w.add({endpoint:"/api/apps/haxcms/aiChat",name:"@haxcms/aiChat",title:"AI Chat",description:"AI based chat agent that can answer questions about a site",params:{site:"location of the HAXcms site OR site.json data",type:"site for site.json or link for remote loading",question:"Question to ask of the AI",engine:"which engine to use as we test multiple",context:"context to query based on. Course typical"}});var ce=e("SiteAiChat",function(e){function l(){var e;return h(this,l),(e=c(this,l)).opened=!1,e.question=null,e.answers=[],e.loading=!1,e.context=p(b.manifest.metadata.site.name),e.engine="alfred",e.dataPulse="1",e}return n(l,e),t(l,[{key:"askQuestion",value:function(e){e.preventDefault(),this.engine=e.target.getAttribute("name"),this.context=this.shadowRoot.querySelector("#context").value,this.question=this.shadowRoot.querySelector("#question").value,this.requestAIFeedback()}},{key:"updated",value:function(e){i(o(l.prototype),"updated",this)&&i(o(l.prototype),"updated",this).call(this,e),e.has("opened")&&(this.opened?this.shadowRoot.querySelector("dialog").showModal():this.shadowRoot.querySelector("dialog").close())}},{key:"requestAIFeedback",value:function(){var e=this,n=p(b.manifest),t="";globalThis.document.querySelector("base")&&(t=globalThis.document.querySelector("base").href);var i={site:{file:t+"site.json",metadata:n.metadata},type:"site",question:this.question,engine:this.engine,context:this.context};this.loading=!0,w.call("@haxcms/aiChat",i).then((function(n){200==n.status&&(e.answers=k(n.data.answers),e.question=n.data.question),e.loading=!1})).catch((function(n){e.loading=!1,console.error(n)}))}},{key:"closeChat",value:function(){this.opened=!1}},{key:"openChat",value:function(){var e=this;this.opened=!0,setTimeout((function(){e.shadowRoot.querySelector("#question").focus(),e.shadowRoot.querySelector("#question").select()}),300)}}],[{key:"tag",get:function(){return"site-ai-chat"}},{key:"styles",get:function(){return[i(o(l),"styles",this),a(de||(de=s(["\n        :host {\n          display: block;\n        }\n      "])))]}},{key:"properties",get:function(){return r(r({},i(o(l),"properties",this)),{},{engine:{type:String},question:{type:String},context:{type:String},answers:{type:Array},opened:{type:Boolean,reflect:!0},loading:{type:Boolean,reflect:!0}})}}])}(E(I(M))));globalThis.customElements.define(ce.tag,ce)}}}));
