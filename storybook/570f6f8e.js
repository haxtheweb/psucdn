System.register(["./3826c3d9.js"],(function(e){"use strict";var t,o,a,i,n,s,l,r,u;return{setters:[function(e){t=e._,o=e.a,a=e.o,i=e.O,n=e.l,s=e.c,l=e.d,r=e.aL,u=e.n}],execute:function(){var c=e("HAXCMSSiteRouter",function(e){function n(){var e;s(this,n),(e=l(this,n)).windowControllers=new AbortController,globalThis.HAXCMS.requestAvailability().storePieces.siteRouter=e;var t={};return e.baseURI&&(t.baseUrl=e.baseURI),e.router=new r(e,t),e.__disposer=e.__disposer?e.__disposer:[],u((function(t){e._updateRouter(i.routerManifest),e.__disposer.push(t)})),globalThis.addEventListener("vaadin-router-location-changed",e._routerLocationChanged.bind(e),{signal:e.windowControllers.signal}),globalThis.addEventListener("haxcms-site-router-add",e.addRoutesEvent.bind(e),{signal:e.windowControllers.signal}),e}return t(n,e),o(n,[{key:"baseURI",get:function(){return this.getAttribute("base-uri")},set:function(e){this.setAttribute("base-uri",e)}},{key:"disconnectedCallback",value:function(){for(var e in this.__disposer)this.__disposer[e].dispose();this.windowControllers.abort()}},{key:"addRoutesEvent",value:function(e){this.addRoutes(e.detail)}},{key:"addRoutes",value:function(e){this.router.addRoutes(e)}},{key:"_updateRouter",value:function(e){if(e&&void 0!==e.items){var t=e.items.map((function(e){return{path:e.slug,name:e.id,component:"fake-".concat(e.id,"-e")}}));this.router.setRoutes([].concat(a(t),[{path:"/",component:"fake-home-e",name:"home"},{path:"/(.*)",component:"fake-404-e",name:"404"}]))}}},{key:"lookupRoute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!!(e&&i.routerManifest&&i.routerManifest.items&&i.routerManifest.items.filter((function(t){return t.slug===e})).length>0)&&i.routerManifest.items.filter((function(t){return t.slug===e}))}},{key:"_routerLocationChanged",value:function(e){if(globalThis.dispatchEvent(new CustomEvent("simple-modal-hide",{bubbles:!0,cancelable:!0,detail:{}})),globalThis.dispatchEvent(new CustomEvent("haxcms-toast-hide",{bubbles:!0,cancelable:!0,detail:{}})),globalThis.dispatchEvent(new CustomEvent("super-daemon-close",{bubbles:!0,cancelable:!0,detail:{}})),i.currentRouterLocation=e.detail.location,"404"===e.detail.location.route.name&&(e.detail.location.params[0].startsWith("files/")||e.detail.location.params[0].startsWith("assets/")))globalThis.location=e.detail.location.pathname;else if("home"===e.detail.location.route.name&&e.detail.location.search.startsWith("?p=/")&&this.lookupRoute(e.detail.location.search.replace("?p=/","").split("&")[0])){var t=this.lookupRoute(e.detail.location.search.replace("?p=/","").split("&")[0])[0];i.activeId=t.id,globalThis.history.replaceState({},null,e.detail.location.search.replace("?p=/","").split("&")[0]),e.detail.location.search=e.detail.location.search.replace("?p=/","").split("&")[0],e.detail.location.route.name=t.id,e.detail.location.route.path=e.detail.location.search,e.detail.location.route.component="fake-".concat(t.id,"-e"),i.location=e.detail.location}else i.location=e.detail.location}}],[{key:"tag",get:function(){return"haxcms-site-router"}}])}(n(HTMLElement)));globalThis.customElements.define(c.tag,c)}}}));
