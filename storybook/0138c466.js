System.register(["./23447ac8.js"],(function(n){"use strict";var e,a,t,i,o,s,d,r,l;return{setters:[function(n){e=n._,a=n.a,t=n.e,i=n.v,o=n.f,s=n.g,d=n.s,r=n.c,l=n.d}],execute:function(){var c={url:new URL("./elements/hal-9000/hal-9000.js",document.baseURI).href},u=n("Hal9000",function(n){function d(){var n;r(this,d),(n=l(this,d)).toast=!1,n.windowControllers=new AbortController,n.commands={},n.respondsTo="(merlin)",n.debug=!1,n.pitch=.9,n.rate=.9,n.language=navigator.language,window.Hal9000=window.Hal9000||{},window.Hal9000.instance=n;var e="".concat(new URL("./lib/annyang/annyang.min.js",c.url).href);return window.addEventListener("es-bridge-annyang-loaded",n._annyangLoaded.bind(n),{signal:n.windowControllers.signal}),window.ESGlobalBridge.requestAvailability().load("annyang",e),void 0!==window.speechSynthesis&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition)&&(n.synth=window.speechSynthesis),n}return e(d,n),a(d,[{key:"_commandsChanged",value:function(n){this.addCommands(n)}},{key:"addCommands",value:function(n){if(this.annyang){if(this.annyang.removeCommands(),n["*anything"]){var e=n["*anything"];delete n["*anything"],n["*anything"]=e}this.annyang.addCommands(n)}}},{key:"speak",value:function(n){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise((function(i){e.__text=n,e.synth?(e.utter=new SpeechSynthesisUtterance(e.__text),e.utter.pitch=e.pitch,e.utter.rate=e.rate,e.utter.lang=e.language,window.HAXCMS&&(window.HAXCMS.instance.setCursor("hax:wizard-hat"),window.HAXCMS.instance.setFavicon("hax:wizard-hat")),e.synth.speak(e.utter),e.toast&&e.setToast(n,a,t),e.utter.onend=function(n){window.HAXCMS&&(window.HAXCMS.instance.resetCursor(),window.HAXCMS.instance.resetFavicon()),a||t||window.dispatchEvent(new CustomEvent("super-daemon-toast-hide",{bubbles:!0,composed:!0,cancelable:!1,detail:!1})),i(n)}):i(!1)}))}},{key:"setToast",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];window.dispatchEvent(new CustomEvent("super-daemon-toast-show",{bubbles:!0,composed:!0,cancelable:!0,detail:{text:n,future:!0,merlin:!0,accentColor:"purple",duration:4e3,alwaysvisible:e,awaitingMerlinInput:a}}))}},{key:"_annyangLoaded",value:function(){if(this.annyang=window.annyang,this.annyang){this.annyang.addCommands(this.commands),this.annyang.debug(this.debug),this.auto?this.annyang.start({autoRestart:!0,continuous:!0}):this.enabled&&this.annyang.start();var n=new CustomEvent("hal-9000-online",{bubbles:!0,cancelable:!1,detail:!0});this.dispatchEvent(n)}}},{key:"_respondsToChanged",value:function(n,e){this.annyang&&this.annyang.removeCommands();var a={};for(var i in this.commands)i.replace(e,n)!==i?a[i.replace(e,n)]=this.commands[i]:a[i]=this.commands[i];a.length>0&&(this.commands=t({},a))}},{key:"_autoChanged",value:function(n){this.enabled=n}},{key:"_enabledChanged",value:function(n){this.annyang&&(n?this.auto?this.annyang.start({autoRestart:!0,continuous:!0}):this.annyang.start():this.annyang.abort())}},{key:"_debugChanged",value:function(n,e){this.annyang&&this.annyang.debug(n)}},{key:"updated",value:function(n){var e=this;n.forEach((function(n,a){"commands"==a&&"undefined"!==i(n)&&e._commandsChanged(e[a]),"respondsTo"==a&&e._respondsToChanged(e[a],n),"debug"==a&&e._debugChanged(e[a],n),"auto"==a&&e._autoChanged(e[a],n),"enabled"==a&&e._enabledChanged(e[a],n)}))}},{key:"disconnectedCallback",value:function(){this.windowControllers.abort(),o(s(d.prototype),"disconnectedCallback",this).call(this)}}],[{key:"properties",get:function(){return{toast:{type:Boolean,reflect:!0},commands:{name:"commands",type:Object},respondsTo:{name:"respondsTo",type:String,attribute:"responds-to"},debug:{name:"debug",type:Boolean},auto:{name:"auto",type:Boolean,reflect:!0},enabled:{name:"enabled",type:Boolean,reflect:!0},pitch:{name:"pitch",type:Number,reflect:!0},rate:{name:"rate",type:Number,reflect:!0},language:{name:"language",type:String,reflect:!0}}}},{key:"tag",get:function(){return"hal-9000"}}])}(d));customElements.define(u.tag,u),window.Hal9000=window.Hal9000||{},window.Hal9000.requestAvailability=function(){if(!window.Hal9000.instance){var n=document.createElement("hal-9000");document.body.appendChild(n),window.Hal9000.instance=n}return window.Hal9000.instance};n("HAL9000Instance",window.Hal9000.requestAvailability())}}}));
