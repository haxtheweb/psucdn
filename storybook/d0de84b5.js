System.register(["./734b9790.js"],(function(e){"use strict";var t,i,n,a,o,r,s;return{setters:[function(e){t=e._,i=e.a,n=e.f,a=e.g,o=e.m,r=e.c,s=e.d}],execute:function(){var l={url:new URL("./elements/q-r/lib/qr-code.js",document.baseURI).href},d=e("QRCodeElement",function(e){function o(){var e;r(this,o),(e=s(this,o)).windowControllers=new AbortController,e._defineProperty=e._defineProperty.bind(e),e.attachShadow({mode:"open"}),Object.keys(o.defaultAttributes).map(e._defineProperty);var t=new URL("./qr.js",l.url).href;return globalThis.addEventListener("es-bridge-qr-loaded",e._qrLoaded.bind(e),{signal:e.windowControllers.signal}),globalThis.ESGlobalBridge.requestAvailability().load("qr",t),e}return t(o,e),i(o,[{key:"disconnectedCallback",value:function(){this.windowControllers.abort(),n(a(o.prototype),"disconnectedCallback",this)&&n(a(o.prototype),"disconnectedCallback",this).call(this)}},{key:"_qrLoaded",value:function(){this.generate()}},{key:"attributeChangedCallback",value:function(e,t,i){var n=this[e+"Changed"];n&&"function"==typeof n&&n.call(this,t,i),!0===globalThis.ESGlobalBridge.requestAvailability().imports.qr&&this.generate()}},{key:"_defineProperty",value:function(e){var t=this;Object.defineProperty(this,e,{get:function(){var i=t.getAttribute(e);return null===i?o.defaultAttributes[e]:i},set:function(i){t.setAttribute(e,i)}})}},{key:"getOptions",value:function(){var e=this.modulesize,t=this.margin;return{modulesize:null!==e?parseInt(e):e,margin:null!==t?parseInt(t):t}}},{key:"generate",value:function(){null!==this.data?"png"===this.format?this.generatePNG():"html"===this.format?this.generateHTML():"svg"===this.format?this.generateSVG():this.shadowRoot.innerHTML="<div>qr-code: "+this.format+" not supported!</div>":this.shadowRoot.innerHTML="<div>qr-code: no data!</div>"}},{key:"generatePNG",value:function(){try{var e=globalThis.document.createElement("img");e.src=globalThis.QRCode.generatePNG(this.data,this.getOptions()),this.clear(),this.shadowRoot.appendChild(e)}catch(e){this.shadowRoot.innerHTML="<div>qr-code: no canvas support!</div>"}}},{key:"generateHTML",value:function(){var e=globalThis.QRCode.generateHTML(this.data,this.getOptions());this.clear(),this.shadowRoot.appendChild(e)}},{key:"generateSVG",value:function(){var e=globalThis.QRCode.generateSVG(this.data,this.getOptions());this.clear(),this.shadowRoot.appendChild(e)}},{key:"clear",value:function(){for(;this.shadowRoot.lastChild;)this.shadowRoot.removeChild(this.shadowRoot.lastChild)}}],[{key:"tag",get:function(){return"qr-code"}},{key:"defaultAttributes",get:function(){return{data:null,format:"png",modulesize:5,margin:4}}},{key:"observedAttributes",get:function(){return Object.keys(o.defaultAttributes)}}])}(o(HTMLElement)));customElements.define(d.tag,d)}}}));
