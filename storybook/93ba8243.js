System.register(["./3826c3d9.js"],(function(e,t){"use strict";var i,n,s,o,a,c,r,l,d;return{setters:[function(e){i=e._,n=e.a,s=e.f,o=e.O,a=e.l,c=e.c,r=e.d,l=e.h,d=e.j}],execute:function(){var u={url:new URL("./elements/haxcms-elements/lib/core/haxcms-editor-builder.js",document.baseURI).href},h=e("HAXCMSEditorBuilder",function(e){function a(){var e;return c(this,a),(e=r(this,a)).windowControllers=new AbortController,globalThis.HAXCMS.requestAvailability().storePieces.editorBuilder=e,e.applyContext(),globalThis.addEventListener("haxcms-site-editor-loaded",e.editorLoaded.bind(e),{signal:e.windowControllers.signal}),e}return i(a,e),n(a,[{key:"connectedCallback",value:function(){s(a,"connectedCallback",this,1)&&s(a,"connectedCallback",this,3)([]),this.dispatchEvent(new CustomEvent("haxcms-editor-builder-ready",{bubbles:!0,composed:!0,cancelable:!1,detail:this}))}},{key:"disconnectedCallback",value:function(){this.windowControllers.abort(),s(a,"disconnectedCallback",this,1)&&s(a,"disconnectedCallback",this,3)([])}},{key:"editorLoaded",value:function(e){var i=this;o.cmsSiteEditor.haxCmsSiteEditorUIElement||t.import("./c0c474ac.js").then((function(){for(var e in o.cmsSiteEditor.haxCmsSiteEditorUIElement=globalThis.document.createElement("haxcms-site-editor-ui"),o.setupSlots)switch(e){case"haxcms-site-editor-ui-prefix-avatar":case"haxcms-site-editor-ui-prefix-buttons":case"haxcms-site-editor-ui-suffix-buttons":case"haxcms-site-editor-ui-main-menu":case"haxcms-site-editor-ui-topbar-character-button":for(var t in o.setupSlots[e])o.cmsSiteEditor.haxCmsSiteEditorUIElement.appendChild(o.setupSlots[e][t])}i.parentNode?i.parentNode.insertBefore(o.cmsSiteEditor.haxCmsSiteEditorUIElement,i):globalThis.document.body.appendChild(o.cmsSiteEditor.haxCmsSiteEditorUIElement),setTimeout((function(){o.cmsSiteEditor.haxCmsSiteEditorUIElement.painting=!1}),600)}))}},{key:"applyContext",value:(h=l(d().mark((function e(){var i,n,s,a=this,c=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=c.length>0&&void 0!==c[0]?c[0]:null,this.__appliedContext){e.next=11;break}if(this.__appliedContext=!0,null==i&&(i=globalThis.HAXCMS.requestAvailability().getApplicationContext()),!["php","nodejs","desktop"].includes(i)){e.next=9;break}return n=globalThis.document.createElement("script"),globalThis.appSettings&&globalThis.appSettings.connectionSettings?n.src=globalThis.appSettings.connectionSettings:n.src="../../system/api/connectionSettings",e.next=9,fetch(n.src).then((function(e){var t=e.headers.get("content-type");e.ok&&t.includes("application/javascript")&&(a.__hasConnectionSettings=!0,globalThis.document.documentElement.appendChild(n))}));case 9:"demo"==i&&(this.__hasConnectionSettings=!0),!["published","11ty"].includes(i)&&this.__hasConnectionSettings&&(s=new URL("./haxcms-editor-builder.js",u.url).href+"/../",o.cmsSiteEditorBackend.tag="haxcms-backend-".concat(i),t.import("".concat(s,"backends/").concat(o.cmsSiteEditorBackend.tag,".js")).then((function(e){o.cmsSiteEditorBackend.instance||(o.cmsSiteEditorBackend.instance=globalThis.document.createElement(o.cmsSiteEditorBackend.tag),globalThis.document.body.appendChild(o.cmsSiteEditorBackend.instance))})));case 11:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})}],[{key:"tag",get:function(){return"haxcms-editor-builder"}}]);var h}(a(HTMLElement)));globalThis.customElements.define(h.tag,h)}}}));
