System.register(["./34495f64.js","./d028ee45.js","./9347a214.js"],(function(n){"use strict";var t,e,o,a,i,s,c,l,d,r,u,m,h,b,p,f,g;return{setters:[function(n){t=n._,e=n.a,o=n.g,a=n.b,i=n.x,s=n.f,c=n.n,l=n.o,d=n.t,r=n.O,u=n.aV,m=n.i,h=n.c,b=n.d,p=n.e,f=n.h,g=n.j},function(){},function(){}],execute:function(){var v,k,y=n("HAXCMSOutlineEditorDialog",function(n){function u(){var n;return h(this,u),(n=b(this,u)).__disposer=[],n.manifestItems=[],n.viewMode=!1,n.t=n.t||{},n.t=p(p({},n.t),{},{save:"Save",cancel:"cancel"}),n}return t(u,n),e(u,[{key:"render",value:function(){return i(v||(v=a(['\n      <outline-designer\n        id="outline"\n        edit-mode\n        .hidden="','"\n        .items="','"\n      ></outline-designer>\n      <div class="buttons">\n        <button @click="','" class="hax-modal-btn">\n          ','\n        </button>\n        <button @click="','" class="cancel hax-modal-btn">\n          ',"\n        </button>\n      </div>\n    "])),this.viewMode,this.manifestItems,this._saveTap,this.t.save,this._cancelTap,this.t.cancel)}},{key:"updated",value:function(n){var t=this;s(u,"updated",this,1)&&s(u,"updated",this,3)([n]),n.forEach((function(n,e){"opened"==e&&t.dispatchEvent(new CustomEvent("opened-changed",{detail:t[e]})),"manifestItems"==e&&(t._manifestItemsChanged(t[e],n),t.dispatchEvent(new CustomEvent("manifest-edit-mode-changed",{detail:t[e]})))}))}},{key:"_manifestItemsChanged",value:function(n){n&&(globalThis.JSONOutlineSchema.requestAvailability().items=n,this.manifestItemsStatic=JSON.stringify(n,null,2))}},{key:"connectedCallback",value:function(){var n=this;s(u,"connectedCallback",this,3)([]),c((function(t){n.manifestItems=l(d(r.manifest.items)),setTimeout((function(){n.shadowRoot&&n.shadowRoot.querySelector("#outline").__syncUIAndDataModel()}),500),n.__disposer.push(t)}))}},{key:"disconnectedCallback",value:function(){for(var n in this.__disposer)this.__disposer[n].dispose();s(u,"disconnectedCallback",this,3)([])}},{key:"_saveTap",value:(m=f(g().mark((function n(t){var e,o,a,i,s,c=this;return g().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.playSound("click"),n.next=3,this.shadowRoot.querySelector("#outline").getData();case 3:e=n.sent,o=0,a=0,i=0,e.items.map((function(n){n.delete?o++:n.new?i++:n.modified&&a++})),(""==(s="".concat(i>0?"‣ ".concat(i," new pages will be created\n"):"").concat(a>0?"‣ ".concat(a," pages will be updated\n"):"").concat(o>0?"‣ ".concat(o," pages will be deleted\n"):""))||globalThis.confirm("Saving will commit the following actions:\n".concat(s,"\nAre you sure?")))&&(globalThis.dispatchEvent(new CustomEvent("haxcms-save-outline",{bubbles:!0,composed:!0,detail:e.items})),setTimeout((function(){c.dispatchEvent(new CustomEvent("simple-modal-hide",{bubbles:!0,composed:!0,cancelable:!1,detail:!1}))}),0));case 12:case"end":return n.stop()}}),n,this)}))),function(n){return m.apply(this,arguments)})},{key:"_cancelTap",value:function(n){r.playSound("error"),this.dispatchEvent(new CustomEvent("simple-modal-hide",{bubbles:!0,composed:!0,cancelable:!1,detail:!1}))}}],[{key:"styles",get:function(){return[o(k||(k=a(["\n        :host {\n          display: block;\n          height: 70vh;\n          overflow: auto;\n          padding-bottom: 40px;\n          padding-top: 16px;\n          min-width: 70vw;\n          font-family: var(--ddd-font-navigation);\n        }\n        .buttons {\n          position: absolute;\n          bottom: 0;\n          z-index: 1000000;\n          background-color: var(--simple-modal-titlebar-background, #000000);\n          left: 0;\n          right: 0px;\n          padding-left: 8px;\n        }\n        .buttons button {\n          color: black;\n          background-color: white;\n        }\n        simple-icon {\n          margin-right: 4px;\n        }\n        outline-designer:not(:defined) {\n          display: none;\n        }\n        #toggle {\n          float: right;\n          text-transform: unset;\n        }\n        button.hax-modal-btn {\n          font-size: 30px;\n          padding: 8px;\n          margin: 4px 8px;\n          color: white;\n          background-color: green;\n          border: 4px solid black;\n          border-radius: 8px;\n          font-family: sans-serif;\n        }\n        button.hax-modal-btn.cancel {\n          background-color: red;\n        }\n        button.hax-modal-btn:hover,\n        button.hax-modal-btn:focus {\n          outline: 2px solid black;\n          cursor: pointer;\n          background-color: darkgreen;\n        }\n        button.hax-modal-btn.cancel:hover,\n        button.hax-modal-btn.cancel:focus {\n          background-color: darkred;\n        }\n      "])))]}},{key:"tag",get:function(){return"haxcms-outline-editor-dialog"}},{key:"properties",get:function(){return{opened:{type:Boolean},manifestItems:{type:Array},manifestItemsStatic:{type:String,attribute:"manifest-items-static"},viewLabel:{type:String,attribute:"view-label"},viewMode:{type:Boolean,attribute:"view-mode"}}}}]);var m}(u(m)));globalThis.customElements.define(y.tag,y)}}}));
