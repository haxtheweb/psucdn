System.register(["./5a6fff1c.js"],(function(n){"use strict";var e,a,t,s,i,o,l,h;return{setters:[function(n){e=n._,a=n.a,t=n.e,s=n.u,i=n.f,o=n.r,l=n.c,h=n.d}],execute:function(){var r={url:new URL("./elements/hal-9000/hal-9000.js",document.baseURI).href},g=n("Hal9000",function(n){function o(){var n;l(this,o),(n=h(this,o)).toast=!1,n.windowControllers=new AbortController,n.commands={},n.respondsTo="(merlin)",n.debug=!1,n.pitch=.9,n.rate=.9,n.language=globalThis.navigator.language,globalThis.Hal9000=globalThis.Hal9000||{},globalThis.Hal9000.instance=n;var e="".concat(new URL("./lib/annyang/annyang.min.js",r.url).href);return globalThis.addEventListener("es-bridge-annyang-loaded",n._annyangLoaded.bind(n),{signal:n.windowControllers.signal}),globalThis.ESGlobalBridge.requestAvailability().load("annyang",e),void 0!==globalThis.speechSynthesis&&(globalThis.SpeechRecognition||globalThis.webkitSpeechRecognition||globalThis.mozSpeechRecognition||globalThis.msSpeechRecognition||globalThis.oSpeechRecognition)&&(n.synth=globalThis.speechSynthesis),n}return e(o,n),a(o,[{key:"_commandsChanged",value:function(n){this.addCommands(n)}},{key:"addCommands",value:function(n){if(this.annyang){if(this.annyang.removeCommands(),n["*anything"]){var e=n["*anything"];delete n["*anything"],n["*anything"]=e}this.annyang.addCommands(n)}}},{key:"speak",value:function(n){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise((function(s){e.__text=n,e.synth?(e.utter=new SpeechSynthesisUtterance(e.__text),e.utter.pitch=e.pitch,e.utter.rate=e.rate,e.utter.lang=e.language,globalThis.HAXCMS&&(globalThis.HAXCMS.instance.setCursor("hax:wizard-hat"),globalThis.HAXCMS.instance.setFavicon("hax:wizard-hat")),e.synth.speak(e.utter),e.toast&&e.setToast(n,a,t),e.utter.onend=function(n){globalThis.HAXCMS&&(globalThis.HAXCMS.instance.resetCursor(),globalThis.HAXCMS.instance.resetFavicon()),a||t||globalThis.dispatchEvent(new CustomEvent("super-daemon-toast-hide",{bubbles:!0,composed:!0,cancelable:!1,detail:!1})),s(n)}):s(!1)}))}},{key:"setToast",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];globalThis.dispatchEvent(new CustomEvent("super-daemon-toast-show",{bubbles:!0,composed:!0,cancelable:!0,detail:{text:n,future:!0,merlin:!0,accentColor:"purple",duration:4e3,alwaysvisible:e,awaitingMerlinInput:a}}))}},{key:"_annyangLoaded",value:function(){if(this.annyang=globalThis.annyang,this.annyang){this.annyang.addCommands(this.commands),this.annyang.debug(this.debug),this.auto?this.annyang.start({autoRestart:!0,continuous:!0}):this.enabled&&this.annyang.start();var n=new CustomEvent("hal-9000-online",{bubbles:!0,cancelable:!1,detail:!0});this.dispatchEvent(n)}}},{key:"_respondsToChanged",value:function(n,e){this.annyang&&this.annyang.removeCommands();var a={};for(var s in this.commands)s.replace(e,n)!==s?a[s.replace(e,n)]=this.commands[s]:a[s]=this.commands[s];a.length>0&&(this.commands=t({},a))}},{key:"_autoChanged",value:function(n){this.enabled=n}},{key:"_enabledChanged",value:function(n){this.annyang&&(n?this.auto?this.annyang.start({autoRestart:!0,continuous:!0}):this.annyang.start():this.annyang.abort())}},{key:"_debugChanged",value:function(n,e){this.annyang&&this.annyang.debug(n)}},{key:"updated",value:function(n){var e=this;n.forEach((function(n,a){"commands"==a&&"undefined"!==s(n)&&e._commandsChanged(e[a]),"respondsTo"==a&&e._respondsToChanged(e[a],n),"debug"==a&&e._debugChanged(e[a],n),"auto"==a&&e._autoChanged(e[a],n),"enabled"==a&&e._enabledChanged(e[a],n)}))}},{key:"disconnectedCallback",value:function(){this.windowControllers.abort(),i(o,"disconnectedCallback",this,3)([])}}],[{key:"properties",get:function(){return{toast:{type:Boolean,reflect:!0},commands:{name:"commands",type:Object},respondsTo:{name:"respondsTo",type:String,attribute:"responds-to"},debug:{name:"debug",type:Boolean},auto:{name:"auto",type:Boolean,reflect:!0},enabled:{name:"enabled",type:Boolean,reflect:!0},pitch:{name:"pitch",type:Number,reflect:!0},rate:{name:"rate",type:Number,reflect:!0},language:{name:"language",type:String,reflect:!0}}}},{key:"tag",get:function(){return"hal-9000"}}])}(o));customElements.define(g.tag,g),globalThis.Hal9000=globalThis.Hal9000||{},globalThis.Hal9000.requestAvailability=function(){if(!globalThis.Hal9000.instance){var n=globalThis.document.createElement("hal-9000");globalThis.document.body.appendChild(n),globalThis.Hal9000.instance=n}return globalThis.Hal9000.instance};n("HAL9000Instance",globalThis.Hal9000.requestAvailability())}}}));
